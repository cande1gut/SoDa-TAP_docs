<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="SoDa-TAP documentation"><meta name=author content="Candelario Gutierrez"><link href=https://www.sodatap.ml/architecture/deployment/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.0, mkdocs-material-8.3.9"><title>Deployment - SoDa-TAP</title><link rel=stylesheet href=../../assets/stylesheets/main.1dff34a1.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link rel=stylesheet href=../../overrides/assets/stylesheets/main.82a244a8.min.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=deep-orange data-md-color-accent=deep-orange> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#deployment class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=SoDa-TAP class="md-header__button md-logo" aria-label=SoDa-TAP data-md-component=logo> <img src=../../assets/images/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> SoDa-TAP </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Deployment </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=deep-orange data-md-color-accent=deep-orange aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/cande1gut/SoDa-TAP title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> cande1gut/SoDa-TAP </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../concept/ class="md-tabs__link md-tabs__link--active"> Architecture </a> </li> <li class=md-tabs__item> <a href=../../useCases/ai4buzz/ class=md-tabs__link> Use Cases </a> </li> <li class=md-tabs__item> <a href=../../references/ class=md-tabs__link> References </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=SoDa-TAP class="md-nav__button md-logo" aria-label=SoDa-TAP data-md-component=logo> <img src=../../assets/images/logo.png alt=logo> </a> SoDa-TAP </label> <div class=md-nav__source> <a href=https://github.com/cande1gut/SoDa-TAP title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> cande1gut/SoDa-TAP </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Architecture data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../concept/ class=md-nav__link> Concept </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Deployment <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Deployment </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#own-environment class=md-nav__link> Own Environment </a> <nav class=md-nav aria-label="Own Environment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#to-deploy-cratedb-kafka-and-jupyterlab class=md-nav__link> To deploy CrateDB, Kafka, and JupyterLab </a> </li> <li class=md-nav__item> <a href=#to-deploy-apis-and-custom-visualizations class=md-nav__link> To deploy APIs and Custom Visualizations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-environment class=md-nav__link> Create Environment </a> <nav class=md-nav aria-label="Create Environment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuring-environment-resources class=md-nav__link> Configuring Environment Resources </a> </li> <li class=md-nav__item> <a href=#topic-creation class=md-nav__link> Topic Creation </a> </li> <li class=md-nav__item> <a href=#kafka-connector-creation class=md-nav__link> Kafka Connector Creation </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#testing-the-pipeline class=md-nav__link> Testing the Pipeline </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Use Cases <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Use Cases" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Use Cases </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../useCases/ai4buzz/ class=md-nav__link> AI4Buzz </a> </li> <li class=md-nav__item> <a href=../../useCases/virtualGym/ class=md-nav__link> Virtual Gym </a> </li> <li class=md-nav__item> <a href=../../useCases/mentalHealth/ class=md-nav__link> Mental Health </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../references/ >References</a> </div> <nav class=md-nav aria-label=References data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> References </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#own-environment class=md-nav__link> Own Environment </a> <nav class=md-nav aria-label="Own Environment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#to-deploy-cratedb-kafka-and-jupyterlab class=md-nav__link> To deploy CrateDB, Kafka, and JupyterLab </a> </li> <li class=md-nav__item> <a href=#to-deploy-apis-and-custom-visualizations class=md-nav__link> To deploy APIs and Custom Visualizations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-environment class=md-nav__link> Create Environment </a> <nav class=md-nav aria-label="Create Environment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuring-environment-resources class=md-nav__link> Configuring Environment Resources </a> </li> <li class=md-nav__item> <a href=#topic-creation class=md-nav__link> Topic Creation </a> </li> <li class=md-nav__item> <a href=#kafka-connector-creation class=md-nav__link> Kafka Connector Creation </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#testing-the-pipeline class=md-nav__link> Testing the Pipeline </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/cande1gut/SoDa-TAP/edit/master/docs/architecture/deployment.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <a href=https://github.com/cande1gut/SoDa-TAP/edit/master/docs/architecture/deployment.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg> </a> <h1 id=deployment>Deployment<a class=headerlink href=#deployment title="Permanent link">&para;</a></h1> <p>There are 2 ways that you can deploy the data platform, one, by using your own environment already configured with Docker and start all the required services with your own needs or two, by creting a new virtual environment from scratch to have more control over what resources to use and how many. The main difference is that the later was targeted to not so experienced users with coding by also accompanying it with a custom defined dictionary to control machine and dataset variables. </p> <p>In both cases, the custom developed services that will be launched as part of the data platform are:</p> <ul> <li><a href=https://github.com/cande1gut/SoDa-TAP>JupyterLab</a> (Data retrieval client and SoDa-TAP engine).</li> <li><a href=https://github.com/cande1gut/apis>APIs</a>.</li> <li><a href=https://github.com/cande1gut/cecn-visualizations>Visualizations</a> (If needed).</li> </ul> <h2 id=own-environment>Own Environment<a class=headerlink href=#own-environment title="Permanent link">&para;</a></h2> <p>For this scenario you only require to reuse the previously mentioned resources over your own environment:</p> <h3 id=to-deploy-cratedb-kafka-and-jupyterlab>To deploy CrateDB, Kafka, and JupyterLab<a class=headerlink href=#to-deploy-cratedb-kafka-and-jupyterlab title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&#39;3.3&#39;</span><span class=w></span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=nt>services</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>  </span><span class=c1>#CrateDB</span><span class=w></span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>  </span><span class=nt>cratedb</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">crate:4.7.1</span><span class=w> </span><span class=c1># (1)!</span><span class=w></span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cratedb</span><span class=w></span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">4200:4200</span><span class=w></span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">4300:4300</span><span class=w></span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5432:5432</span><span class=w></span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w> </span><span class=c1># (2)!</span><span class=w></span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">./crateData:/data</span><span class=w></span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;crate&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a><span class=w>              </span><span class=s>&quot;-Ccluster.name=CECN&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a><span class=w>              </span><span class=s>&quot;-Cnode.name=cratedb&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=w>              </span><span class=s>&quot;-Cnode.data=true&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a><span class=w>              </span><span class=s>&quot;-Cnetwork.host=_site_&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a><span class=w>              </span><span class=s>&quot;-Cdiscovery.seed_hosts=cratedb_02,cratedb_03&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a><span class=w>              </span><span class=s>&quot;-Ccluster.initial_master_nodes=cratedb,cratedb_02,cratedb_03&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a><span class=w>              </span><span class=s>&quot;-Cgateway.expected_nodes=3&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a><span class=w>              </span><span class=s>&quot;-Cgateway.recover_after_nodes=2&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a><span class=w>              </span><span class=s>&quot;-Chttp.cors.enabled=true&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a><span class=w>              </span><span class=s>&quot;-Chttp.cors.allow-origin=*&quot;</span><span class=w></span>
<a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a><span class=w>              </span><span class="p p-Indicator">]</span><span class=w></span>
<a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a><span class=w>    </span><span class=nt>deploy</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a><span class=w>      </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a><span class=w>      </span><span class=nt>restart_policy</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a><span class=w>        </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">on-failure</span><span class=w></span>
<a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">CRATE_HEAP_SIZE=2g</span><span class=w> </span><span class=c1># (3)!</span><span class=w></span>
<a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a>
<a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a><span class=w>  </span><span class=nt>cratedb_02</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">crate:4.7.1</span><span class=w> </span><span class=c1># (4)!</span><span class=w></span>
<a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cratedb_02</span><span class=w></span>
<a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">4201:4200</span><span class=w></span>
<a id=__codelineno-0-37 name=__codelineno-0-37 href=#__codelineno-0-37></a><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w> </span><span class=c1># (5)!</span><span class=w></span>
<a id=__codelineno-0-38 name=__codelineno-0-38 href=#__codelineno-0-38></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">./crateData2:/data</span><span class=w></span>
<a id=__codelineno-0-39 name=__codelineno-0-39 href=#__codelineno-0-39></a><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;crate&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-40 name=__codelineno-0-40 href=#__codelineno-0-40></a><span class=w>              </span><span class=s>&quot;-Ccluster.name=CECN&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-41 name=__codelineno-0-41 href=#__codelineno-0-41></a><span class=w>              </span><span class=s>&quot;-Cnode.name=cratedb_02&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-42 name=__codelineno-0-42 href=#__codelineno-0-42></a><span class=w>              </span><span class=s>&quot;-Cnode.data=true&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-43 name=__codelineno-0-43 href=#__codelineno-0-43></a><span class=w>              </span><span class=s>&quot;-Cnetwork.host=_site_&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-44 name=__codelineno-0-44 href=#__codelineno-0-44></a><span class=w>              </span><span class=s>&quot;-Cdiscovery.seed_hosts=cratedb,cratedb_03&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-45 name=__codelineno-0-45 href=#__codelineno-0-45></a><span class=w>              </span><span class=s>&quot;-Ccluster.initial_master_nodes=cratedb,cratedb_02,cratedb_03&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-46 name=__codelineno-0-46 href=#__codelineno-0-46></a><span class=w>              </span><span class=s>&quot;-Cgateway.expected_nodes=3&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-47 name=__codelineno-0-47 href=#__codelineno-0-47></a><span class=w>              </span><span class=s>&quot;-Cgateway.recover_after_nodes=2&quot;</span><span class="p p-Indicator">]</span><span class=w></span>
<a id=__codelineno-0-48 name=__codelineno-0-48 href=#__codelineno-0-48></a><span class=w>    </span><span class=nt>deploy</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-49 name=__codelineno-0-49 href=#__codelineno-0-49></a><span class=w>      </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-50 name=__codelineno-0-50 href=#__codelineno-0-50></a><span class=w>      </span><span class=nt>restart_policy</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-51 name=__codelineno-0-51 href=#__codelineno-0-51></a><span class=w>        </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">on-failure</span><span class=w></span>
<a id=__codelineno-0-52 name=__codelineno-0-52 href=#__codelineno-0-52></a><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-53 name=__codelineno-0-53 href=#__codelineno-0-53></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">CRATE_HEAP_SIZE=2g</span><span class=w> </span><span class=c1># (6)!</span><span class=w></span>
<a id=__codelineno-0-54 name=__codelineno-0-54 href=#__codelineno-0-54></a>
<a id=__codelineno-0-55 name=__codelineno-0-55 href=#__codelineno-0-55></a><span class=w>  </span><span class=nt>cratedb_03</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-56 name=__codelineno-0-56 href=#__codelineno-0-56></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">crate:4.7.1</span><span class=w> </span><span class=c1># (7)!</span><span class=w></span>
<a id=__codelineno-0-57 name=__codelineno-0-57 href=#__codelineno-0-57></a><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cratedb_03</span><span class=w></span>
<a id=__codelineno-0-58 name=__codelineno-0-58 href=#__codelineno-0-58></a><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-59 name=__codelineno-0-59 href=#__codelineno-0-59></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">4202:4200</span><span class=w></span>
<a id=__codelineno-0-60 name=__codelineno-0-60 href=#__codelineno-0-60></a><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w> </span><span class=c1># (8)!</span><span class=w></span>
<a id=__codelineno-0-61 name=__codelineno-0-61 href=#__codelineno-0-61></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">./crateData3:/data</span><span class=w></span>
<a id=__codelineno-0-62 name=__codelineno-0-62 href=#__codelineno-0-62></a><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;crate&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-63 name=__codelineno-0-63 href=#__codelineno-0-63></a><span class=w>              </span><span class=s>&quot;-Ccluster.name=CECN&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-64 name=__codelineno-0-64 href=#__codelineno-0-64></a><span class=w>              </span><span class=s>&quot;-Cnode.name=cratedb_03&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-65 name=__codelineno-0-65 href=#__codelineno-0-65></a><span class=w>              </span><span class=s>&quot;-Cnode.data=true&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-66 name=__codelineno-0-66 href=#__codelineno-0-66></a><span class=w>              </span><span class=s>&quot;-Cnetwork.host=_site_&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-67 name=__codelineno-0-67 href=#__codelineno-0-67></a><span class=w>              </span><span class=s>&quot;-Cdiscovery.seed_hosts=cratedb,cratedb_02&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-68 name=__codelineno-0-68 href=#__codelineno-0-68></a><span class=w>              </span><span class=s>&quot;-Ccluster.initial_master_nodes=cratedb,cratedb_02,cratedb_03&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-69 name=__codelineno-0-69 href=#__codelineno-0-69></a><span class=w>              </span><span class=s>&quot;-Cgateway.expected_nodes=3&quot;</span><span class="p p-Indicator">,</span><span class=w></span>
<a id=__codelineno-0-70 name=__codelineno-0-70 href=#__codelineno-0-70></a><span class=w>              </span><span class=s>&quot;-Cgateway.recover_after_nodes=2&quot;</span><span class="p p-Indicator">]</span><span class=w></span>
<a id=__codelineno-0-71 name=__codelineno-0-71 href=#__codelineno-0-71></a><span class=w>    </span><span class=nt>deploy</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-72 name=__codelineno-0-72 href=#__codelineno-0-72></a><span class=w>      </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-73 name=__codelineno-0-73 href=#__codelineno-0-73></a><span class=w>      </span><span class=nt>restart_policy</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-74 name=__codelineno-0-74 href=#__codelineno-0-74></a><span class=w>        </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">on-failure</span><span class=w></span>
<a id=__codelineno-0-75 name=__codelineno-0-75 href=#__codelineno-0-75></a><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-76 name=__codelineno-0-76 href=#__codelineno-0-76></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">CRATE_HEAP_SIZE=2g</span><span class=w> </span><span class=c1># (9)!</span><span class=w></span>
<a id=__codelineno-0-77 name=__codelineno-0-77 href=#__codelineno-0-77></a>
<a id=__codelineno-0-78 name=__codelineno-0-78 href=#__codelineno-0-78></a><span class=w>  </span><span class=c1>#Kafka</span><span class=w></span>
<a id=__codelineno-0-79 name=__codelineno-0-79 href=#__codelineno-0-79></a><span class=w>  </span><span class=nt>zookeeper</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-80 name=__codelineno-0-80 href=#__codelineno-0-80></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">confluentinc/cp-zookeeper:7.0.0</span><span class=w> </span><span class=c1># (10)!</span><span class=w></span>
<a id=__codelineno-0-81 name=__codelineno-0-81 href=#__codelineno-0-81></a><span class=w>    </span><span class=nt>hostname</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">zookeeper</span><span class=w></span>
<a id=__codelineno-0-82 name=__codelineno-0-82 href=#__codelineno-0-82></a><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">zookeeper</span><span class=w></span>
<a id=__codelineno-0-83 name=__codelineno-0-83 href=#__codelineno-0-83></a><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-84 name=__codelineno-0-84 href=#__codelineno-0-84></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2181:2181</span><span class=w></span>
<a id=__codelineno-0-85 name=__codelineno-0-85 href=#__codelineno-0-85></a><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-86 name=__codelineno-0-86 href=#__codelineno-0-86></a><span class=w>      </span><span class=nt>ZOOKEEPER_CLIENT_PORT</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2181</span><span class=w></span>
<a id=__codelineno-0-87 name=__codelineno-0-87 href=#__codelineno-0-87></a><span class=w>      </span><span class=nt>ZOOKEEPER_TICK_TIME</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2000</span><span class=w></span>
<a id=__codelineno-0-88 name=__codelineno-0-88 href=#__codelineno-0-88></a>
<a id=__codelineno-0-89 name=__codelineno-0-89 href=#__codelineno-0-89></a><span class=w>  </span><span class=nt>broker</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-90 name=__codelineno-0-90 href=#__codelineno-0-90></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">confluentinc/cp-enterprise-kafka:7.0.0</span><span class=w> </span><span class=c1># (11)!</span><span class=w></span>
<a id=__codelineno-0-91 name=__codelineno-0-91 href=#__codelineno-0-91></a><span class=w>    </span><span class=nt>hostname</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">broker</span><span class=w></span>
<a id=__codelineno-0-92 name=__codelineno-0-92 href=#__codelineno-0-92></a><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">broker</span><span class=w></span>
<a id=__codelineno-0-93 name=__codelineno-0-93 href=#__codelineno-0-93></a><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-94 name=__codelineno-0-94 href=#__codelineno-0-94></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">zookeeper</span><span class=w></span>
<a id=__codelineno-0-95 name=__codelineno-0-95 href=#__codelineno-0-95></a><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-96 name=__codelineno-0-96 href=#__codelineno-0-96></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">29092:29092</span><span class=w></span>
<a id=__codelineno-0-97 name=__codelineno-0-97 href=#__codelineno-0-97></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">9092:9092</span><span class=w></span>
<a id=__codelineno-0-98 name=__codelineno-0-98 href=#__codelineno-0-98></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">31001:31001</span><span class=w></span>
<a id=__codelineno-0-99 name=__codelineno-0-99 href=#__codelineno-0-99></a><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-100 name=__codelineno-0-100 href=#__codelineno-0-100></a><span class=w>      </span><span class=nt>KAFKA_BROKER_ID</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-101 name=__codelineno-0-101 href=#__codelineno-0-101></a><span class=w>      </span><span class=nt>KAFKA_ZOOKEEPER_CONNECT</span><span class=p>:</span><span class=w> </span><span class=s>&#39;zookeeper:2181&#39;</span><span class=w></span>
<a id=__codelineno-0-102 name=__codelineno-0-102 href=#__codelineno-0-102></a><span class=w>      </span><span class=nt>KAFKA_LISTENER_SECURITY_PROTOCOL_MAP</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT</span><span class=w></span>
<a id=__codelineno-0-103 name=__codelineno-0-103 href=#__codelineno-0-103></a><span class=w>      </span><span class=nt>KAFKA_ADVERTISED_LISTENERS</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PLAINTEXT://broker:29092,PLAINTEXT_HOST://localhost:9092</span><span class=w></span>
<a id=__codelineno-0-104 name=__codelineno-0-104 href=#__codelineno-0-104></a><span class=w>      </span><span class=nt>KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-105 name=__codelineno-0-105 href=#__codelineno-0-105></a><span class=w>      </span><span class=nt>KAFKA_TRANSACTION_STATE_LOG_MIN_ISR</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-106 name=__codelineno-0-106 href=#__codelineno-0-106></a><span class=w>      </span><span class=nt>KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-107 name=__codelineno-0-107 href=#__codelineno-0-107></a><span class=w>      </span><span class=c1>#KAFKA_GROUP_INITIAL_REBALANCE_DELAY_MS: 0</span><span class=w></span>
<a id=__codelineno-0-108 name=__codelineno-0-108 href=#__codelineno-0-108></a><span class=w>      </span><span class=c1>#KAFKA_JMX_PORT: 9101</span><span class=w></span>
<a id=__codelineno-0-109 name=__codelineno-0-109 href=#__codelineno-0-109></a><span class=w>      </span><span class=nt>KAFKA_INTER_BROKER_LISTENER_NAME</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PLAINTEXT</span><span class=w></span>
<a id=__codelineno-0-110 name=__codelineno-0-110 href=#__codelineno-0-110></a><span class=w>      </span><span class=nt>KAFKA_DELETE_TOPIC_ENABLE</span><span class=p>:</span><span class=w> </span><span class=s>&#39;true&#39;</span><span class=w></span>
<a id=__codelineno-0-111 name=__codelineno-0-111 href=#__codelineno-0-111></a><span class=w>      </span><span class=nt>KAFKA_AUTO_CREATE_TOPICS_ENABLE</span><span class=p>:</span><span class=w> </span><span class=s>&#39;true&#39;</span><span class=w></span>
<a id=__codelineno-0-112 name=__codelineno-0-112 href=#__codelineno-0-112></a><span class=w>      </span><span class=nt>KAFKA_METRIC_REPORTERS</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">io.confluent.metrics.reporter.ConfluentMetricsReporter</span><span class=w></span>
<a id=__codelineno-0-113 name=__codelineno-0-113 href=#__codelineno-0-113></a><span class=w>      </span><span class=nt>KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-114 name=__codelineno-0-114 href=#__codelineno-0-114></a><span class=w>      </span><span class=nt>KAFKA_GROUP_INITIAL_REBALANCE_DELAY_MS</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class=w></span>
<a id=__codelineno-0-115 name=__codelineno-0-115 href=#__codelineno-0-115></a><span class=w>      </span><span class=nt>CONFLUENT_METRICS_REPORTER_BOOTSTRAP_SERVERS</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">broker:29092</span><span class=w></span>
<a id=__codelineno-0-116 name=__codelineno-0-116 href=#__codelineno-0-116></a><span class=w>      </span><span class=nt>CONFLUENT_METRICS_REPORTER_ZOOKEEPER_CONNECT</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">zookeeper:2181</span><span class=w></span>
<a id=__codelineno-0-117 name=__codelineno-0-117 href=#__codelineno-0-117></a><span class=w>      </span><span class=nt>CONFLUENT_METRICS_REPORTER_TOPIC_REPLICAS</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-118 name=__codelineno-0-118 href=#__codelineno-0-118></a><span class=w>      </span><span class=nt>CONFLUENT_METRICS_ENABLE</span><span class=p>:</span><span class=w> </span><span class=s>&#39;false&#39;</span><span class=w></span>
<a id=__codelineno-0-119 name=__codelineno-0-119 href=#__codelineno-0-119></a><span class=w>      </span><span class=nt>CONFLUENT_SUPPORT_CUSTOMER_ID</span><span class=p>:</span><span class=w> </span><span class=s>&#39;anonymous&#39;</span><span class=w></span>
<a id=__codelineno-0-120 name=__codelineno-0-120 href=#__codelineno-0-120></a><span class=w>      </span><span class=nt>KAFKA_JMX_HOSTNAME</span><span class=p>:</span><span class=w> </span><span class=s>&quot;localhost&quot;</span><span class=w></span>
<a id=__codelineno-0-121 name=__codelineno-0-121 href=#__codelineno-0-121></a><span class=w>      </span><span class=nt>KAFKA_JMX_PORT</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">31001</span><span class=w></span>
<a id=__codelineno-0-122 name=__codelineno-0-122 href=#__codelineno-0-122></a>
<a id=__codelineno-0-123 name=__codelineno-0-123 href=#__codelineno-0-123></a><span class=w>  </span><span class=nt>schema-registry</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-124 name=__codelineno-0-124 href=#__codelineno-0-124></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">confluentinc/cp-schema-registry:7.0.0</span><span class=w> </span><span class=c1># (12)!</span><span class=w></span>
<a id=__codelineno-0-125 name=__codelineno-0-125 href=#__codelineno-0-125></a><span class=w>    </span><span class=nt>hostname</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">schema-registry</span><span class=w></span>
<a id=__codelineno-0-126 name=__codelineno-0-126 href=#__codelineno-0-126></a><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">schema-registry</span><span class=w></span>
<a id=__codelineno-0-127 name=__codelineno-0-127 href=#__codelineno-0-127></a><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-128 name=__codelineno-0-128 href=#__codelineno-0-128></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">broker</span><span class=w></span>
<a id=__codelineno-0-129 name=__codelineno-0-129 href=#__codelineno-0-129></a><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-130 name=__codelineno-0-130 href=#__codelineno-0-130></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8081:8081</span><span class=w></span>
<a id=__codelineno-0-131 name=__codelineno-0-131 href=#__codelineno-0-131></a><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-132 name=__codelineno-0-132 href=#__codelineno-0-132></a><span class=w>      </span><span class=nt>SCHEMA_REGISTRY_HOST_NAME</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">schema-registry</span><span class=w></span>
<a id=__codelineno-0-133 name=__codelineno-0-133 href=#__codelineno-0-133></a><span class=w>      </span><span class=nt>SCHEMA_REGISTRY_KAFKASTORE_BOOTSTRAP_SERVERS</span><span class=p>:</span><span class=w> </span><span class=s>&#39;broker:29092&#39;</span><span class=w></span>
<a id=__codelineno-0-134 name=__codelineno-0-134 href=#__codelineno-0-134></a><span class=w>      </span><span class=nt>SCHEMA_REGISTRY_LISTENERS</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http://0.0.0.0:8081</span><span class=w></span>
<a id=__codelineno-0-135 name=__codelineno-0-135 href=#__codelineno-0-135></a>
<a id=__codelineno-0-136 name=__codelineno-0-136 href=#__codelineno-0-136></a><span class=w>  </span><span class=nt>connect</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-137 name=__codelineno-0-137 href=#__codelineno-0-137></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">confluentinc/cp-kafka-connect:7.0.0</span><span class=w> </span><span class=c1># (13)!</span><span class=w></span>
<a id=__codelineno-0-138 name=__codelineno-0-138 href=#__codelineno-0-138></a><span class=w>    </span><span class=nt>hostname</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">connect</span><span class=w></span>
<a id=__codelineno-0-139 name=__codelineno-0-139 href=#__codelineno-0-139></a><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">connect</span><span class=w></span>
<a id=__codelineno-0-140 name=__codelineno-0-140 href=#__codelineno-0-140></a><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-141 name=__codelineno-0-141 href=#__codelineno-0-141></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">broker</span><span class=w></span>
<a id=__codelineno-0-142 name=__codelineno-0-142 href=#__codelineno-0-142></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">schema-registry</span><span class=w></span>
<a id=__codelineno-0-143 name=__codelineno-0-143 href=#__codelineno-0-143></a><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-144 name=__codelineno-0-144 href=#__codelineno-0-144></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/home/vagrant/SoDa-TAP/data:/data</span><span class=w></span>
<a id=__codelineno-0-145 name=__codelineno-0-145 href=#__codelineno-0-145></a><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-146 name=__codelineno-0-146 href=#__codelineno-0-146></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8083:8083</span><span class=w></span>
<a id=__codelineno-0-147 name=__codelineno-0-147 href=#__codelineno-0-147></a><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-148 name=__codelineno-0-148 href=#__codelineno-0-148></a><span class=w>      </span><span class=nt>CONNECT_BOOTSTRAP_SERVERS</span><span class=p>:</span><span class=w> </span><span class=s>&#39;broker:29092&#39;</span><span class=w></span>
<a id=__codelineno-0-149 name=__codelineno-0-149 href=#__codelineno-0-149></a><span class=w>      </span><span class=nt>CONNECT_REST_ADVERTISED_HOST_NAME</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">connect</span><span class=w></span>
<a id=__codelineno-0-150 name=__codelineno-0-150 href=#__codelineno-0-150></a><span class=w>      </span><span class=nt>CONNECT_REST_PORT</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8083</span><span class=w></span>
<a id=__codelineno-0-151 name=__codelineno-0-151 href=#__codelineno-0-151></a><span class=w>      </span><span class=nt>CONNECT_GROUP_ID</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">compose-connect-group</span><span class=w></span>
<a id=__codelineno-0-152 name=__codelineno-0-152 href=#__codelineno-0-152></a><span class=w>      </span><span class=nt>CONNECT_CONFIG_STORAGE_TOPIC</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">docker-connect-configs</span><span class=w></span>
<a id=__codelineno-0-153 name=__codelineno-0-153 href=#__codelineno-0-153></a><span class=w>      </span><span class=nt>CONNECT_CONFIG_STORAGE_REPLICATION_FACTOR</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-154 name=__codelineno-0-154 href=#__codelineno-0-154></a><span class=w>      </span><span class=nt>CONNECT_OFFSET_FLUSH_INTERVAL_MS</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10000</span><span class=w></span>
<a id=__codelineno-0-155 name=__codelineno-0-155 href=#__codelineno-0-155></a><span class=w>      </span><span class=nt>CONNECT_OFFSET_STORAGE_TOPIC</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">docker-connect-offsets</span><span class=w></span>
<a id=__codelineno-0-156 name=__codelineno-0-156 href=#__codelineno-0-156></a><span class=w>      </span><span class=nt>CONNECT_OFFSET_STORAGE_REPLICATION_FACTOR</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-157 name=__codelineno-0-157 href=#__codelineno-0-157></a><span class=w>      </span><span class=nt>CONNECT_STATUS_STORAGE_TOPIC</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">docker-connect-status</span><span class=w></span>
<a id=__codelineno-0-158 name=__codelineno-0-158 href=#__codelineno-0-158></a><span class=w>      </span><span class=nt>CONNECT_STATUS_STORAGE_REPLICATION_FACTOR</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-159 name=__codelineno-0-159 href=#__codelineno-0-159></a><span class=w>      </span><span class=nt>CONNECT_KEY_CONVERTER</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">org.apache.kafka.connect.storage.StringConverter</span><span class=w></span>
<a id=__codelineno-0-160 name=__codelineno-0-160 href=#__codelineno-0-160></a><span class=w>      </span><span class=nt>CONNECT_VALUE_CONVERTER</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">io.confluent.connect.avro.AvroConverter</span><span class=w></span>
<a id=__codelineno-0-161 name=__codelineno-0-161 href=#__codelineno-0-161></a><span class=w>      </span><span class=nt>CONNECT_VALUE_CONVERTER_SCHEMA_REGISTRY_URL</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http://schema-registry:8081</span><span class=w></span>
<a id=__codelineno-0-162 name=__codelineno-0-162 href=#__codelineno-0-162></a><span class=w>      </span><span class=nt>CONNECT_PLUGIN_PATH</span><span class=p>:</span><span class=w> </span><span class=s>&quot;/usr/share/java,/usr/share/confluent-hub-components&quot;</span><span class=w></span>
<a id=__codelineno-0-163 name=__codelineno-0-163 href=#__codelineno-0-163></a><span class=w>      </span><span class=nt>CONNECT_LOG4J_LOGGERS</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">org.apache.zookeeper=ERROR,org.I0Itec.zkclient=ERROR,org.reflections=ERROR</span><span class=w></span>
<a id=__codelineno-0-164 name=__codelineno-0-164 href=#__codelineno-0-164></a><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-165 name=__codelineno-0-165 href=#__codelineno-0-165></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bash</span><span class=w></span>
<a id=__codelineno-0-166 name=__codelineno-0-166 href=#__codelineno-0-166></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">-c</span><span class=w></span>
<a id=__codelineno-0-167 name=__codelineno-0-167 href=#__codelineno-0-167></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="p p-Indicator">|</span><span class=w></span>
<a id=__codelineno-0-168 name=__codelineno-0-168 href=#__codelineno-0-168></a><span class=w>        </span><span class=no>echo &quot;Installing connector plugins&quot;</span><span class=w></span>
<a id=__codelineno-0-169 name=__codelineno-0-169 href=#__codelineno-0-169></a><span class=w>        </span><span class=no>confluent-hub install --no-prompt confluentinc/kafka-connect-jdbc:5.4.1</span><span class=w></span>
<a id=__codelineno-0-170 name=__codelineno-0-170 href=#__codelineno-0-170></a><span class=w>        </span><span class=no>#confluent-hub install --no-prompt jcustenborder/kafka-connect-twitter:0.3.33</span><span class=w></span>
<a id=__codelineno-0-171 name=__codelineno-0-171 href=#__codelineno-0-171></a><span class=w>        </span><span class=no>confluent-hub install --no-prompt jcustenborder/kafka-connect-spooldir:2.0.62</span><span class=w></span>
<a id=__codelineno-0-172 name=__codelineno-0-172 href=#__codelineno-0-172></a><span class=w>        </span><span class=no>#confluent-hub install --no-prompt streamthoughts/kafka-connect-file-pulse:2.4.0</span><span class=w></span>
<a id=__codelineno-0-173 name=__codelineno-0-173 href=#__codelineno-0-173></a><span class=w>        </span><span class=no>#</span><span class=w></span>
<a id=__codelineno-0-174 name=__codelineno-0-174 href=#__codelineno-0-174></a><span class=w>        </span><span class=no>echo &quot;Downloading JDBC driver&quot;</span><span class=w></span>
<a id=__codelineno-0-175 name=__codelineno-0-175 href=#__codelineno-0-175></a><span class=w>        </span><span class=no>cp /data/crate-jdbc-2.6.0.jar /usr/share/confluent-hub-components/confluentinc-kafka-connect-jdbc</span><span class=w></span>
<a id=__codelineno-0-176 name=__codelineno-0-176 href=#__codelineno-0-176></a><span class=w>        </span><span class=no>cd /usr/share/confluent-hub-components/confluentinc-kafka-connect-jdbc</span><span class=w></span>
<a id=__codelineno-0-177 name=__codelineno-0-177 href=#__codelineno-0-177></a><span class=w>        </span><span class=no>#curl https://cdn.mysql.com/Downloads/Connector-J/mysql-connector-java-8.0.19.tar.gz | tar xz</span><span class=w></span>
<a id=__codelineno-0-178 name=__codelineno-0-178 href=#__codelineno-0-178></a><span class=w>        </span><span class=no>wget https://jdbc.postgresql.org/download/postgresql-42.2.14.jar</span><span class=w></span>
<a id=__codelineno-0-179 name=__codelineno-0-179 href=#__codelineno-0-179></a><span class=w>        </span><span class=no>#wget https://repo1.maven.org/maven2/io/crate/crate-jdbc/2.6.0/crate-jdbc-2.6.0.jar -o crate-jdbc-2.6.0.jar</span><span class=w></span>
<a id=__codelineno-0-180 name=__codelineno-0-180 href=#__codelineno-0-180></a><span class=w>        </span><span class=no>#curl -o crate-jdbc-2.6.0.jar https://repo1.maven.org/maven2/io/crate/crate-jdbc/2.6.0/crate-jdbc-2.6.0.jar</span><span class=w></span>
<a id=__codelineno-0-181 name=__codelineno-0-181 href=#__codelineno-0-181></a><span class=w>        </span><span class=no>#</span><span class=w></span>
<a id=__codelineno-0-182 name=__codelineno-0-182 href=#__codelineno-0-182></a><span class=w>        </span><span class=no>echo &quot;Launching Kafka Connect worker&quot;</span><span class=w></span>
<a id=__codelineno-0-183 name=__codelineno-0-183 href=#__codelineno-0-183></a><span class=w>        </span><span class=no>/etc/confluent/docker/run &amp;</span><span class=w></span>
<a id=__codelineno-0-184 name=__codelineno-0-184 href=#__codelineno-0-184></a><span class=w>        </span><span class=no>#</span><span class=w></span>
<a id=__codelineno-0-185 name=__codelineno-0-185 href=#__codelineno-0-185></a><span class=w>        </span><span class=no>sleep infinity</span><span class=w></span>
<a id=__codelineno-0-186 name=__codelineno-0-186 href=#__codelineno-0-186></a>
<a id=__codelineno-0-187 name=__codelineno-0-187 href=#__codelineno-0-187></a><span class=w>  </span><span class=nt>control-center</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-188 name=__codelineno-0-188 href=#__codelineno-0-188></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">confluentinc/cp-enterprise-control-center:7.0.0</span><span class=w> </span><span class=c1># (14)!</span><span class=w></span>
<a id=__codelineno-0-189 name=__codelineno-0-189 href=#__codelineno-0-189></a><span class=w>    </span><span class=nt>hostname</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">control-center</span><span class=w></span>
<a id=__codelineno-0-190 name=__codelineno-0-190 href=#__codelineno-0-190></a><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">control-center</span><span class=w></span>
<a id=__codelineno-0-191 name=__codelineno-0-191 href=#__codelineno-0-191></a><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-192 name=__codelineno-0-192 href=#__codelineno-0-192></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">broker</span><span class=w></span>
<a id=__codelineno-0-193 name=__codelineno-0-193 href=#__codelineno-0-193></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">schema-registry</span><span class=w></span>
<a id=__codelineno-0-194 name=__codelineno-0-194 href=#__codelineno-0-194></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">connect</span><span class=w></span>
<a id=__codelineno-0-195 name=__codelineno-0-195 href=#__codelineno-0-195></a><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-196 name=__codelineno-0-196 href=#__codelineno-0-196></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">9021:9021</span><span class=w></span>
<a id=__codelineno-0-197 name=__codelineno-0-197 href=#__codelineno-0-197></a><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-198 name=__codelineno-0-198 href=#__codelineno-0-198></a><span class=w>      </span><span class=nt>CONTROL_CENTER_BOOTSTRAP_SERVERS</span><span class=p>:</span><span class=w> </span><span class=s>&#39;broker:29092&#39;</span><span class=w></span>
<a id=__codelineno-0-199 name=__codelineno-0-199 href=#__codelineno-0-199></a><span class=w>      </span><span class=nt>CONTROL_CENTER_ZOOKEEPER_CONNECT</span><span class=p>:</span><span class=w> </span><span class=s>&#39;zookeeper:2181&#39;</span><span class=w></span>
<a id=__codelineno-0-200 name=__codelineno-0-200 href=#__codelineno-0-200></a><span class=w>      </span><span class=nt>CONTROL_CENTER_CONNECT_CONNECT-DEFAULT_CLUSTER</span><span class=p>:</span><span class=w> </span><span class=s>&#39;connect:8083&#39;</span><span class=w></span>
<a id=__codelineno-0-201 name=__codelineno-0-201 href=#__codelineno-0-201></a><span class=w>      </span><span class=nt>CONTROL_CENTER_SCHEMA_REGISTRY_URL</span><span class=p>:</span><span class=w> </span><span class=s>&quot;http://schema-registry:8081&quot;</span><span class=w></span>
<a id=__codelineno-0-202 name=__codelineno-0-202 href=#__codelineno-0-202></a><span class=w>      </span><span class=nt>CONFLUENT_METRICS_TOPIC_REPLICATION</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-203 name=__codelineno-0-203 href=#__codelineno-0-203></a><span class=w>      </span><span class=nt>CONTROL_CENTER_REPLICATION_FACTOR</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-204 name=__codelineno-0-204 href=#__codelineno-0-204></a><span class=w>      </span><span class=nt>CONTROL_CENTER_COMMAND_TOPIC_REPLICATION</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-205 name=__codelineno-0-205 href=#__codelineno-0-205></a><span class=w>      </span><span class=nt>CONTROL_CENTER_MONITORING_INTERCEPTOR_TOPIC_REPLICATION</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-206 name=__codelineno-0-206 href=#__codelineno-0-206></a><span class=w>      </span><span class=nt>CONTROL_CENTER_INTERNAL_TOPICS_PARTITIONS</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-207 name=__codelineno-0-207 href=#__codelineno-0-207></a><span class=w>      </span><span class=nt>CONTROL_CENTER_INTERNAL_TOPICS_REPLICATION</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-208 name=__codelineno-0-208 href=#__codelineno-0-208></a><span class=w>      </span><span class=nt>CONTROL_CENTER_MONITORING_INTERCEPTOR_TOPIC_PARTITIONS</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-209 name=__codelineno-0-209 href=#__codelineno-0-209></a><span class=w>      </span><span class=nt>CONTROL_CENTER_STREAMS_NUM_STREAM_THREADS</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<a id=__codelineno-0-210 name=__codelineno-0-210 href=#__codelineno-0-210></a><span class=w>      </span><span class=nt>CONTROL_CENTER_STREAMS_CACHE_MAX_BYTES_BUFFERING</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">104857600</span><span class=w></span>
<a id=__codelineno-0-211 name=__codelineno-0-211 href=#__codelineno-0-211></a><span class=w>      </span><span class=nt>PORT</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">9021</span><span class=w></span>
<a id=__codelineno-0-212 name=__codelineno-0-212 href=#__codelineno-0-212></a>
<a id=__codelineno-0-213 name=__codelineno-0-213 href=#__codelineno-0-213></a><span class=w>  </span><span class=c1>#Jupyterlab</span><span class=w></span>
<a id=__codelineno-0-214 name=__codelineno-0-214 href=#__codelineno-0-214></a><span class=w>  </span><span class=nt>jupyterlab</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-215 name=__codelineno-0-215 href=#__codelineno-0-215></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cande/jupyterlab:latest</span><span class=w> </span><span class=c1># (15)!</span><span class=w></span>
<a id=__codelineno-0-216 name=__codelineno-0-216 href=#__codelineno-0-216></a><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">jupyterlab</span><span class=w></span>
<a id=__codelineno-0-217 name=__codelineno-0-217 href=#__codelineno-0-217></a><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-218 name=__codelineno-0-218 href=#__codelineno-0-218></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">./notebooks:/notebooks</span><span class=w></span>
<a id=__codelineno-0-219 name=__codelineno-0-219 href=#__codelineno-0-219></a><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-220 name=__codelineno-0-220 href=#__codelineno-0-220></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10000:8888</span><span class=w></span>
<a id=__codelineno-0-221 name=__codelineno-0-221 href=#__codelineno-0-221></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">4040:4040</span><span class=w></span>
<a id=__codelineno-0-222 name=__codelineno-0-222 href=#__codelineno-0-222></a><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-223 name=__codelineno-0-223 href=#__codelineno-0-223></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">JUPYTER_ENABLE_LAB=1</span><span class=w></span>
<a id=__codelineno-0-224 name=__codelineno-0-224 href=#__codelineno-0-224></a><span class=w>      </span><span class=c1>#- GRANT_SUDO=yes</span><span class=w></span>
<a id=__codelineno-0-225 name=__codelineno-0-225 href=#__codelineno-0-225></a><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">start-notebook.sh --NotebookApp.notebook_dir=/notebooks</span><span class=w></span>
<a id=__codelineno-0-226 name=__codelineno-0-226 href=#__codelineno-0-226></a>
<a id=__codelineno-0-227 name=__codelineno-0-227 href=#__codelineno-0-227></a><span class=w>  </span><span class=nt>networks</span><span class=p>:</span><span class=w> </span><span class=c1># (16)!</span><span class=w></span>
<a id=__codelineno-0-228 name=__codelineno-0-228 href=#__codelineno-0-228></a><span class=w>    </span><span class=nt>default</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-229 name=__codelineno-0-229 href=#__codelineno-0-229></a><span class=w>      </span><span class=nt>external</span><span class=p>:</span><span class=w></span>
<a id=__codelineno-0-230 name=__codelineno-0-230 href=#__codelineno-0-230></a><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cratenet</span><span class=w></span>
</code></pre></div> <ol> <li> <p>Same CrateDB version. </p> </li> <li> <p>CrateDB directory to store data in the machine.</p> </li> <li> <p>Enviornment variable to control the Java heap for data retrieval.</p> </li> <li> <p>Same CrateDB version. </p> </li> <li> <p>CrateDB directory to store data in the machine.</p> </li> <li> <p>Enviornment variable to control the Java heap for data retrieval.</p> </li> <li> <p>Same CrateDB version. </p> </li> <li> <p>CrateDB directory to store data in the machine.</p> </li> <li> <p>Enviornment variable to control the Java heap for data retrieval.</p> </li> <li> <p>Same Confluent version. </p> </li> <li> <p>Same Confluent version. </p> </li> <li> <p>Same Confluent version. </p> </li> <li> <p>Same Confluent version. </p> </li> <li> <p>Same Confluent version. </p> </li> <li> <p>You can keep updating the image with your own libraries and create one of your own to use instead of this one.</p> </li> <li> <p>All the services need to be in the same network previosly created to be able to communicate.</p> </li> </ol> <h3 id=to-deploy-apis-and-custom-visualizations>To deploy APIs and Custom Visualizations<a class=headerlink href=#to-deploy-apis-and-custom-visualizations title="Permanent link">&para;</a></h3> <p>Using the github repo: Locate yourself in the root directory of each of the repo (<a href=https://github.com/cande1gut/apis>APIs</a> and <a href=https://github.com/cande1gut/cecn-visualizations>Visualizations</a>) where a 'docker-compose.yaml' file is present and run the below instruction under the command prompt.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>docker-compose up -d
</code></pre></div> <h2 id=create-environment>Create Environment<a class=headerlink href=#create-environment title="Permanent link">&para;</a></h2> <p>SoDa-TAP requires for <a href=https://www.vagrantup.com/ >Vagrant</a> and <a href=https://www.virtualbox.org/ >Virtualbox</a> to be installed beforehand, since they act as provisioners for a virtual environment with all tools, packages and libaries available to work properly.</p> <h3 id=configuring-environment-resources>Configuring Environment Resources<a class=headerlink href=#configuring-environment-resources title="Permanent link">&para;</a></h3> <p>First define how much RAM and how many CPUs you want to assign to your environment in the "Vagrant" file that is at the root of the repository:</p> <figure> <p><img alt="Image title" src=../../assets/images/vagrant.png> </p> <figcaption>Machine Resources</figcaption> </figure> <p>Start the virtual environment with all the services running by typing in a command line:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>vagrant up
</code></pre></div> <p>This will download and install under a virtual machine all the requirements for the project. Once done, you will be able to visit in your browser all the available services' dashboards:</p> <ul> <li>localhost:4200 ➜ CrateDB Dashboard</li> <li>localhost:10000 ➜ Jupyterlab Dashboard</li> <li>localhost:4040/jobs ➜ Spark job list execution (Only works when there are jobs running)</li> <li>localhost:9021 ➜ Kafka Dashboard</li> <li>localhost:81/docs ➜ APIs Documentation</li> </ul> <p>In order to ingest data as CSV files, a set of configurations need to be applied in Kafka before any processing is started. Visit localhost:9021 (Confluent control center):</p> <figure> <p><img alt="Image title" src=../../assets/images/confluent-dashboard.PNG> </p> <figcaption>Confluent Dashboard</figcaption> </figure> <h3 id=topic-creation>Topic Creation<a class=headerlink href=#topic-creation title="Permanent link">&para;</a></h3> <p>You have 2 ways to accomplish the topic creation:</p> <ol> <li>Programatically through the create_topics.py script that is executed during the automatic deployment.</li> <li>Through manual creation. Click at the left bar in "Topics" and at the right click "Add topic":</li> </ol> <figure> <p><img alt="Image title" src=../../assets/images/kafka-topic.png> </p> <figcaption>New Kafka Topic</figcaption> </figure> <p>In the next window, first type a name under "Topic name" and later, click "Create with defaults":</p> <figure> <p><img alt="Image title" src=../../assets/images/kafka-topic2.png> </p> <figcaption>Kafka Topic Configuration</figcaption> </figure> <p>This set of steps have created a new topic for Kafka to transfer all data. In order to start reading tweets, there is already a CSV file to test an end-to-end pipeline but to be able to process it, there needs to be a Kafka connector.</p> <h3 id=kafka-connector-creation>Kafka Connector Creation<a class=headerlink href=#kafka-connector-creation title="Permanent link">&para;</a></h3> <p>You have 2 ways to accomplish the connector creation:</p> <ol> <li>Programatically through the curl command that is executed during the automatic deployment.</li> <li>Through manual creation. Click at the left bar in "Connect" and at the right, click "connect-default":</li> </ol> <figure> <p><img alt="Image title" src=../../assets/images/kafka-connector.png> </p> <figcaption>Kafka Connectors</figcaption> </figure> <p>Click "Add connector":</p> <figure> <p><img alt="Image title" src=../../assets/images/add-connector.png> </p> <figcaption>Add Connector</figcaption> </figure> <p>Next, click "Upload connector config file":</p> <figure> <p><img alt="Image title" src=../../assets/images/kafka-config.png> </p> <figcaption>New Kafka Connector</figcaption> </figure> <p>Select the JSON file that is available at the root of this repository called "connector_csv". Once uploaded, it will populate the necessary fields for the connector with the name of the topic previously created:</p> <figure> <p><img alt="Image title" src=../../assets/images/kafka-config2.PNG> </p> <figcaption>Kafka Connector Configuration</figcaption> </figure> <p>Scroll down to the bottom, click "Next" and later, click "Launch":</p> <figure> <p><img alt="Image title" src=../../assets/images/kafka-config3.png> </p> <figcaption>Kafka Connector JSON</figcaption> </figure> <p>The topic should now have all tweets ingested in the topic. The next step is to start the Spark job to start processing the tweets.</p> <h2 id=testing-the-pipeline>Testing the Pipeline<a class=headerlink href=#testing-the-pipeline title="Permanent link">&para;</a></h2> <p>To enable developers adapt the code accordignly to their needs, there is a JupyterLab container available to restart as many times as wanted to test the spark pipeline <sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup>. In the command line, access to the virtual machine by typing:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>vagrant ssh
</code></pre></div> <p>This will give you access to the virtual machine's environment. Now, type:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>sudo docker <span class=nb>exec</span> -it jupyterlab /bin/bash
</code></pre></div> <p>and then:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>jupyter server list
</code></pre></div> <p>This will show a token that you need to copy:</p> <figure> <p><img alt="Image title" src=../../assets/images/jupyter.png> </p> <figcaption>JupyterLab Token</figcaption> </figure> <p>Visit localhost:10000 (Jupyterlab dashboard) and enter the token:</p> <figure> <p><img alt="Image title" src=../../assets/images/jupyter2.png> </p> <figcaption>JupyterLab Token Input</figcaption> </figure> <p>At the left side you will have a notebook available to make changes to the pipeline, restart, start and test different functionalities for the Spark's pipeline:</p> <figure> <p><img alt="Image title" src=../../assets/images/jupyter3.PNG> </p> <figcaption>JupyterLab Environment</figcaption> </figure> <p>To exit the Jupyterlab container or from the vagrant SSH session, you can type:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=nb>exit</span>
</code></pre></div> <p>In case you need to add new services, packages or libraries to the vagrant environemnt, you can edit the ansible file and later type:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>vagrant provision
</code></pre></div> <p>To install new services or components.</p> <p>In case you need to destroy the instance because of corrupted files or any other permission problems for example, you can do:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>vagrant destroy
</code></pre></div> <p>And the instance will be deleted with all configurations associated.</p> <p>The following is a sequence diagram of how all the services interact when deployed from scratch:</p> <figure> <p><img alt="Image title" src=../../assets/images/sequence-diagram.png> </p> <figcaption>Sequence Diagram of SoDa-TAP</figcaption> </figure> <div class=footnote> <hr> <ol> <li id=fn:1> <p>At the start of the automatic deployment of the environment, the tweets will be already available in the csvTweets topic, ready to be consumed by the spark project in the JupyterLab notebook.&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> </ol> </div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../concept/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Concept" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Concept </div> </div> </a> <a href=../../useCases/ai4buzz/ class="md-footer__link md-footer__link--next" aria-label="Next: AI4Buzz" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> AI4Buzz </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2022 Candelario Gutierrez </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/cande1gut/ target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://twitter.com/cande_gut target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.tooltips", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../assets/javascripts/bundle.c99f48ec.min.js></script> <script src=../../overrides/assets/javascripts/bundle.39654835.min.js></script> </body> </html>