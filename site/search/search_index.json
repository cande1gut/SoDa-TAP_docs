{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"","title":"Home"},{"location":"alternatives/","text":"Alternatives \u00b6 There are tons of static site generators and themes out there and choosing the right one for your tech stack is a tough decision. If you're unsure if Material for MkDocs is the right solution for you, this section should help you evaluate alternative solutions. Docusaurus \u00b6 Docusaurus by Facebook is a very popular documentation generator and a good choice if you or your company are already using React to build your site. It will generate a single page application which is fundamentally different from the site Material for MkDocs generates for you. Advantages Very powerful, customizable and extendable Provides many components that aid in technical writing Large and rich ecosystem, backed by Facebook Challenges High learning curve, JavaScript knowledge mandatory JavaScript ecosystem is very volatile, rather high maintenance More time needed to get up and running While Docusaurus is one of the best choices when it comes to documentation sites that output a single page applications, there are many more solutions, including Docz , Gatsby , Vuepress and Docsify that approach this problem similarily. Jekyll \u00b6 Jekyll is probably one of the most mature and widespread static site generators and is written in Ruby . It is not specifically geared towards technical project documentation and has many themes to choose from, which can be challenging. Advantages Battle-tested, rich ecosystem, many themes to choose from Brings great capabilities for blogging (permalinks, tags, etc.) Generates a SEO-friendly site, similar to Material for MkDocs Challenges Not specifically geared towards technical project documentation Limited Markdown capabilities, not as advanced as Python Markdown More time needed to get up and running Sphinx \u00b6 Sphinx is an alternative static site generator specifically geared towards generating reference documentation, offering powerful capabilities that are lacking in MkDocs. It uses reStructured text , a format similar to Markdown, which some users find harder to use. Advantages Very powerful, customizable and extendable Generates reference documentation from Python docstrings Large and rich ecosystem, used by many Python projects Challenges High learning curve, reStructured text syntax might be challenging Search is less powerful than the one provided by MkDocs More time needed to get up and running If you're considering using Sphinx because you need to generate reference documentation, you should give mkdocstrings a try \u2013 an actively maintained and popular framework building on top of MkDocs, implementing Sphinx-like functionality. GitBook \u00b6 GitBook offers a hosted documentation solution that generates a beautiful and functional site from Markdown files in your GitHub repository. However, it was once Open Source, but turned into a closed source solution some time ago. Advantages Hosted solution, minimal technical knowledge required Custom domains, authentication and other enterprise features Great collaboration features for teams Challenges Closed source, not free for proprietary projects Limited Markdown capabilities, not as advanced as Python Markdown Many Open Source projects moved away from GitBook Many users switched from GitBook to Material for MkDocs, as they want to keep control and ownership of their documentation, favoring an Open Source solution.","title":"Alternatives"},{"location":"alternatives/#alternatives","text":"There are tons of static site generators and themes out there and choosing the right one for your tech stack is a tough decision. If you're unsure if Material for MkDocs is the right solution for you, this section should help you evaluate alternative solutions.","title":"Alternatives"},{"location":"alternatives/#docusaurus","text":"Docusaurus by Facebook is a very popular documentation generator and a good choice if you or your company are already using React to build your site. It will generate a single page application which is fundamentally different from the site Material for MkDocs generates for you. Advantages Very powerful, customizable and extendable Provides many components that aid in technical writing Large and rich ecosystem, backed by Facebook Challenges High learning curve, JavaScript knowledge mandatory JavaScript ecosystem is very volatile, rather high maintenance More time needed to get up and running While Docusaurus is one of the best choices when it comes to documentation sites that output a single page applications, there are many more solutions, including Docz , Gatsby , Vuepress and Docsify that approach this problem similarily.","title":"Docusaurus"},{"location":"alternatives/#jekyll","text":"Jekyll is probably one of the most mature and widespread static site generators and is written in Ruby . It is not specifically geared towards technical project documentation and has many themes to choose from, which can be challenging. Advantages Battle-tested, rich ecosystem, many themes to choose from Brings great capabilities for blogging (permalinks, tags, etc.) Generates a SEO-friendly site, similar to Material for MkDocs Challenges Not specifically geared towards technical project documentation Limited Markdown capabilities, not as advanced as Python Markdown More time needed to get up and running","title":"Jekyll"},{"location":"alternatives/#sphinx","text":"Sphinx is an alternative static site generator specifically geared towards generating reference documentation, offering powerful capabilities that are lacking in MkDocs. It uses reStructured text , a format similar to Markdown, which some users find harder to use. Advantages Very powerful, customizable and extendable Generates reference documentation from Python docstrings Large and rich ecosystem, used by many Python projects Challenges High learning curve, reStructured text syntax might be challenging Search is less powerful than the one provided by MkDocs More time needed to get up and running If you're considering using Sphinx because you need to generate reference documentation, you should give mkdocstrings a try \u2013 an actively maintained and popular framework building on top of MkDocs, implementing Sphinx-like functionality.","title":"Sphinx"},{"location":"alternatives/#gitbook","text":"GitBook offers a hosted documentation solution that generates a beautiful and functional site from Markdown files in your GitHub repository. However, it was once Open Source, but turned into a closed source solution some time ago. Advantages Hosted solution, minimal technical knowledge required Custom domains, authentication and other enterprise features Great collaboration features for teams Challenges Closed source, not free for proprietary projects Limited Markdown capabilities, not as advanced as Python Markdown Many Open Source projects moved away from GitBook Many users switched from GitBook to Material for MkDocs, as they want to keep control and ownership of their documentation, favoring an Open Source solution.","title":"GitBook"},{"location":"browser-support/","text":"Browser support \u00b6 Material for MkDocs goes at great lengths to support the largest possible range of browsers while retaining the simplemost possibilities for customization via modern CSS features like custom properties and mask images . Supported browsers \u00b6 The following table lists all browsers for which Material for MkDocs offers full support, so it can be assumed that all features work without degradation. If you find a feature not to be working in a browser in the supported version range, please open an issue : Browser Version Release date Usage desktop mobile overall Chrome 49+ 03/2016 25.65% 38.33% 63.98% Safari 10+ 09/2016 4.63% 14.96% 19.59% Edge 79+ 01/2020 3.95% n/a 3.95% Firefox 53+ 04/2017 3.40% .30% 3.70% Opera 36+ 03/2016 1.44% .01% 1.45% 92.67% Browser support matrix sourced from caniuse.com . 1 Note that the usage data is based on global browser market share, so it could in fact be entirely different for your target demographic. It's a good idea to check the distribution of browser types and versions among your users. Other browsers \u00b6 Albeit your site might not look as perfect as when viewed with a modern browser, the following older browser versions might work with some additional effort: Firefox 31-52 \u2013 icons will render as little boxes due to missing support for mask images . While this cannot be polyfilled, it might be mitigated by hiding the icons altogether. Edge 16-18 \u2013 the spacing of some elements might be a little off due to missing support for the :is pseudo selector , which can be mitigated with some additional effort. Internet Explorer - no support, mainly due to missing support for custom properties . The last version of Material for MkDocs to support Internet Explorer is 4.6.3 . The data was collected from caniuse.com in January 2022, and is primarily based on browser support for custom properties , mask images and the :is pseudo selector which are not entirely polyfillable. Browsers with a cumulated market share of less than 1% were not considered, but might still be fully or partially supported. \u21a9","title":"Browser support"},{"location":"browser-support/#browser-support","text":"Material for MkDocs goes at great lengths to support the largest possible range of browsers while retaining the simplemost possibilities for customization via modern CSS features like custom properties and mask images .","title":"Browser support"},{"location":"browser-support/#supported-browsers","text":"The following table lists all browsers for which Material for MkDocs offers full support, so it can be assumed that all features work without degradation. If you find a feature not to be working in a browser in the supported version range, please open an issue : Browser Version Release date Usage desktop mobile overall Chrome 49+ 03/2016 25.65% 38.33% 63.98% Safari 10+ 09/2016 4.63% 14.96% 19.59% Edge 79+ 01/2020 3.95% n/a 3.95% Firefox 53+ 04/2017 3.40% .30% 3.70% Opera 36+ 03/2016 1.44% .01% 1.45% 92.67% Browser support matrix sourced from caniuse.com . 1 Note that the usage data is based on global browser market share, so it could in fact be entirely different for your target demographic. It's a good idea to check the distribution of browser types and versions among your users.","title":"Supported browsers"},{"location":"browser-support/#other-browsers","text":"Albeit your site might not look as perfect as when viewed with a modern browser, the following older browser versions might work with some additional effort: Firefox 31-52 \u2013 icons will render as little boxes due to missing support for mask images . While this cannot be polyfilled, it might be mitigated by hiding the icons altogether. Edge 16-18 \u2013 the spacing of some elements might be a little off due to missing support for the :is pseudo selector , which can be mitigated with some additional effort. Internet Explorer - no support, mainly due to missing support for custom properties . The last version of Material for MkDocs to support Internet Explorer is 4.6.3 . The data was collected from caniuse.com in January 2022, and is primarily based on browser support for custom properties , mask images and the :is pseudo selector which are not entirely polyfillable. Browsers with a cumulated market share of less than 1% were not considered, but might still be fully or partially supported. \u21a9","title":"Other browsers"},{"location":"customization/","text":"Customization \u00b6 Project documentation is as diverse as the projects themselves and Material for MkDocs is a great starting point for making it look beautiful. However, as you write your documentation, you may reach a point where small adjustments are necessary to preserve your brand's style. Adding assets \u00b6 MkDocs provides several ways to customize a theme. In order to make a few small tweaks to Material for MkDocs, you can just add CSS and JavaScript files to the docs directory. Additional CSS \u00b6 If you want to tweak some colors or change the spacing of certain elements, you can do this in a separate style sheet. The easiest way is by creating a new style sheet file in the docs directory: . \u251c\u2500 docs/ \u2502 \u2514\u2500 stylesheets/ \u2502 \u2514\u2500 extra.css \u2514\u2500 mkdocs.yml Then, add the following lines to mkdocs.yml : extra_css : - stylesheets/extra.css Additional JavaScript \u00b6 If you want to integrate another syntax highlighter or add some custom logic to your theme, create a new JavaScript file in the docs directory: . \u251c\u2500 docs/ \u2502 \u2514\u2500 javascripts/ \u2502 \u2514\u2500 extra.js \u2514\u2500 mkdocs.yml Then, add the following lines to mkdocs.yml : extra_javascript : - javascripts/extra.js Extending the theme \u00b6 If you want to alter the HTML source (e.g. add or remove some parts), you can extend the theme. MkDocs supports theme extension , an easy way to override parts of Material for MkDocs without forking from git. This ensures that you can update to the latest version more easily. Setup and theme structure \u00b6 Enable Material for MkDocs as usual in mkdocs.yml , and create a new folder for overrides which you then reference using the custom_dir setting: theme : name : material custom_dir : overrides Theme extension prerequisites As the custom_dir setting is used for the theme extension process, Material for MkDocs needs to be installed via pip and referenced with the name setting in mkdocs.yml . It will not work when cloning from git . The structure in the overrides directory must mirror the directory structure of the original theme, as any file in the overrides directory will replace the file with the same name which is part of the original theme. Besides, further assets may also be put in the overrides directory: . \u251c\u2500 .icons/ # Bundled icon sets \u251c\u2500 assets/ \u2502 \u251c\u2500 images/ # Images and icons \u2502 \u251c\u2500 javascripts/ # JavaScript files \u2502 \u2514\u2500 stylesheets/ # Style sheets \u251c\u2500 partials/ \u2502 \u251c\u2500 integrations/ # Third-party integrations \u2502 \u2502 \u251c\u2500 analytics/ # Analytics integrations \u2502 \u2502 \u2514\u2500 analytics.html # Analytics setup \u2502 \u251c\u2500 languages/ # Translation languages \u2502 \u251c\u2500 content.html # Page content \u2502 \u251c\u2500 copyright.html # Copyright and theme information \u2502 \u251c\u2500 footer.html # Footer bar \u2502 \u251c\u2500 header.html # Header bar \u2502 \u251c\u2500 language.html # Translation setup \u2502 \u251c\u2500 logo.html # Logo in header and sidebar \u2502 \u251c\u2500 nav.html # Main navigation \u2502 \u251c\u2500 nav-item.html # Main navigation item \u2502 \u251c\u2500 palette.html # Color palette \u2502 \u251c\u2500 search.html # Search interface \u2502 \u251c\u2500 social.html # Social links \u2502 \u251c\u2500 source.html # Repository information \u2502 \u251c\u2500 source-file.html # Source file information \u2502 \u251c\u2500 tabs.html # Tabs navigation \u2502 \u251c\u2500 tabs-item.html # Tabs navigation item \u2502 \u251c\u2500 toc.html # Table of contents \u2502 \u2514\u2500 toc-item.html # Table of contents item \u251c\u2500 404 .html # 404 error page \u251c\u2500 base.html # Base template \u2514\u2500 main.html # Default page Overriding partials \u00b6 In order to override a partial, we can replace it with a file of the same name and location in the overrides directory. For example, to replace the original footer.html partial, create a new footer.html partial in the overrides directory: . \u251c\u2500 overrides/ \u2502 \u2514\u2500 partials/ \u2502 \u2514\u2500 footer.html \u2514\u2500 mkdocs.yml MkDocs will now use the new partial when rendering the theme. This can be done with any file. Overriding blocks recommended \u00b6 Besides overriding partials, it's also possible to override (and extend) template blocks, which are defined inside the templates and wrap specific features. In order to set up block overrides, create a main.html file inside the overrides directory: . \u251c\u2500 overrides/ \u2502 \u2514\u2500 main.html \u2514\u2500 mkdocs.yml Then, e.g. to override the site title, add the following lines to main.html : {% extends \"base.html\" %} {% block htmltitle %} < title > Lorem ipsum dolor sit amet </ title > {% endblock %} The following template blocks are provided by the theme: Block name Purpose analytics Wraps the Google Analytics integration announce Wraps the announcement bar config Wraps the JavaScript application config content Wraps the main content extrahead Empty block to add custom meta tags fonts Wraps the font definitions footer Wraps the footer with navigation and copyright header Wraps the fixed header bar hero Wraps the hero teaser (if available) htmltitle Wraps the <title> tag libs Wraps the JavaScript libraries (header) outdated Wraps the version warning scripts Wraps the JavaScript application (footer) site_meta Wraps the meta tags in the document head site_nav Wraps the site navigation and table of contents styles Wraps the style sheets (also extra sources) tabs Wraps the tabs navigation (if available) Theme development \u00b6 Material for MkDocs is built on top of TypeScript , RxJS and SASS , and uses a lean, custom build process to put everything together. 1 If you want to make more fundamental changes, it may be necessary to make the adjustments directly in the source of the theme and recompile it. Environment setup \u00b6 In order to start development on Material for MkDocs, a Node.js version of at least 14 is required. First, clone the repository: git clone https://github.com/squidfunk/mkdocs-material Next, all dependencies need to be installed, which is done with: cd mkdocs-material pip install -e . pip install mkdocs-minify-plugin pip install mkdocs-redirects npm install Development mode \u00b6 Start the watcher with: npm start Then, in a second terminal window, start the MkDocs live preview server with: mkdocs serve --watch-theme Point your browser to localhost:8000 and you should see this very documentation in front of you. Automatically generated files Never make any changes in the material directory, as the contents of this directory are automatically generated from the src directory and will be overwritten when the theme is built. Building the theme \u00b6 When you're finished making your changes, you can build the theme by invoking: npm run build # (1)! While this command will build all theme files, it will skip the overrides used in Material for MkDocs' own documentation which are not distributed with the theme. If you forked the theme and want to build the overrides as well, use: npm run build:all This will take longer, as now the icon search index, schema files, as well as additional style sheet and JavaScript files are built. This triggers the production-level compilation and minification of all style sheets and JavaScript files. After the command exits, the compiled files are located in the material directory. When running mkdocs build , you should now see your changes to the original theme. Prior to 7.0.0 the build was based on Webpack, resulting in occasional broken builds due to incompatibilities with loaders and plugins. Therefore, we decided to swap Webpack for a leaner solution which is now based on RxJS as the application itself. This allowed for the pruning of more than 500 dependencies (~30% less). \u21a9","title":"Customization"},{"location":"customization/#customization","text":"Project documentation is as diverse as the projects themselves and Material for MkDocs is a great starting point for making it look beautiful. However, as you write your documentation, you may reach a point where small adjustments are necessary to preserve your brand's style.","title":"Customization"},{"location":"customization/#adding-assets","text":"MkDocs provides several ways to customize a theme. In order to make a few small tweaks to Material for MkDocs, you can just add CSS and JavaScript files to the docs directory.","title":"Adding assets"},{"location":"customization/#additional-css","text":"If you want to tweak some colors or change the spacing of certain elements, you can do this in a separate style sheet. The easiest way is by creating a new style sheet file in the docs directory: . \u251c\u2500 docs/ \u2502 \u2514\u2500 stylesheets/ \u2502 \u2514\u2500 extra.css \u2514\u2500 mkdocs.yml Then, add the following lines to mkdocs.yml : extra_css : - stylesheets/extra.css","title":"Additional CSS"},{"location":"customization/#additional-javascript","text":"If you want to integrate another syntax highlighter or add some custom logic to your theme, create a new JavaScript file in the docs directory: . \u251c\u2500 docs/ \u2502 \u2514\u2500 javascripts/ \u2502 \u2514\u2500 extra.js \u2514\u2500 mkdocs.yml Then, add the following lines to mkdocs.yml : extra_javascript : - javascripts/extra.js","title":"Additional JavaScript"},{"location":"customization/#extending-the-theme","text":"If you want to alter the HTML source (e.g. add or remove some parts), you can extend the theme. MkDocs supports theme extension , an easy way to override parts of Material for MkDocs without forking from git. This ensures that you can update to the latest version more easily.","title":"Extending the theme"},{"location":"customization/#setup-and-theme-structure","text":"Enable Material for MkDocs as usual in mkdocs.yml , and create a new folder for overrides which you then reference using the custom_dir setting: theme : name : material custom_dir : overrides Theme extension prerequisites As the custom_dir setting is used for the theme extension process, Material for MkDocs needs to be installed via pip and referenced with the name setting in mkdocs.yml . It will not work when cloning from git . The structure in the overrides directory must mirror the directory structure of the original theme, as any file in the overrides directory will replace the file with the same name which is part of the original theme. Besides, further assets may also be put in the overrides directory: . \u251c\u2500 .icons/ # Bundled icon sets \u251c\u2500 assets/ \u2502 \u251c\u2500 images/ # Images and icons \u2502 \u251c\u2500 javascripts/ # JavaScript files \u2502 \u2514\u2500 stylesheets/ # Style sheets \u251c\u2500 partials/ \u2502 \u251c\u2500 integrations/ # Third-party integrations \u2502 \u2502 \u251c\u2500 analytics/ # Analytics integrations \u2502 \u2502 \u2514\u2500 analytics.html # Analytics setup \u2502 \u251c\u2500 languages/ # Translation languages \u2502 \u251c\u2500 content.html # Page content \u2502 \u251c\u2500 copyright.html # Copyright and theme information \u2502 \u251c\u2500 footer.html # Footer bar \u2502 \u251c\u2500 header.html # Header bar \u2502 \u251c\u2500 language.html # Translation setup \u2502 \u251c\u2500 logo.html # Logo in header and sidebar \u2502 \u251c\u2500 nav.html # Main navigation \u2502 \u251c\u2500 nav-item.html # Main navigation item \u2502 \u251c\u2500 palette.html # Color palette \u2502 \u251c\u2500 search.html # Search interface \u2502 \u251c\u2500 social.html # Social links \u2502 \u251c\u2500 source.html # Repository information \u2502 \u251c\u2500 source-file.html # Source file information \u2502 \u251c\u2500 tabs.html # Tabs navigation \u2502 \u251c\u2500 tabs-item.html # Tabs navigation item \u2502 \u251c\u2500 toc.html # Table of contents \u2502 \u2514\u2500 toc-item.html # Table of contents item \u251c\u2500 404 .html # 404 error page \u251c\u2500 base.html # Base template \u2514\u2500 main.html # Default page","title":"Setup and theme structure"},{"location":"customization/#overriding-partials","text":"In order to override a partial, we can replace it with a file of the same name and location in the overrides directory. For example, to replace the original footer.html partial, create a new footer.html partial in the overrides directory: . \u251c\u2500 overrides/ \u2502 \u2514\u2500 partials/ \u2502 \u2514\u2500 footer.html \u2514\u2500 mkdocs.yml MkDocs will now use the new partial when rendering the theme. This can be done with any file.","title":"Overriding partials"},{"location":"customization/#overriding-blocks","text":"Besides overriding partials, it's also possible to override (and extend) template blocks, which are defined inside the templates and wrap specific features. In order to set up block overrides, create a main.html file inside the overrides directory: . \u251c\u2500 overrides/ \u2502 \u2514\u2500 main.html \u2514\u2500 mkdocs.yml Then, e.g. to override the site title, add the following lines to main.html : {% extends \"base.html\" %} {% block htmltitle %} < title > Lorem ipsum dolor sit amet </ title > {% endblock %} The following template blocks are provided by the theme: Block name Purpose analytics Wraps the Google Analytics integration announce Wraps the announcement bar config Wraps the JavaScript application config content Wraps the main content extrahead Empty block to add custom meta tags fonts Wraps the font definitions footer Wraps the footer with navigation and copyright header Wraps the fixed header bar hero Wraps the hero teaser (if available) htmltitle Wraps the <title> tag libs Wraps the JavaScript libraries (header) outdated Wraps the version warning scripts Wraps the JavaScript application (footer) site_meta Wraps the meta tags in the document head site_nav Wraps the site navigation and table of contents styles Wraps the style sheets (also extra sources) tabs Wraps the tabs navigation (if available)","title":"Overriding blocks"},{"location":"customization/#theme-development","text":"Material for MkDocs is built on top of TypeScript , RxJS and SASS , and uses a lean, custom build process to put everything together. 1 If you want to make more fundamental changes, it may be necessary to make the adjustments directly in the source of the theme and recompile it.","title":"Theme development"},{"location":"customization/#environment-setup","text":"In order to start development on Material for MkDocs, a Node.js version of at least 14 is required. First, clone the repository: git clone https://github.com/squidfunk/mkdocs-material Next, all dependencies need to be installed, which is done with: cd mkdocs-material pip install -e . pip install mkdocs-minify-plugin pip install mkdocs-redirects npm install","title":"Environment setup"},{"location":"customization/#development-mode","text":"Start the watcher with: npm start Then, in a second terminal window, start the MkDocs live preview server with: mkdocs serve --watch-theme Point your browser to localhost:8000 and you should see this very documentation in front of you. Automatically generated files Never make any changes in the material directory, as the contents of this directory are automatically generated from the src directory and will be overwritten when the theme is built.","title":"Development mode"},{"location":"customization/#building-the-theme","text":"When you're finished making your changes, you can build the theme by invoking: npm run build # (1)! While this command will build all theme files, it will skip the overrides used in Material for MkDocs' own documentation which are not distributed with the theme. If you forked the theme and want to build the overrides as well, use: npm run build:all This will take longer, as now the icon search index, schema files, as well as additional style sheet and JavaScript files are built. This triggers the production-level compilation and minification of all style sheets and JavaScript files. After the command exits, the compiled files are located in the material directory. When running mkdocs build , you should now see your changes to the original theme. Prior to 7.0.0 the build was based on Webpack, resulting in occasional broken builds due to incompatibilities with loaders and plugins. Therefore, we decided to swap Webpack for a leaner solution which is now based on RxJS as the application itself. This allowed for the pruning of more than 500 dependencies (~30% less). \u21a9","title":"Building the theme"},{"location":"license/","text":"License \u00b6 MIT License Copyright \u00a9 2016-2022 Martin Donath Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"License"},{"location":"license/#license","text":"MIT License Copyright \u00a9 2016-2022 Martin Donath Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"License"},{"location":"philosophy/","text":"Philosophy \u00b6 Before settling for Material for MkDocs, it's a good idea to understand the philosophy behind the project, in order to make sure it aligns with your goals. This page explains the design principles anchored in Material for MkDocs, and discusses the conventions used in this documentation. Design principles \u00b6 It's just Markdown : Focus on the content of your documentation and create a professional static site in minutes. No need to know HTML,CSS or JavaScript \u2013 let Material for MkDocs do the heavy lifting for you. Works on all devices : Serve your documentation with confidence \u2013 the underling layout automatically adapts to perfectly fit the available screen estate, no matter the type or size of the viewing device. Made to measure : Change the colors, fonts, language, icons, logo and much more with a few lines of configuration. Material for MkDocs can be easily extended and provides tons of options to alter appearance and behavior. Fast and lightweight : Don't let your users wait \u2013 get incredible value with a small footprint, by using one of the fastest themes around with excellent performance, yielding great search engine rankings and happy users that return. Accessible : Make accessibility a priority \u2013 users can navigate your documentation with touch devices, keyboard, and screen readers. Semantic markup ensures that your documentation works for everyone. Open Source : Trust 10,000+ users \u2013 choose a mature and well-funded solution built with state-of-the-art Open Source technologies. Keep ownership of your content without fear of vendor lock-in. Licensed under MIT. Conventions \u00b6 Symbols \u00b6 This documentation use some symbols for illustration purposes. Before you read on, please make sure you've made yourself familiar with the following list of conventions: Insiders Some features are not yet available in the community edition, but only as part of the Insiders build of Material for MkDocs. Please consult the Insiders guide to learn how to get access. {x.x.x} The tag icon in conjunction with a version number denotes when a specific feature or behavior was added. Make sure you're at least on this version if you want to use it. {file.ext} The source file icon together with a file name is sometimes used in code examples which span multiple files. The file name (or path) always starts from the location of mkdocs.yml . Default : value Some properties in mkdocs.yml have default values for when the author does not explicitly define them. The default value of the property is always included. Feature flag Most of the features are hidden behind feature flags, which means they must be explicitly enabled via mkdocs.yml . This allows for the existence of potentially orthogonal features. Experimental Some newer features are still considered experimental, which means they might (although rarely) change at any time, including their complete removal (which hasn't happened yet). Plugin Several features are implemented through MkDocs excellent plugin architecture, some of which are built-in and distributed with Material for MkDocs, so no installation is required. Utility Besides plugins, there are some utilities that build on top of MkDocs in order to provide extended functionality, like for example support for versioning.","title":"Philosophy"},{"location":"philosophy/#philosophy","text":"Before settling for Material for MkDocs, it's a good idea to understand the philosophy behind the project, in order to make sure it aligns with your goals. This page explains the design principles anchored in Material for MkDocs, and discusses the conventions used in this documentation.","title":"Philosophy"},{"location":"philosophy/#design-principles","text":"It's just Markdown : Focus on the content of your documentation and create a professional static site in minutes. No need to know HTML,CSS or JavaScript \u2013 let Material for MkDocs do the heavy lifting for you. Works on all devices : Serve your documentation with confidence \u2013 the underling layout automatically adapts to perfectly fit the available screen estate, no matter the type or size of the viewing device. Made to measure : Change the colors, fonts, language, icons, logo and much more with a few lines of configuration. Material for MkDocs can be easily extended and provides tons of options to alter appearance and behavior. Fast and lightweight : Don't let your users wait \u2013 get incredible value with a small footprint, by using one of the fastest themes around with excellent performance, yielding great search engine rankings and happy users that return. Accessible : Make accessibility a priority \u2013 users can navigate your documentation with touch devices, keyboard, and screen readers. Semantic markup ensures that your documentation works for everyone. Open Source : Trust 10,000+ users \u2013 choose a mature and well-funded solution built with state-of-the-art Open Source technologies. Keep ownership of your content without fear of vendor lock-in. Licensed under MIT.","title":"Design principles"},{"location":"philosophy/#conventions","text":"","title":"Conventions"},{"location":"philosophy/#symbols","text":"This documentation use some symbols for illustration purposes. Before you read on, please make sure you've made yourself familiar with the following list of conventions: Insiders Some features are not yet available in the community edition, but only as part of the Insiders build of Material for MkDocs. Please consult the Insiders guide to learn how to get access. {x.x.x} The tag icon in conjunction with a version number denotes when a specific feature or behavior was added. Make sure you're at least on this version if you want to use it. {file.ext} The source file icon together with a file name is sometimes used in code examples which span multiple files. The file name (or path) always starts from the location of mkdocs.yml . Default : value Some properties in mkdocs.yml have default values for when the author does not explicitly define them. The default value of the property is always included. Feature flag Most of the features are hidden behind feature flags, which means they must be explicitly enabled via mkdocs.yml . This allows for the existence of potentially orthogonal features. Experimental Some newer features are still considered experimental, which means they might (although rarely) change at any time, including their complete removal (which hasn't happened yet). Plugin Several features are implemented through MkDocs excellent plugin architecture, some of which are built-in and distributed with Material for MkDocs, so no installation is required. Utility Besides plugins, there are some utilities that build on top of MkDocs in order to provide extended functionality, like for example support for versioning.","title":"Symbols"},{"location":"upgrade/","text":"How to upgrade \u00b6 Upgrade to the latest version with: pip install --upgrade mkdocs-material Show the currently installed version with: pip show mkdocs-material Upgrading from 7.x to 8.x \u00b6 What's new? \u00b6 Added support for code annotations Added support for anchor tracking Added support for version warning Added copyright partial for easier override Removed deprecated content tabs legacy implementation Removed deprecated seealso admonition type Removed deprecated site_keywords setting (unsupported by MkDocs) Removed deprecated prebuilt search index support Removed deprecated web app manifest \u2013 use customization Removed extracopyright variable \u2013 use new copyright partial Removed Disqus integation \u2013 use customization Switched to :is() selectors for simple selector lists Switched autoprefixer from last 4 years to last 2 years Improved CSS overall to match modern standards Improved CSS variable semantics for fonts Improved extensibility by restructuring partials Improved handling of details when printing Improved keyboard navigation for footnotes Fixed #3214 : Search highlighting breaks site when empty Changes to mkdocs.yml \u00b6 pymdownx.tabbed \u00b6 Support for the legacy style of the Tabbed extension was dropped in favor of the new, alternate implementation which has better behavior on mobile viewports : 8.x 7.x markdown_extensions : - pymdownx.tabbed : alternate_style : true markdown_extensions : - pymdownx.tabbed pymdownx.superfences \u00b6 The *-experimental suffix must be removed from the custom fence class property, which is used to target code blocks to be rendered as diagrams using Mermaid.js : 8.x 7.x markdown_extensions : - pymdownx.superfences : custom_fences : - name : mermaid class : mermaid format : !!python/name:pymdownx.superfences.fence_code_format markdown_extensions : - pymdownx.superfences : custom_fences : - name : mermaid class : mermaid-experimental format : !!python/name:pymdownx.superfences.fence_code_format google_analytics \u00b6 This option was deprecated in MkDocs 1.2.0 , as the implementation of a JavaScript-based analytics integration is the responsibility of a theme. The following lines must be changed: 8.x 7.x extra : analytics : provider : google property : UA-XXXXXXXX-X google_analytics : - UA-XXXXXXXX-X - auto Changes to *.html files \u00b6 The templates have undergone a set of changes to make them future-proof. If you've used theme extension to override a block or template, make sure that it matches the new structure: If you've overridden a block , check base.html for potential changes If you've overridden a template , check the respective *.html file for potential changes base.html partials/copyright.html partials/footer.html partials/social.html @@ -13,11 +13,6 @@ {% elif config.site_description %} <meta name=\"description\" content=\"{{ config.site_description }}\"> {% endif %} - {% if page and page.meta and page.meta.keywords %} - <meta name=\"keywords\" content=\"{{ page.meta.keywords }}\"> - {% elif config.site_keywords %} - <meta name=\"keywords\" content=\"{{ config.site_keywords }}\"> - {% endif %} {% if page and page.meta and page.meta.author %} <meta name=\"author\" content=\"{{ page.meta.author }}\"> {% elif config.site_author %} @@ -61,15 +56,13 @@ font.text | replace(' ', '+') + ':300,400,400i,700%7C' + font.code | replace(' ', '+') }}&display=fallback\"> - <style>:root{--md-text-font-family:\"{{ font.text }}\";--md-code-font-family:\"{{ font.code }}\"}</style> + <style>:root{--md-text-font:\"{{ font.text }}\";--md-code-font:\"{{ font.code }}\"}</style> {% endif %} {% endblock %} - {% if config.extra.manifest %} - <link rel=\"manifest\" href=\"{{ config.extra.manifest | url }}\" crossorigin=\"use-credentials\"> - {% endif %} {% for path in config[\"extra_css\"] %} <link rel=\"stylesheet\" href=\"{{ path | url }}\"> {% endfor %} + {% include \"partials/javascripts/base.html\" %} {% block analytics %} {% include \"partials/integrations/analytics.html\" %} {% endblock %} @@ -89,7 +82,6 @@ <body dir=\"{{ direction }}\"> {% endif %} {% set features = config.theme.features or [] %} - {% include \"partials/javascripts/base.html\" %} {% if not config.theme.palette is mapping %} {% include \"partials/javascripts/palette.html\" %} {% endif %} @@ -106,13 +98,25 @@ </div> <div data-md-component=\"announce\"> {% if self.announce() %} - <aside class=\"md-banner md-announce\"> - <div class=\"md-banner__inner md-announce__inner md-grid md-typeset\"> + <aside class=\"md-banner\"> + <div class=\"md-banner__inner md-grid md-typeset\"> {% block announce %}{% endblock %} </div> </aside> {% endif %} </div> + {% if config.extra.version %} + <div data-md-component=\"outdated\" hidden> + <aside class=\"md-banner md-banner--warning\"> + {% if self.outdated() %} + <div class=\"md-banner__inner md-grid md-typeset\"> + {% block outdated %}{% endblock %} + </div> + {% include \"partials/javascripts/outdated.html\" %} + {% endif %} + </aside> + </div> + {% endif %} {% block header %} {% include \"partials/header.html\" %} {% endblock %} @@ -156,25 +160,7 @@ <div class=\"md-content\" data-md-component=\"content\"> <article class=\"md-content__inner md-typeset\"> {% block content %} - {% if page.edit_url %} - <a href=\"{{ page.edit_url }}\" title=\"{{ lang.t('edit.link.title') }}\" class=\"md-content__button md-icon\"> - {% include \".icons/material/pencil.svg\" %} - </a> - {% endif %} - {% if not \"\\x3ch1\" in page.content %} - <h1>{{ page.title | d(config.site_name, true)}}</h1> - {% endif %} - {{ page.content }} - {% if page and page.meta %} - {% if page.meta.git_revision_date_localized or - page.meta.revision_date - %} - {% include \"partials/source-file.html\" %} - {% endif %} - {% endif %} - {% endblock %} - {% block disqus %} - {% include \"partials/integrations/disqus.html\" %} + {% include \"partials/content.html\" %} {% endblock %} </article> </div> @@ -38,13 +38,6 @@ <meta name=\"description\" content=\"{{ config.site_description }}\" /> {% endif %} - <!-- Page keywords --> - {% if page and page.meta and page.meta.keywords %} - <meta name=\"keywords\" content=\"{{ page.meta.keywords }}\" /> - {% elif config.site_keywords %} - <meta name=\"keywords\" content=\"{{ config.site_keywords }}\" /> - {% endif %} - <!-- Page author --> {% if page and page.meta and page.meta.author %} <meta name=\"author\" content=\"{{ page.meta.author }}\" /> @@ -120,27 +113,21 @@ /> <style> :root { - --md-text-font-family: \"{{ font.text }}\"; - --md-code-font-family: \"{{ font.code }}\"; + --md-text-font: \"{{ font.text }}\"; + --md-code-font: \"{{ font.code }}\"; } </style> {% endif %} {% endblock %} - <!-- Progressive Web App Manifest --> - {% if config.extra.manifest %} - <link - rel=\"manifest\" - href=\"{{ config.extra.manifest | url }}\" - crossorigin=\"use-credentials\" - /> - {% endif %} - <!-- Custom style sheets --> {% for path in config[\"extra_css\"] %} <link rel=\"stylesheet\" href=\"{{ path | url }}\" /> {% endfor %} + <!-- Helper functions for inline scripts --> + {% include \"partials/javascripts/base.html\" %} + <!-- Analytics --> {% block analytics %} {% include \"partials/integrations/analytics.html\" %} @@ -172,7 +159,6 @@ <!-- Retrieve features from configuration --> {% set features = config.theme.features or [] %} - {% include \"partials/javascripts/base.html\" %} <!-- User preference: color palette --> {% if not config.theme.palette is mapping %} @@ -214,14 +200,28 @@ <!-- Announcement bar --> <div data-md-component=\"announce\"> {% if self.announce() %} - <aside class=\"md-banner md-announce\"> - <div class=\"md-banner__inner md-announce__inner md-grid md-typeset\"> + <aside class=\"md-banner\"> + <div class=\"md-banner__inner md-grid md-typeset\"> {% block announce %}{% endblock %} </div> </aside> {% endif %} </div> + <!-- Version warning --> + {% if config.extra.version %} + <div data-md-component=\"outdated\" hidden> + <aside class=\"md-banner md-banner--warning\"> + {% if self.outdated() %} + <div class=\"md-banner__inner md-grid md-typeset\"> + {% block outdated %}{% endblock %} + </div> + {% include \"partials/javascripts/outdated.html\" %} + {% endif %} + </aside> + </div> + {% endif %} + <!-- Header --> {% block header %} {% include \"partials/header.html\" %} @@ -295,49 +295,11 @@ {% block content %} - - <!-- Edit button --> - {% if page.edit_url %} - <a - href=\"{{ page.edit_url }}\" - title=\"{{ lang.t('edit.link.title') }}\" - class=\"md-content__button md-icon\" - > - {% include \".icons/material/pencil.svg\" %} - </a> - {% endif %} - - <!-- - Hack: check whether the content contains a h1 headline. If it - doesn't, the page title (or respectively site name) is used - as the main headline. - --> - {% if not \"\\x3ch1\" in page.content %} - <h1>{{ page.title | d(config.site_name, true)}}</h1> - {% endif %} - - <!-- Markdown content --> - {{ page.content }} - - <!-- Last update of source file --> - {% if page and page.meta %} - {% if page.meta.git_revision_date_localized or - page.meta.revision_date - %} - {% include \"partials/source-file.html\" %} - {% endif %} - {% endif %} - {% endblock %} - - <!-- Disqus integration --> - {% block disqus %} - {% include \"partials/integrations/disqus.html\" %} + {% include \"partials/content.html\" %} {% endblock %} </article> </div> @@ -0,0 +1,16 @@ +{#- + This file was automatically generated - do not edit +-#} +<div class=\"md-copyright\"> + {% if config.copyright %} + <div class=\"md-copyright__highlight\"> + {{ config.copyright }} + </div> + {% endif %} + {% if not config.extra.generator == false %} + Made with + <a href=\"https://squidfunk.github.io/mkdocs-material/\" target=\"_blank\" rel=\"noopener\"> + Material for MkDocs + </a> + {% endif %} +</div> @@ -41,21 +40,10 @@ {% endif %} <div class=\"md-footer-meta md-typeset\"> <div class=\"md-footer-meta__inner md-grid\"> - <div class=\"md-footer-copyright\"> - {% if config.copyright %} - <div class=\"md-footer-copyright__highlight\"> - {{ config.copyright }} - </div> - {% endif %} - {% if not config.extra.generator == false %} - Made with - <a href=\"https://squidfunk.github.io/mkdocs-material/\" target=\"_blank\" rel=\"noopener\"> - Material for MkDocs - </a> - {% endif %} - {{ extracopyright }} - </div> - {% include \"partials/social.html\" %} + {% include \"partials/copyright.html\" %} + {% if config.extra.social %} + {% include \"partials/social.html\" %} + {% endif %} </div> </div> </footer> @@ -4,17 +4,15 @@ -{% if config.extra.social %} - <div class=\"md-footer-social\"> - {% for social in config.extra.social %} - {% set title = social.name %} - {% if not title and \"//\" in social.link %} - {% set _,url = social.link.split(\"//\") %} - {% set title = url.split(\"/\")[0] %} - {% endif %} - <a href=\"{{ social.link }}\" target=\"_blank\" rel=\"noopener\" title=\"{{ title | e }}\" class=\"md-footer-social__link\"> - {% include \".icons/\" ~ social.icon ~ \".svg\" %} - </a> - {% endfor %} - </div> -{% endif %} +<div class=\"md-social\"> + {% for social in config.extra.social %} + {% set title = social.name %} + {% if not title and \"//\" in social.link %} + {% set _, url = social.link.split(\"//\") %} + {% set title = url.split(\"/\")[0] %} + {% endif %} + <a href=\"{{ social.link }}\" target=\"_blank\" rel=\"noopener\" title=\"{{ title | e }}\" class=\"md-social__link\"> + {% include \".icons/\" ~ social.icon ~ \".svg\" %} + </a> + {% endfor %} +</div> Upgrading from 6.x to 7.x \u00b6 What's new? \u00b6 Added support for deploying multiple versions Added support for integrating a language selector Added support for rendering admonitions as inline blocks Rewrite of the underlying reactive architecture Removed Webpack in favor of reactive build strategy (\u2013480 dependencies) Fixed keyboard navigation for code blocks after content tabs switch Changes to mkdocs.yml \u00b6 extra.version.method \u00b6 The versioning method configuration was renamed to extra.version.provider to allow for different versioning strategies in the future: 7.x 6.x extra : version : provider : mike extra : version : method : mike Changes to *.html files \u00b6 The templates have undergone a set of changes to make them future-proof. If you've used theme extension to override a block or template, make sure that it matches the new structure: If you've overridden a block , check base.html for potential changes If you've overridden a template , check the respective *.html file for potential changes base.html partials/footer.html partials/header.html partials/source.html partials/toc.html @@ -61,7 +61,7 @@ font.text | replace(' ', '+') + ':300,400,400i,700%7C' + font.code | replace(' ', '+') }}&display=fallback\"> - <style>body,input{font-family:\"{{ font.text }}\",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:\"{{ font.code }}\",SFMono-Regular,Consolas,Menlo,monospace}</style> + <style>:root{--md-text-font-family:\"{{ font.text }}\";--md-code-font-family:\"{{ font.code }}\"}</style> {% endif %} {% endblock %} {% if config.extra.manifest %} @@ -131,7 +131,7 @@ {% if page and page.meta and page.meta.hide %} {% set hidden = \"hidden\" if \"navigation\" in page.meta.hide %} {% endif %} - <div class=\"md-sidebar md-sidebar--primary\" data-md-component=\"navigation\" {{ hidden }}> + <div class=\"md-sidebar md-sidebar--primary\" data-md-component=\"sidebar\" data-md-type=\"navigation\" {{ hidden }}> <div class=\"md-sidebar__scrollwrap\"> <div class=\"md-sidebar__inner\"> {% include \"partials/nav.html\" %} @@ -143,7 +143,7 @@ {% if page and page.meta and page.meta.hide %} {% set hidden = \"hidden\" if \"toc\" in page.meta.hide %} {% endif %} - <div class=\"md-sidebar md-sidebar--secondary\" data-md-component=\"toc\" {{ hidden }}> + <div class=\"md-sidebar md-sidebar--secondary\" data-md-component=\"sidebar\" data-md-type=\"toc\" {{ hidden }}> <div class=\"md-sidebar__scrollwrap\"> <div class=\"md-sidebar__inner\"> {% include \"partials/toc.html\" %} @@ -152,7 +152,7 @@ </div> {% endif %} {% endblock %} - <div class=\"md-content\"> + <div class=\"md-content\" data-md-component=\"content\"> <article class=\"md-content__inner md-typeset\"> {% block content %} {% if page.edit_url %} @@ -183,10 +183,18 @@ {% include \"partials/footer.html\" %} {% endblock %} </div> - {% block scripts %} - <script src=\"{{ 'assets/javascripts/vendor.18f0862e.min.js' | url }}\"></script> - <script src=\"{{ 'assets/javascripts/bundle.994580cf.min.js' | url }}\"></script> - {%- set translations = {} -%} + <div class=\"md-dialog\" data-md-component=\"dialog\"> + <div class=\"md-dialog__inner md-typeset\"></div> + </div> + {% block config %} + {%- set app = { + \"base\": base_url, + \"features\": features, + \"translations\": {}, + \"search\": \"assets/javascripts/workers/search.217ffd95.min.js\" | url, + \"version\": config.extra.version or None + } -%} + {%- set translations = app.translations -%} {%- for key in [ \"clipboard.copy\", \"clipboard.copied\", @@ -204,19 +212,12 @@ ] -%} {%- set _ = translations.update({ key: lang.t(key) }) -%} {%- endfor -%} - <script id=\"__lang\" type=\"application/json\"> - {{- translations | tojson -}} - </script> - {% block config %}{% endblock %} - <script> - app = initialize({ - base: \"{{ base_url }}\", - features: {{ features or [] | tojson }}, - search: Object.assign({ - worker: \"{{ 'assets/javascripts/worker/search.9c0e82ba.min.js' | url }}\" - }, typeof search !== \"undefined\" && search) - }) + <script id=\"__config\" type=\"application/json\"> + {{- app | tojson -}} </script> + {% endblock %} + {% block scripts %} + <script src=\"{{ 'assets/javascripts/bundle.926459b3.min.js' | url }}\"></script> {% for path in config[\"extra_javascript\"] %} <script src=\"{{ path | url }}\"></script> {% endfor %} - <div class=\"md-footer-nav\"> - <nav class=\"md-footer-nav__inner md-grid\" aria-label=\"{{ lang.t('footer.title') }}\"> - {% if page.previous_page %} - <a href=\"{{ page.previous_page.url | url }}\" class=\"md-footer-nav__link md-footer-nav__link--prev\" rel=\"prev\"> - <div class=\"md-footer-nav__button md-icon\"> - {% include \".icons/material/arrow-left.svg\" %} - </div> - <div class=\"md-footer-nav__title\"> - <div class=\"md-ellipsis\"> - <span class=\"md-footer-nav__direction\"> - {{ lang.t(\"footer.previous\") }} - </span> - {{ page.previous_page.title }} - </div> - </div> - </a> - {% endif %} - {% if page.next_page %} - <a href=\"{{ page.next_page.url | url }}\" class=\"md-footer-nav__link md-footer-nav__link--next\" rel=\"next\"> - <div class=\"md-footer-nav__title\"> - <div class=\"md-ellipsis\"> - <span class=\"md-footer-nav__direction\"> - {{ lang.t(\"footer.next\") }} - </span> - {{ page.next_page.title }} - </div> + <nav class=\"md-footer__inner md-grid\" aria-label=\"{{ lang.t('footer.title') }}\"> + {% if page.previous_page %} + <a href=\"{{ page.previous_page.url | url }}\" class=\"md-footer__link md-footer__link--prev\" rel=\"prev\"> + <div class=\"md-footer__button md-icon\"> + {% include \".icons/material/arrow-left.svg\" %} + </div> + <div class=\"md-footer__title\"> + <div class=\"md-ellipsis\"> + <span class=\"md-footer__direction\"> + {{ lang.t(\"footer.previous\") }} + </span> + {{ page.previous_page.title }} </div> - <div class=\"md-footer-nav__button md-icon\"> - {% include \".icons/material/arrow-right.svg\" %} + </div> + </a> + {% endif %} + {% if page.next_page %} + <a href=\"{{ page.next_page.url | url }}\" class=\"md-footer__link md-footer__link--next\" rel=\"next\"> + <div class=\"md-footer__title\"> + <div class=\"md-ellipsis\"> + <span class=\"md-footer__direction\"> + {{ lang.t(\"footer.next\") }} + </span> + {{ page.next_page.title }} </div> - </a> - {% endif %} - </nav> - </div> + </div> + <div class=\"md-footer__button md-icon\"> + {% include \".icons/material/arrow-right.svg\" %} + </div> + </a> + {% endif %} + </nav> {% endif %} <div class=\"md-footer-meta md-typeset\"> <div class=\"md-footer-meta__inner md-grid\"> @@ -6,21 +6,21 @@ {% set site_url = site_url ~ \"/index.html\" %} {% endif %} <header class=\"md-header\" data-md-component=\"header\"> - <nav class=\"md-header-nav md-grid\" aria-label=\"{{ lang.t('header.title') }}\"> - <a href=\"{{ site_url }}\" title=\"{{ config.site_name | e }}\" class=\"md-header-nav__button md-logo\" aria-label=\"{{ config.site_name }}\"> + <nav class=\"md-header__inner md-grid\" aria-label=\"{{ lang.t('header.title') }}\"> + <a href=\"{{ site_url }}\" title=\"{{ config.site_name | e }}\" class=\"md-header__button md-logo\" aria-label=\"{{ config.site_name }}\"> {% include \"partials/logo.html\" %} </a> - <label class=\"md-header-nav__button md-icon\" for=\"__drawer\"> + <label class=\"md-header__button md-icon\" for=\"__drawer\"> {% include \".icons/material/menu\" ~ \".svg\" %} </label> - <div class=\"md-header-nav__title\" data-md-component=\"header-title\"> - <div class=\"md-header-nav__ellipsis\"> - <div class=\"md-header-nav__topic\"> + <div class=\"md-header__title\" data-md-component=\"header-title\"> + <div class=\"md-header__ellipsis\"> + <div class=\"md-header__topic\"> <span class=\"md-ellipsis\"> {{ config.site_name }} </span> </div> - <div class=\"md-header-nav__topic\"> + <div class=\"md-header__topic\" data-md-component=\"header-topic\"> <span class=\"md-ellipsis\"> {% if page and page.meta and page.meta.title %} {{ page.meta.title }} @@ -31,14 +31,35 @@ </div> </div> </div> + <div class=\"md-header__options\"> + {% if config.extra.alternate %} + <div class=\"md-select\"> + {% set icon = config.theme.icon.alternate or \"material/translate\" %} + <span class=\"md-header__button md-icon\"> + {% include \".icons/\" ~ icon ~ \".svg\" %} + </span> + <div class=\"md-select__inner\"> + <ul class=\"md-select__list\"> + {% for alt in config.extra.alternate %} + <li class=\"md-select__item\"> + <a href=\"{{ alt.link | url }}\" class=\"md-select__link\"> + {{ alt.name }} + </a> + </li> + {% endfor %} + </ul> + </div> + </div> + {% endif %} + </div> {% if \"search\" in config[\"plugins\"] %} - <label class=\"md-header-nav__button md-icon\" for=\"__search\"> + <label class=\"md-header__button md-icon\" for=\"__search\"> {% include \".icons/material/magnify.svg\" %} </label> {% include \"partials/search.html\" %} {% endif %} {% if config.repo_url %} - <div class=\"md-header-nav__source\"> + <div class=\"md-header__source\"> {% include \"partials/source.html\" %} </div> {% endif %} @@ -4,5 +4,5 @@ {% import \"partials/language.html\" as lang with context %} -<a href=\"{{ config.repo_url }}\" title=\"{{ lang.t('source.link.title') }}\" class=\"md-source\"> +<a href=\"{{ config.repo_url }}\" title=\"{{ lang.t('source.link.title') }}\" class=\"md-source\" data-md-component=\"source\"> <div class=\"md-source__icon md-icon\"> {% set icon = config.theme.icon.repo or \"fontawesome/brands/git-alt\" %} {% include \".icons/\" ~ icon ~ \".svg\" %} @@ -12,7 +12,7 @@ <span class=\"md-nav__icon md-icon\"></span> {{ lang.t(\"toc.title\") }} </label> - <ul class=\"md-nav__list\" data-md-scrollfix> + <ul class=\"md-nav__list\" data-md-component=\"toc\" data-md-scrollfix> {% for toc_item in toc %} {% include \"partials/toc-item.html\" %} {% endfor %} Upgrading from 5.x to 6.x \u00b6 What's new? \u00b6 Improved search result look and feel Improved search result stability while typing Improved search result grouping (pages + headings) Improved search result relevance and scoring Added display of missing query terms to search results Reduced size of vendor bundle by 25% (84kb \u2192 67kb) Reduced size of the Docker image to improve CI build performance Removed hero partial in favor of custom implementation Removed deprecated front matter features Changes to mkdocs.yml \u00b6 Following is a list of changes that need to be made to mkdocs.yml . Note that you only have to adjust the value if you defined it, so if your configuration does not contain the key, you can skip it. theme.features \u00b6 All feature flags that can be set from mkdocs.yml , like tabs and instant loading , are now prefixed with the name of the component or function they apply to, e.g. navigation.* : 6.x 5.x theme : features : - navigation.tabs - navigation.instant theme : features : - tabs - instant Changes to *.html files \u00b6 The templates have undergone a set of changes to make them future-proof. If you've used theme extension to override a block or template, make sure that it matches the new structure: If you've overridden a block , check base.html for potential changes If you've overridden a template , check the respective *.html file for potential changes base.html partials/hero.html partials/source-link @@ -22,13 +22,6 @@ {% import \"partials/language.html\" as lang with context %} -<!-- Theme options --> -{% set palette = config.theme.palette %} -{% if not palette is mapping %} - {% set palette = palette | first %} -{% endif %} -{% set font = config.theme.font %} - <!doctype html> <html lang=\"{{ lang.t('language') }}\" class=\"no-js\"> <head> @@ -45,21 +38,8 @@ <meta name=\"description\" content=\"{{ config.site_description }}\" /> {% endif %} - <!-- Redirect --> - {% if page and page.meta and page.meta.redirect %} - <script> - var anchor = window.location.hash.substr(1) - location.href = '{{ page.meta.redirect }}' + - (anchor ? '#' + anchor : '') - </script> - - <!-- Fallback in case JavaScript is not available --> - <meta http-equiv=\"refresh\" content=\"0; url={{ page.meta.redirect }}\" /> - <meta name=\"robots\" content=\"noindex\" /> - <link rel=\"canonical\" href=\"{{ page.meta.redirect }}\" /> - <!-- Canonical --> - {% elif page.canonical_url %} + {% if page.canonical_url %} <link rel=\"canonical\" href=\"{{ page.canonical_url }}\" /> {% endif %} @@ -96,20 +76,21 @@ <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/main.css' | url }}\" /> <!-- Extra color palette --> - {% if palette.scheme or palette.primary or palette.accent %} + {% if config.theme.palette %} + {% set palette = config.theme.palette %} <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/palette.css' | url }}\" /> - {% endif %} - <!-- Theme-color meta tag for Android --> - {% if palette.primary %} - {% import \"partials/palette.html\" as map %} - {% set primary = map.primary( - palette.primary | replace(\" \", \"-\") | lower - ) %} - <meta name=\"theme-color\" content=\"{{ primary }}\" /> + <!-- Theme-color meta tag for Android --> + {% if palette.primary %} + {% import \"partials/palette.html\" as map %} + {% set primary = map.primary( + palette.primary | replace(\" \", \"-\") | lower + ) %} + <meta name=\"theme-color\" content=\"{{ primary }}\" /> + {% endif %} {% endif %} {% endblock %} @@ -120,7 +101,8 @@ {% block fonts %} <!-- Load fonts from Google --> - {% if font != false %} + {% if config.theme.font != false %} + {% set font = config.theme.font %} <link href=\"https://fonts.gstatic.com\" rel=\"preconnect\" crossorigin /> <link rel=\"stylesheet\" @@ -169,8 +151,12 @@ <!-- Text direction and color palette, if defined --> {% set direction = config.theme.direction or lang.t('direction') %} - {% if palette.scheme or palette.primary or palette.accent %} - {% set scheme = palette.scheme | lower %} + {% if config.theme.palette %} + {% set palette = config.theme.palette %} + {% if not palette is mapping %} + {% set palette = palette | first %} + {% endif %} + {% set scheme = palette.scheme | replace(\" \", \"-\") | lower %} {% set primary = palette.primary | replace(\" \", \"-\") | lower %} {% set accent = palette.accent | replace(\" \", \"-\") | lower %} <body @@ -179,18 +165,19 @@ data-md-color-primary=\"{{ primary }}\" data-md-color-accent=\"{{ accent }}\" > + + <!-- Experimental: set color scheme based on preference --> + {% if \"preference\" == scheme %} + <script> + if (matchMedia(\"(prefers-color-scheme: dark)\").matches) + document.body.setAttribute(\"data-md-color-scheme\", \"slate\") + </script> + {% endif %} + {% else %} <body dir=\"{{ direction }}\"> {% endif %} - <!-- Experimental: set color scheme based on preference --> - {% if \"preference\" == palette.scheme %} - <script> - if (matchMedia(\"(prefers-color-scheme: dark)\").matches) - document.body.setAttribute(\"data-md-color-scheme\", \"slate\") - </script> - {% endif %} - <!-- State toggles - we need to set autocomplete=\"off\" in order to reset the drawer on back button invocation in some browsers @@ -243,15 +230,11 @@ <div class=\"md-container\" data-md-component=\"container\"> <!-- Hero teaser --> - {% block hero %} - {% if page and page.meta and page.meta.hero %} - {% include \"partials/hero.html\" with context %} - {% endif %} - {% endblock %} + {% block hero %}{% endblock %} <!-- Tabs navigation --> {% block tabs %} - {% if \"tabs\" in config.theme.features %} + {% if \"navigation.tabs\" in config.theme.features %} {% include \"partials/tabs.html\" %} {% endif %} {% endblock %} @@ -310,13 +293,6 @@ </a> {% endif %} - <!-- Link to source file --> - {% block source %} - {% if page and page.meta and page.meta.source %} - {% include \"partials/source-link.html\" %} - {% endif %} - {% endblock %} - <!-- Hack: check whether the content contains a h1 headline. If it doesn't, the page title (or respectively site name) is used @@ -370,7 +346,10 @@ \"search.result.placeholder\", \"search.result.none\", \"search.result.one\", - \"search.result.other\" + \"search.result.other\", + \"search.result.more.one\", + \"search.result.more.other\", + \"search.result.term.missing\" ] -%} {%- set _ = translations.update({ key: lang.t(key) }) -%} {%- endfor -%} @@ -1,12 +0,0 @@ -{#- - This file was automatically generated - do not edit --#} -{% set class = \"md-hero\" %} -{% if \"tabs\" not in config.theme.features %} - {% set class = \"md-hero md-hero--expand\" %} -{% endif %} -<div class=\"{{ class }}\" data-md-component=\"hero\"> - <div class=\"md-hero__inner md-grid\"> - {{ page.meta.hero }} - </div> -</div> @@ -1,14 +0,0 @@ -{#- - This file was automatically generated - do not edit --#} -{% import \"partials/language.html\" as lang with context %} -{% set repo = config.repo_url %} -{% if repo | last == \"/\" %} - {% set repo = repo[:-1] %} -{% endif %} -{% set path = page.meta.path | default(\"\") %} -<a href=\"{{ [repo, path, page.meta.source] | join('/') }}\" title=\"{{ page.meta.source }}\" class=\"md-content__button md-icon\"> - {{ lang.t(\"meta.source\") }} - {% set icon = config.theme.icon.repo or \"fontawesome/brands/git-alt\" %} - {% include \".icons/\" ~ icon ~ \".svg\" %} -</a> Upgrading from 4.x to 5.x \u00b6 What's new? \u00b6 Reactive architecture \u2013 try app . dialog$ . next ( \"Hi!\" ) in the console Instant loading \u2013 make Material behave like a Single Page Application Improved CSS customization with CSS variables \u2013 set your brand's colors Improved CSS resilience, e.g. proper sidebar locking for customized headers Improved icon integration and configuration \u2013 now including over 5k icons Added possibility to use any icon for logo, repository and social links Search UI does not freeze anymore (moved to web worker) Search index built only once when using instant loading Improved extensible keyboard handling Support for prebuilt search indexes Support for displaying stars and forks for GitLab repositories Support for scroll snapping of sidebars and search results Reduced HTML and CSS footprint due to deprecation of Internet Explorer support Slight facelifting of some UI elements (admonitions, tables, ...) Changes to mkdocs.yml \u00b6 Following is a list of changes that need to be made to mkdocs.yml . Note that you only have to adjust the value if you defined it, so if your configuration does not contain the key, you can skip it. theme.feature \u00b6 Optional features like tabs and instant loading are now implemented as flags and can be enabled by listing them in mkdocs.yml under theme.features : 5.x 4.x theme : features : - tabs - instant theme : feature : tabs : true theme.logo.icon \u00b6 The logo icon configuration was centralized under theme.icon.logo and can now be set to any of the icons bundled with the theme : 5.x 4.x theme : icon : logo : material/cloud theme : logo : icon : cloud extra.repo_icon \u00b6 The repo icon configuration was centralized under theme.icon.repo and can now be set to any of the icons bundled with the theme : 5.x 4.x theme : icon : repo : fontawesome/brands/gitlab extra : repo_icon : gitlab extra.search.* \u00b6 Search is now configured as part of the plugin options . Note that the search languages must now be listed as an array of strings and the tokenizer was renamed to separator : 5.x 4.x plugins : - search : separator : '[\\s\\-\\.]+' lang : - en - de - ru extra : search : language : en, de, ru tokenizer : '[\\s\\-\\.]+' extra.social.* \u00b6 Social links stayed in the same place, but the type key was renamed to icon in order to match the new way of specifying which icon to be used: 5.x 4.x extra : social : - icon : fontawesome/brands/github-alt link : https://github.com/squidfunk extra : social : - type : github link : https://github.com/squidfunk Changes to *.html files \u00b6 The templates have undergone a set of changes to make them future-proof. If you've used theme extension to override a block or template, make sure that it matches the new structure: If you've overridden a block , check base.html for potential changes If you've overridden a template , check the respective *.html file for potential changes base.html partials/footer.html partials/header.html partials/hero.html partials/language.html partials/logo.html partials/nav-item.html partials/nav.html partials/search.html partials/social.html partials/source-date.html partials/source-link.html partials/source.html partials/tabs-item.html partials/tabs.html partials/toc-item.html partials/toc.html @@ -4,7 +4,6 @@ {% import \"partials/language.html\" as lang with context %} -{% set feature = config.theme.feature %} {% set palette = config.theme.palette %} {% set font = config.theme.font %} <!doctype html> @@ -30,19 +29,6 @@ {% elif config.site_author %} <meta name=\"author\" content=\"{{ config.site_author }}\"> {% endif %} - {% for key in [ - \"clipboard.copy\", - \"clipboard.copied\", - \"search.language\", - \"search.pipeline.stopwords\", - \"search.pipeline.trimmer\", - \"search.result.none\", - \"search.result.one\", - \"search.result.other\", - \"search.tokenizer\" - ] %} - <meta name=\"lang:{{ key }}\" content=\"{{ lang.t(key) }}\"> - {% endfor %} <link rel=\"shortcut icon\" href=\"{{ config.theme.favicon | url }}\"> <meta name=\"generator\" content=\"mkdocs-{{ mkdocs_version }}, mkdocs-material-5.0.0\"> {% endblock %} @@ -56,9 +42,9 @@ {% endif %} {% endblock %} {% block styles %} - <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/application.********.css' | url }}\"> + <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/main.********.min.css' | url }}\"> {% if palette.primary or palette.accent %} - <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/application-palette.********.css' | url }}\"> + <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/palette.********.min.css' | url }}\"> {% endif %} {% if palette.primary %} {% import \"partials/palette.html\" as map %} @@ -69,20 +55,17 @@ {% endif %} {% endblock %} {% block libs %} - <script src=\"{{ 'assets/javascripts/modernizr.********.js' | url }}\"></script> {% endblock %} {% block fonts %} {% if font != false %} <link href=\"https://fonts.gstatic.com\" rel=\"preconnect\" crossorigin> <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family={{ font.text | replace(' ', '+') + ':300,400,400i,700%7C' + font.code | replace(' ', '+') }}&display=fallback\"> <style>body,input{font-family:\"{{ font.text }}\",\"Helvetica Neue\",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:\"{{ font.code }}\",\"Courier New\",Courier,monospace}</style> {% endif %} {% endblock %} - <link rel=\"stylesheet\" href=\"{{ 'assets/fonts/material-icons.css' | url }}\"> {% if config.extra.manifest %} <link rel=\"manifest\" href=\"{{ config.extra.manifest | url }}\" crossorigin=\"use-credentials\"> {% endif %} @@ -95,47 +77,50 @@ {% endblock %} {% block extrahead %}{% endblock %} </head> + {% set direction = config.theme.direction | default(lang.t('direction')) %} {% if palette.primary or palette.accent %} {% set primary = palette.primary | replace(\" \", \"-\") | lower %} {% set accent = palette.accent | replace(\" \", \"-\") | lower %} - <body dir=\"{{ lang.t('direction') }}\" data-md-color-primary=\"{{ primary }}\" data-md-color-accent=\"{{ accent }}\"> + <body dir=\"{{ direction }}\" data-md-color-primary=\"{{ primary }}\" data-md-color-accent=\"{{ accent }}\"> {% else %} - <body dir=\"{{ lang.t('direction') }}\"> + <body dir=\"{{ direction }}\"> {% endif %} - <svg class=\"md-svg\"> - <defs> - {% set platform = config.extra.repo_icon or config.repo_url %} - {% if \"github\" in platform %} - {% include \"assets/images/icons/github.f0b8504a.svg\" %} - {% elif \"gitlab\" in platform %} - {% include \"assets/images/icons/gitlab.6dd19c00.svg\" %} - {% elif \"bitbucket\" in platform %} - {% include \"assets/images/icons/bitbucket.1b09e088.svg\" %} - {% endif %} - </defs> - </svg> <input class=\"md-toggle\" data-md-toggle=\"drawer\" type=\"checkbox\" id=\"__drawer\" autocomplete=\"off\"> <input class=\"md-toggle\" data-md-toggle=\"search\" type=\"checkbox\" id=\"__search\" autocomplete=\"off\"> - <label class=\"md-overlay\" data-md-component=\"overlay\" for=\"__drawer\"></label> + <label class=\"md-overlay\" for=\"__drawer\"></label> + <div data-md-component=\"skip\"> + {% if page.toc | first is defined %} + {% set skip = page.toc | first %} + <a href=\"{{ skip.url | url }}\" class=\"md-skip\"> + {{ lang.t('skip.link.title') }} + </a> + {% endif %} + </div> + <div data-md-component=\"announce\"> + {% if self.announce() %} + <aside class=\"md-announce\"> + <div class=\"md-announce__inner md-grid md-typeset\"> + {% block announce %}{% endblock %} + </div> + </aside> + {% endif %} + </div> {% block header %} {% include \"partials/header.html\" %} {% endblock %} - <div class=\"md-container\"> + <div class=\"md-container\" data-md-component=\"container\"> {% block hero %} {% if page and page.meta and page.meta.hero %} {% include \"partials/hero.html\" with context %} {% endif %} {% endblock %} - {% if feature.tabs %} - {% include \"partials/tabs.html\" %} - {% endif %} + {% block tabs %} + {% if \"tabs\" in config.theme.features %} + {% include \"partials/tabs.html\" %} + {% endif %} + {% endblock %} - <main class=\"md-main\" role=\"main\"> - <div class=\"md-main__inner md-grid\" data-md-component=\"container\"> + <main class=\"md-main\" data-md-component=\"main\"> + <div class=\"md-main__inner md-grid\"> {% block site_nav %} {% if nav %} <div class=\"md-sidebar md-sidebar--primary\" data-md-component=\"navigation\"> @@ -160,41 +141,25 @@ <article class=\"md-content__inner md-typeset\"> {% block content %} {% if page.edit_url %} - <a href=\"{{ page.edit_url }}\" title=\"{{ lang.t('edit.link.title') }}\" class=\"md-icon md-content__icon\">&#xE3C9;</a> + <a href=\"{{ page.edit_url }}\" title=\"{{ lang.t('edit.link.title') }}\" class=\"md-content__button md-icon\"> + {% include \".icons/material/pencil.svg\" %} + </a> {% endif %} + {% block source %} + {% if page and page.meta and page.meta.source %} + {% include \"partials/source-link.html\" %} + {% endif %} + {% endblock %} {% if not \"\\x3ch1\" in page.content %} <h1>{{ page.title | default(config.site_name, true)}}</h1> {% endif %} {{ page.content }} - {% block source %} - {% if page and page.meta and page.meta.source %} - <h2 id=\"__source\">{{ lang.t(\"meta.source\") }}</h2> - {% set repo = config.repo_url %} - {% if repo | last == \"/\" %} - {% set repo = repo[:-1] %} - {% endif %} - {% set path = page.meta.path | default([\"\"]) %} - {% set file = page.meta.source %} - <a href=\"{{ [repo, path, file] | join('/') }}\" title=\"{{ file }}\" class=\"md-source-file\"> - {{ file }} - </a> - {% endif %} - {% endblock %} + {% if page and page.meta %} + {% if page.meta.git_revision_date_localized or + page.meta.revision_date + %} + {% include \"partials/source-date.html\" %} - {% if page and page.meta and ( - page.meta.git_revision_date_localized or - page.meta.revision_date - ) %} - {% set label = lang.t(\"source.revision.date\") %} - <hr> - <div class=\"md-source-date\"> - <small> - {% if page.meta.git_revision_date_localized %} - {{ label }}: {{ page.meta.git_revision_date_localized }} - {% elif page.meta.revision_date %} - {{ label }}: {{ page.meta.revision_date }} - {% endif %} - </small> - </div> {% endif %} {% endblock %} {% block disqus %} @@ -208,29 +174,35 @@ {% include \"partials/footer.html\" %} {% endblock %} </div> {% block scripts %} - <script src=\"{{ 'assets/javascripts/application.********.js' | url }}\"></script> - {% if lang.t(\"search.language\") != \"en\" %} - {% set languages = lang.t(\"search.language\").split(\",\") %} - {% if languages | length and languages[0] != \"\" %} - {% set path = \"assets/javascripts/lunr/\" %} - <script src=\"{{ (path ~ 'lunr.stemmer.support.js') | url }}\"></script> - {% for language in languages | map(\"trim\") %} - {% if language != \"en\" %} - {% if language == \"ja\" %} - <script src=\"{{ (path ~ 'tinyseg.js') | url }}\"></script> - {% endif %} - {% if language in (\"ar\", \"da\", \"de\", \"es\", \"fi\", \"fr\", \"hu\", \"it\", \"ja\", \"nl\", \"no\", \"pt\", \"ro\", \"ru\", \"sv\", \"th\", \"tr\", \"vi\") %} - <script src=\"{{ (path ~ 'lunr.' ~ language ~ '.js') | url }}\"></script> - {% endif %} - {% endif %} - {% endfor %} - {% if languages | length > 1 %} - <script src=\"{{ (path ~ 'lunr.multi.js') | url }}\"></script> - {% endif %} - {% endif %} - {% endif %} - <script>app.initialize({version:\"{{ mkdocs_version }}\",url:{base:\"{{ base_url }}\"}})</script> + <script src=\"{{ 'assets/javascripts/vendor.********.min.js' | url }}\"></script> + <script src=\"{{ 'assets/javascripts/bundle.********.min.js' | url }}\"></script> + {%- set translations = {} -%} + {%- for key in [ + \"clipboard.copy\", + \"clipboard.copied\", + \"search.config.lang\", + \"search.config.pipeline\", + \"search.config.separator\", + \"search.result.placeholder\", + \"search.result.none\", + \"search.result.one\", + \"search.result.other\" + ] -%} + {%- set _ = translations.update({ key: lang.t(key) }) -%} + {%- endfor -%} + <script id=\"__lang\" type=\"application/json\"> + {{- translations | tojson -}} + </script> + {% block config %}{% endblock %} + <script> + app = initialize({ + base: \"{{ base_url }}\", + features: {{ config.theme.features | tojson }}, + search: Object.assign({ + worker: \"{{ 'assets/javascripts/worker/search.********.min.js' | url }}\" + }, typeof search !== \"undefined\" && search) + }) + </script> {% for path in config[\"extra_javascript\"] %} <script src=\"{{ path | url }}\"></script> {% endfor %} @@ -5,34 +5,34 @@ <div class=\"md-footer-nav\"> - <nav class=\"md-footer-nav__inner md-grid\"> + <nav class=\"md-footer-nav__inner md-grid\" aria-label=\"{{ lang.t('footer.title') }}\"> {% if page.previous_page %} - <a href=\"{{ page.previous_page.url | url }}\" title=\"{{ page.previous_page.title | striptags }}\" class=\"md-flex md-footer-nav__link md-footer-nav__link--prev\" rel=\"prev\"> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <i class=\"md-icon md-icon--arrow-back md-footer-nav__button\"></i> + <a href=\"{{ page.previous_page.url | url }}\" title=\"{{ page.previous_page.title | striptags }}\" class=\"md-footer-nav__link md-footer-nav__link--prev\" rel=\"prev\"> + <div class=\"md-footer-nav__button md-icon\"> + {% include \".icons/material/arrow-left.svg\" %} </div> - <div class=\"md-flex__cell md-flex__cell--stretch md-footer-nav__title\"> - <span class=\"md-flex__ellipsis\"> + <div class=\"md-footer-nav__title\"> + <div class=\"md-ellipsis\"> <span class=\"md-footer-nav__direction\"> {{ lang.t(\"footer.previous\") }} </span> {{ page.previous_page.title }} - </span> + </div> </div> </a> {% endif %} {% if page.next_page %} - <a href=\"{{ page.next_page.url | url }}\" title=\"{{ page.next_page.title | striptags }}\" class=\"md-flex md-footer-nav__link md-footer-nav__link--next\" rel=\"next\"> - <div class=\"md-flex__cell md-flex__cell--stretch md-footer-nav__title\"> - <span class=\"md-flex__ellipsis\"> + <a href=\"{{ page.next_page.url | url }}\" title=\"{{ page.next_page.title | striptags }}\" class=\"md-footer-nav__link md-footer-nav__link--next\" rel=\"next\"> + <div class=\"md-footer-nav__title\"> + <div class=\"md-ellipsis\"> <span class=\"md-footer-nav__direction\"> {{ lang.t(\"footer.next\") }} </span> {{ page.next_page.title }} - </span> + </div> </div> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <i class=\"md-icon md-icon--arrow-forward md-footer-nav__button\"></i> + <div class=\"md-footer-nav__button md-icon\"> + {% include \".icons/material/arrow-right.svg\" %} </div> </a> {% endif %} @@ -4,51 +4,43 @@ <header class=\"md-header\" data-md-component=\"header\"> - <nav class=\"md-header-nav md-grid\"> - <div class=\"md-flex\"> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" aria-label=\"{{ config.site_name }}\" class=\"md-header-nav__button md-logo\"> - {% if config.theme.logo.icon %} - <i class=\"md-icon\">{{ config.theme.logo.icon }}</i> - {% else %} - <img alt=\"logo\" src=\"{{ config.theme.logo | url }}\" width=\"24\" height=\"24\"> - {% endif %} - </a> - </div> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <label class=\"md-icon md-icon--menu md-header-nav__button\" for=\"__drawer\"></label> - </div> - <div class=\"md-flex__cell md-flex__cell--stretch\"> - <div class=\"md-flex__ellipsis md-header-nav__title\" data-md-component=\"title\"> - {% if config.site_name == page.title %} - {{ config.site_name }} - {% else %} - <span class=\"md-header-nav__topic\"> - {{ config.site_name }} - </span> - <span class=\"md-header-nav__topic\"> - {% if page and page.meta and page.meta.title %} - {{ page.meta.title }} - {% else %} - {{ page.title }} - {% endif %} - </span> - {% endif %} + <nav class=\"md-header-nav md-grid\" aria-label=\"{{ lang.t('header.title') }}\"> + <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" class=\"md-header-nav__button md-logo\" aria-label=\"{{ config.site_name }}\"> + {% include \"partials/logo.html\" %} + </a> + <label class=\"md-header-nav__button md-icon\" for=\"__drawer\"> + {% include \".icons/material/menu\" ~ \".svg\" %} + </label> + <div class=\"md-header-nav__title\" data-md-component=\"header-title\"> + {% if config.site_name == page.title %} + <div class=\"md-header-nav__ellipsis md-ellipsis\"> + {{ config.site_name }} </div> - </div> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - {% if \"search\" in config[\"plugins\"] %} - <label class=\"md-icon md-icon--search md-header-nav__button\" for=\"__search\"></label> - {% include \"partials/search.html\" %} - {% endif %} - </div> - {% if config.repo_url %} - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <div class=\"md-header-nav__source\"> - {% include \"partials/source.html\" %} - </div> + {% else %} + <div class=\"md-header-nav__ellipsis\"> + <span class=\"md-header-nav__topic md-ellipsis\"> + {{ config.site_name }} + </span> + <span class=\"md-header-nav__topic md-ellipsis\"> + {% if page and page.meta and page.meta.title %} + {{ page.meta.title }} + {% else %} + {{ page.title }} + {% endif %} + </span> </div> {% endif %} </div> + {% if \"search\" in config[\"plugins\"] %} + <label class=\"md-header-nav__button md-icon\" for=\"__search\"> + {% include \".icons/material/magnify.svg\" %} + </label> + {% include \"partials/search.html\" %} + {% endif %} + {% if config.repo_url %} + <div class=\"md-header-nav__source\"> + {% include \"partials/source.html\" %} + </div> + {% endif %} </nav> </header> @@ -4,9 +4,8 @@ -{% set feature = config.theme.feature %} {% set class = \"md-hero\" %} -{% if not feature.tabs %} +{% if \"tabs\" not in config.theme.features %} {% set class = \"md-hero md-hero--expand\" %} {% endif %} <div class=\"{{ class }}\" data-md-component=\"hero\"> @@ -4,12 +4,4 @@ {% import \"partials/language/\" + config.theme.language + \".html\" as lang %} {% import \"partials/language/en.html\" as fallback %} -{% macro t(key) %}{{ { - \"direction\": config.theme.direction, - \"search.language\": ( - config.extra.search | default({}) - ).language, - \"search.tokenizer\": ( - config.extra.search | default({}) - ).tokenizer | default(\"\", true), -}[key] or lang.t(key) or fallback.t(key) }}{% endmacro %} +{% macro t(key) %}{{ lang.t(key) | default(fallback.t(key)) }}{% endmacro %} @@ -0,0 +1,9 @@ +{#- + This file was automatically generated - do not edit +-#} +{% if config.theme.logo %} + <img src=\"{{ config.theme.logo | url }}\" alt=\"logo\"> +{% else %} + {% set icon = config.theme.icon.logo or \"material/library\" %} + {% include \".icons/\" ~ icon ~ \".svg\" %} +{% endif %} @@ -14,9 +14,15 @@ {% endif %} <label class=\"md-nav__link\" for=\"{{ path }}\"> {{ nav_item.title }} + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/chevron-right.svg\" %} + </span> </label> - <nav class=\"md-nav\" data-md-component=\"collapsible\" data-md-level=\"{{ level }}\"> + <nav class=\"md-nav\" aria-label=\"{{ nav_item.title }}\" data-md-level=\"{{ level }}\"> <label class=\"md-nav__title\" for=\"{{ path }}\"> + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/arrow-left.svg\" %} + </span> {{ nav_item.title }} </label> <ul class=\"md-nav__list\" data-md-scrollfix> @@ -39,6 +45,9 @@ {% if toc | first is defined %} <label class=\"md-nav__link md-nav__link--active\" for=\"__toc\"> {{ nav_item.title }} + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/table-of-contents.svg\" %} + </span> </label> {% endif %} <a href=\"{{ nav_item.url | url }}\" title=\"{{ nav_item.title | striptags }}\" class=\"md-nav__link md-nav__link--active\"> @@ -4,14 +4,10 @@ -<nav class=\"md-nav md-nav--primary\" data-md-level=\"0\"> - <label class=\"md-nav__title md-nav__title--site\" for=\"__drawer\"> - <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" class=\"md-nav__button md-logo\"> - {% if config.theme.logo.icon %} - <i class=\"md-icon\">{{ config.theme.logo.icon }}</i> - {% else %} - <img alt=\"logo\" src=\"{{ config.theme.logo | url }}\" width=\"48\" height=\"48\"> - {% endif %} +<nav class=\"md-nav md-nav--primary\" aria-label=\"{{ lang.t('nav.title') }}\" data-md-level=\"0\"> + <label class=\"md-nav__title\" for=\"__drawer\"> + <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" class=\"md-nav__button md-logo\" aria-label=\"{{ config.site_name }}\"> + {% include \"partials/logo.html\" %} </a> {{ config.site_name }} </label> @@ -6,15 +6,18 @@ <label class=\"md-search__overlay\" for=\"__search\"></label> <div class=\"md-search__inner\" role=\"search\"> <form class=\"md-search__form\" name=\"search\"> - <input type=\"text\" class=\"md-search__input\" name=\"query\" aria-label=\"Search\" placeholder=\"{{ lang.t('search.placeholder') }}\" autocapitalize=\"off\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" data-md-component=\"query\" data-md-state=\"active\"> + <input type=\"text\" class=\"md-search__input\" name=\"query\" aria-label=\"{{ lang.t('search.placeholder') }}\" placeholder=\"{{ lang.t('search.placeholder') }}\" autocapitalize=\"off\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" data-md-component=\"search-query\" data-md-state=\"active\"> <label class=\"md-search__icon md-icon\" for=\"__search\"> + {% include \".icons/material/magnify.svg\" %} + {% include \".icons/material/arrow-left.svg\" %} </label> - <button type=\"reset\" class=\"md-icon md-search__icon\" data-md-component=\"reset\" tabindex=\"-1\"> - &#xE5CD; + <button type=\"reset\" class=\"md-search__icon md-icon\" aria-label=\"{{ lang.t('search.reset') }}\" data-md-component=\"search-reset\" tabindex=\"-1\"> + {% include \".icons/material/close.svg\" %} </button> </form> <div class=\"md-search__output\"> <div class=\"md-search__scrollwrap\" data-md-scrollfix> - <div class=\"md-search-result\" data-md-component=\"result\"> + <div class=\"md-search-result\" data-md-component=\"search-result\"> <div class=\"md-search-result__meta\"> {{ lang.t(\"search.result.placeholder\") }} </div> @@ -4,9 +4,12 @@ {% if config.extra.social %} <div class=\"md-footer-social\"> - <link rel=\"stylesheet\" href=\"{{ 'assets/fonts/font-awesome.css' | url }}\"> {% for social in config.extra.social %} - <a href=\"{{ social.link }}\" target=\"_blank\" rel=\"noopener\" title=\"{{ social.type }}\" class=\"md-footer-social__link fa fa-{{ social.type }}\"></a> + {% set _,rest = social.link.split(\"//\") %} + {% set domain = rest.split(\"/\")[0] %} + <a href=\"{{ social.link }}\" target=\"_blank\" rel=\"noopener\" title=\"{{ domain }}\" class=\"md-footer-social__link\"> + {% include \".icons/\" ~ social.icon ~ \".svg\" %} + </a> {% endfor %} </div> {% endif %} @@ -0,0 +1,15 @@ +{#- + This file was automatically generated - do not edit +-#} +{% import \"partials/language.html\" as lang with context %} +{% set label = lang.t(\"source.revision.date\") %} +<hr> +<div class=\"md-source-date\"> + <small> + {% if page.meta.git_revision_date_localized %} + {{ label }}: {{ page.meta.git_revision_date_localized }} + {% elif page.meta.revision_date %} + {{ label }}: {{ page.meta.revision_date }} + {% endif %} + </small> +</div> @@ -0,0 +1,13 @@ +{#- + This file was automatically generated - do not edit +-#} +{% import \"partials/language.html\" as lang with context %} +{% set repo = config.repo_url %} +{% if repo | last == \"/\" %} + {% set repo = repo[:-1] %} +{% endif %} +{% set path = page.meta.path | default([\"\"]) %} +<a href=\"{{ [repo, path, page.meta.source] | join('/') }}\" title=\"{{ file }}\" class=\"md-content__button md-icon\"> + {{ lang.t(\"meta.source\") }} + {% include \".icons/\" ~ config.theme.icon.repo ~ \".svg\" %} +</a> @@ -4,24 +4,11 @@ {% import \"partials/language.html\" as lang with context %} -{% set platform = config.extra.repo_icon or config.repo_url %} -{% if \"github\" in platform %} - {% set repo_type = \"github\" %} -{% elif \"gitlab\" in platform %} - {% set repo_type = \"gitlab\" %} -{% elif \"bitbucket\" in platform %} - {% set repo_type = \"bitbucket\" %} -{% else %} - {% set repo_type = \"\" %} -{% endif %} -<a href=\"{{ config.repo_url }}\" title=\"{{ lang.t('source.link.title') }}\" class=\"md-source\" data-md-source=\"{{ repo_type }}\"> - {% if repo_type %} - <div class=\"md-source__icon\"> - <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"> - <use xlink:href=\"#__{{ repo_type }}\" width=\"24\" height=\"24\"></use> - </svg> - </div> - {% endif %} +<a href=\"{{ config.repo_url }}\" title=\"{{ lang.t('source.link.title') }}\" class=\"md-source\"> + <div class=\"md-source__icon md-icon\"> + {% set icon = config.theme.icon.repo or \"fontawesome/brands/git-alt\" %} + {% include \".icons/\" ~ icon ~ \".svg\" %} + </div> <div class=\"md-source__repository\"> {{ config.repo_name }} </div> @@ -4,7 +4,7 @@ -{% if nav_item.is_homepage %} +{% if nav_item.is_homepage or nav_item.url == \"index.html\" %} <li class=\"md-tabs__item\"> {% if not page.ancestors | length and nav | selectattr(\"url\", page.url) %} <a href=\"{{ nav_item.url | url }}\" class=\"md-tabs__link md-tabs__link--active\"> @@ -5,7 +5,7 @@ {% if page.ancestors | length > 0 %} {% set class = \"md-tabs md-tabs--active\" %} {% endif %} -<nav class=\"{{ class }}\" data-md-component=\"tabs\"> +<nav class=\"{{ class }}\" aria-label=\"{{ lang.t('tabs.title') }}\" data-md-component=\"tabs\"> <div class=\"md-tabs__inner md-grid\"> <ul class=\"md-tabs__list\"> {% for nav_item in nav %} @@ -6,7 +6,7 @@ {{ toc_item.title }} </a> {% if toc_item.children %} - <nav class=\"md-nav\"> + <nav class=\"md-nav\" aria-label=\"{{ toc_item.title }}\"> <ul class=\"md-nav__list\"> {% for toc_item in toc_item.children %} {% include \"partials/toc-item.html\" %} @@ -4,35 +4,22 @@ {% import \"partials/language.html\" as lang with context %} -<nav class=\"md-nav md-nav--secondary\"> +<nav class=\"md-nav md-nav--secondary\" aria-label=\"{{ lang.t('toc.title') }}\"> {% endif %} {% if toc | first is defined %} <label class=\"md-nav__title\" for=\"__toc\"> + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/arrow-left.svg\" %} + </span> {{ lang.t(\"toc.title\") }} </label> <ul class=\"md-nav__list\" data-md-scrollfix> {% for toc_item in toc %} {% include \"partials/toc-item.html\" %} {% endfor %} - {% if page.meta.source and page.meta.source | length > 0 %} - <li class=\"md-nav__item\"> - <a href=\"#__source\" class=\"md-nav__link md-nav__link--active\"> - {{ lang.t(\"meta.source\") }} - </a> - </li> - {% endif %} - {% set disqus = config.extra.disqus %} - {% if page and page.meta and page.meta.disqus is string %} - {% set disqus = page.meta.disqus %} - {% endif %} - {% if not page.is_homepage and disqus %} - <li class=\"md-nav__item\"> - <a href=\"#__comments\" class=\"md-nav__link md-nav__link--active\"> - {{ lang.t(\"meta.comments\") }} - </a> - </li> - {% endif %} </ul> {% endif %} </nav> Upgrading from 3.x to 4.x \u00b6 What's new? \u00b6 Material for MkDocs 4 fixes incorrect layout on Chinese systems. The fix includes a mandatory change of the base font-size from 10px to 20px which means all rem values needed to be updated. Within the theme, px to rem calculation is now encapsulated in a new function called px2rem which is part of the SASS code base. If you use Material for MkDocs with custom CSS that is based on rem values, note that those values must now be divided by 2. Now, 1.0rem doesn't map to 10px , but 20px . To learn more about the problem and implications, please refer to #911 in which the problem was discovered and fixed. Changes to mkdocs.yml \u00b6 None. Changes to *.html files \u00b6 None.","title":"How to upgrade"},{"location":"upgrade/#how-to-upgrade","text":"Upgrade to the latest version with: pip install --upgrade mkdocs-material Show the currently installed version with: pip show mkdocs-material","title":"How to upgrade"},{"location":"upgrade/#upgrading-from-7x-to-8x","text":"","title":"Upgrading from 7.x to 8.x"},{"location":"upgrade/#whats-new","text":"Added support for code annotations Added support for anchor tracking Added support for version warning Added copyright partial for easier override Removed deprecated content tabs legacy implementation Removed deprecated seealso admonition type Removed deprecated site_keywords setting (unsupported by MkDocs) Removed deprecated prebuilt search index support Removed deprecated web app manifest \u2013 use customization Removed extracopyright variable \u2013 use new copyright partial Removed Disqus integation \u2013 use customization Switched to :is() selectors for simple selector lists Switched autoprefixer from last 4 years to last 2 years Improved CSS overall to match modern standards Improved CSS variable semantics for fonts Improved extensibility by restructuring partials Improved handling of details when printing Improved keyboard navigation for footnotes Fixed #3214 : Search highlighting breaks site when empty","title":"What's new?"},{"location":"upgrade/#changes-to-mkdocsyml","text":"","title":"Changes to mkdocs.yml"},{"location":"upgrade/#pymdownxtabbed","text":"Support for the legacy style of the Tabbed extension was dropped in favor of the new, alternate implementation which has better behavior on mobile viewports : 8.x 7.x markdown_extensions : - pymdownx.tabbed : alternate_style : true markdown_extensions : - pymdownx.tabbed","title":"pymdownx.tabbed"},{"location":"upgrade/#pymdownxsuperfences","text":"The *-experimental suffix must be removed from the custom fence class property, which is used to target code blocks to be rendered as diagrams using Mermaid.js : 8.x 7.x markdown_extensions : - pymdownx.superfences : custom_fences : - name : mermaid class : mermaid format : !!python/name:pymdownx.superfences.fence_code_format markdown_extensions : - pymdownx.superfences : custom_fences : - name : mermaid class : mermaid-experimental format : !!python/name:pymdownx.superfences.fence_code_format","title":"pymdownx.superfences"},{"location":"upgrade/#google_analytics","text":"This option was deprecated in MkDocs 1.2.0 , as the implementation of a JavaScript-based analytics integration is the responsibility of a theme. The following lines must be changed: 8.x 7.x extra : analytics : provider : google property : UA-XXXXXXXX-X google_analytics : - UA-XXXXXXXX-X - auto","title":"google_analytics"},{"location":"upgrade/#changes-to-html-files","text":"The templates have undergone a set of changes to make them future-proof. If you've used theme extension to override a block or template, make sure that it matches the new structure: If you've overridden a block , check base.html for potential changes If you've overridden a template , check the respective *.html file for potential changes base.html partials/copyright.html partials/footer.html partials/social.html @@ -13,11 +13,6 @@ {% elif config.site_description %} <meta name=\"description\" content=\"{{ config.site_description }}\"> {% endif %} - {% if page and page.meta and page.meta.keywords %} - <meta name=\"keywords\" content=\"{{ page.meta.keywords }}\"> - {% elif config.site_keywords %} - <meta name=\"keywords\" content=\"{{ config.site_keywords }}\"> - {% endif %} {% if page and page.meta and page.meta.author %} <meta name=\"author\" content=\"{{ page.meta.author }}\"> {% elif config.site_author %} @@ -61,15 +56,13 @@ font.text | replace(' ', '+') + ':300,400,400i,700%7C' + font.code | replace(' ', '+') }}&display=fallback\"> - <style>:root{--md-text-font-family:\"{{ font.text }}\";--md-code-font-family:\"{{ font.code }}\"}</style> + <style>:root{--md-text-font:\"{{ font.text }}\";--md-code-font:\"{{ font.code }}\"}</style> {% endif %} {% endblock %} - {% if config.extra.manifest %} - <link rel=\"manifest\" href=\"{{ config.extra.manifest | url }}\" crossorigin=\"use-credentials\"> - {% endif %} {% for path in config[\"extra_css\"] %} <link rel=\"stylesheet\" href=\"{{ path | url }}\"> {% endfor %} + {% include \"partials/javascripts/base.html\" %} {% block analytics %} {% include \"partials/integrations/analytics.html\" %} {% endblock %} @@ -89,7 +82,6 @@ <body dir=\"{{ direction }}\"> {% endif %} {% set features = config.theme.features or [] %} - {% include \"partials/javascripts/base.html\" %} {% if not config.theme.palette is mapping %} {% include \"partials/javascripts/palette.html\" %} {% endif %} @@ -106,13 +98,25 @@ </div> <div data-md-component=\"announce\"> {% if self.announce() %} - <aside class=\"md-banner md-announce\"> - <div class=\"md-banner__inner md-announce__inner md-grid md-typeset\"> + <aside class=\"md-banner\"> + <div class=\"md-banner__inner md-grid md-typeset\"> {% block announce %}{% endblock %} </div> </aside> {% endif %} </div> + {% if config.extra.version %} + <div data-md-component=\"outdated\" hidden> + <aside class=\"md-banner md-banner--warning\"> + {% if self.outdated() %} + <div class=\"md-banner__inner md-grid md-typeset\"> + {% block outdated %}{% endblock %} + </div> + {% include \"partials/javascripts/outdated.html\" %} + {% endif %} + </aside> + </div> + {% endif %} {% block header %} {% include \"partials/header.html\" %} {% endblock %} @@ -156,25 +160,7 @@ <div class=\"md-content\" data-md-component=\"content\"> <article class=\"md-content__inner md-typeset\"> {% block content %} - {% if page.edit_url %} - <a href=\"{{ page.edit_url }}\" title=\"{{ lang.t('edit.link.title') }}\" class=\"md-content__button md-icon\"> - {% include \".icons/material/pencil.svg\" %} - </a> - {% endif %} - {% if not \"\\x3ch1\" in page.content %} - <h1>{{ page.title | d(config.site_name, true)}}</h1> - {% endif %} - {{ page.content }} - {% if page and page.meta %} - {% if page.meta.git_revision_date_localized or - page.meta.revision_date - %} - {% include \"partials/source-file.html\" %} - {% endif %} - {% endif %} - {% endblock %} - {% block disqus %} - {% include \"partials/integrations/disqus.html\" %} + {% include \"partials/content.html\" %} {% endblock %} </article> </div> @@ -38,13 +38,6 @@ <meta name=\"description\" content=\"{{ config.site_description }}\" /> {% endif %} - <!-- Page keywords --> - {% if page and page.meta and page.meta.keywords %} - <meta name=\"keywords\" content=\"{{ page.meta.keywords }}\" /> - {% elif config.site_keywords %} - <meta name=\"keywords\" content=\"{{ config.site_keywords }}\" /> - {% endif %} - <!-- Page author --> {% if page and page.meta and page.meta.author %} <meta name=\"author\" content=\"{{ page.meta.author }}\" /> @@ -120,27 +113,21 @@ /> <style> :root { - --md-text-font-family: \"{{ font.text }}\"; - --md-code-font-family: \"{{ font.code }}\"; + --md-text-font: \"{{ font.text }}\"; + --md-code-font: \"{{ font.code }}\"; } </style> {% endif %} {% endblock %} - <!-- Progressive Web App Manifest --> - {% if config.extra.manifest %} - <link - rel=\"manifest\" - href=\"{{ config.extra.manifest | url }}\" - crossorigin=\"use-credentials\" - /> - {% endif %} - <!-- Custom style sheets --> {% for path in config[\"extra_css\"] %} <link rel=\"stylesheet\" href=\"{{ path | url }}\" /> {% endfor %} + <!-- Helper functions for inline scripts --> + {% include \"partials/javascripts/base.html\" %} + <!-- Analytics --> {% block analytics %} {% include \"partials/integrations/analytics.html\" %} @@ -172,7 +159,6 @@ <!-- Retrieve features from configuration --> {% set features = config.theme.features or [] %} - {% include \"partials/javascripts/base.html\" %} <!-- User preference: color palette --> {% if not config.theme.palette is mapping %} @@ -214,14 +200,28 @@ <!-- Announcement bar --> <div data-md-component=\"announce\"> {% if self.announce() %} - <aside class=\"md-banner md-announce\"> - <div class=\"md-banner__inner md-announce__inner md-grid md-typeset\"> + <aside class=\"md-banner\"> + <div class=\"md-banner__inner md-grid md-typeset\"> {% block announce %}{% endblock %} </div> </aside> {% endif %} </div> + <!-- Version warning --> + {% if config.extra.version %} + <div data-md-component=\"outdated\" hidden> + <aside class=\"md-banner md-banner--warning\"> + {% if self.outdated() %} + <div class=\"md-banner__inner md-grid md-typeset\"> + {% block outdated %}{% endblock %} + </div> + {% include \"partials/javascripts/outdated.html\" %} + {% endif %} + </aside> + </div> + {% endif %} + <!-- Header --> {% block header %} {% include \"partials/header.html\" %} @@ -295,49 +295,11 @@ {% block content %} - - <!-- Edit button --> - {% if page.edit_url %} - <a - href=\"{{ page.edit_url }}\" - title=\"{{ lang.t('edit.link.title') }}\" - class=\"md-content__button md-icon\" - > - {% include \".icons/material/pencil.svg\" %} - </a> - {% endif %} - - <!-- - Hack: check whether the content contains a h1 headline. If it - doesn't, the page title (or respectively site name) is used - as the main headline. - --> - {% if not \"\\x3ch1\" in page.content %} - <h1>{{ page.title | d(config.site_name, true)}}</h1> - {% endif %} - - <!-- Markdown content --> - {{ page.content }} - - <!-- Last update of source file --> - {% if page and page.meta %} - {% if page.meta.git_revision_date_localized or - page.meta.revision_date - %} - {% include \"partials/source-file.html\" %} - {% endif %} - {% endif %} - {% endblock %} - - <!-- Disqus integration --> - {% block disqus %} - {% include \"partials/integrations/disqus.html\" %} + {% include \"partials/content.html\" %} {% endblock %} </article> </div> @@ -0,0 +1,16 @@ +{#- + This file was automatically generated - do not edit +-#} +<div class=\"md-copyright\"> + {% if config.copyright %} + <div class=\"md-copyright__highlight\"> + {{ config.copyright }} + </div> + {% endif %} + {% if not config.extra.generator == false %} + Made with + <a href=\"https://squidfunk.github.io/mkdocs-material/\" target=\"_blank\" rel=\"noopener\"> + Material for MkDocs + </a> + {% endif %} +</div> @@ -41,21 +40,10 @@ {% endif %} <div class=\"md-footer-meta md-typeset\"> <div class=\"md-footer-meta__inner md-grid\"> - <div class=\"md-footer-copyright\"> - {% if config.copyright %} - <div class=\"md-footer-copyright__highlight\"> - {{ config.copyright }} - </div> - {% endif %} - {% if not config.extra.generator == false %} - Made with - <a href=\"https://squidfunk.github.io/mkdocs-material/\" target=\"_blank\" rel=\"noopener\"> - Material for MkDocs - </a> - {% endif %} - {{ extracopyright }} - </div> - {% include \"partials/social.html\" %} + {% include \"partials/copyright.html\" %} + {% if config.extra.social %} + {% include \"partials/social.html\" %} + {% endif %} </div> </div> </footer> @@ -4,17 +4,15 @@ -{% if config.extra.social %} - <div class=\"md-footer-social\"> - {% for social in config.extra.social %} - {% set title = social.name %} - {% if not title and \"//\" in social.link %} - {% set _,url = social.link.split(\"//\") %} - {% set title = url.split(\"/\")[0] %} - {% endif %} - <a href=\"{{ social.link }}\" target=\"_blank\" rel=\"noopener\" title=\"{{ title | e }}\" class=\"md-footer-social__link\"> - {% include \".icons/\" ~ social.icon ~ \".svg\" %} - </a> - {% endfor %} - </div> -{% endif %} +<div class=\"md-social\"> + {% for social in config.extra.social %} + {% set title = social.name %} + {% if not title and \"//\" in social.link %} + {% set _, url = social.link.split(\"//\") %} + {% set title = url.split(\"/\")[0] %} + {% endif %} + <a href=\"{{ social.link }}\" target=\"_blank\" rel=\"noopener\" title=\"{{ title | e }}\" class=\"md-social__link\"> + {% include \".icons/\" ~ social.icon ~ \".svg\" %} + </a> + {% endfor %} +</div>","title":"Changes to *.html files"},{"location":"upgrade/#upgrading-from-6x-to-7x","text":"","title":"Upgrading from 6.x to 7.x"},{"location":"upgrade/#whats-new_1","text":"Added support for deploying multiple versions Added support for integrating a language selector Added support for rendering admonitions as inline blocks Rewrite of the underlying reactive architecture Removed Webpack in favor of reactive build strategy (\u2013480 dependencies) Fixed keyboard navigation for code blocks after content tabs switch","title":"What's new?"},{"location":"upgrade/#changes-to-mkdocsyml_1","text":"","title":"Changes to mkdocs.yml"},{"location":"upgrade/#extraversionmethod","text":"The versioning method configuration was renamed to extra.version.provider to allow for different versioning strategies in the future: 7.x 6.x extra : version : provider : mike extra : version : method : mike","title":"extra.version.method"},{"location":"upgrade/#changes-to-html-files_1","text":"The templates have undergone a set of changes to make them future-proof. If you've used theme extension to override a block or template, make sure that it matches the new structure: If you've overridden a block , check base.html for potential changes If you've overridden a template , check the respective *.html file for potential changes base.html partials/footer.html partials/header.html partials/source.html partials/toc.html @@ -61,7 +61,7 @@ font.text | replace(' ', '+') + ':300,400,400i,700%7C' + font.code | replace(' ', '+') }}&display=fallback\"> - <style>body,input{font-family:\"{{ font.text }}\",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:\"{{ font.code }}\",SFMono-Regular,Consolas,Menlo,monospace}</style> + <style>:root{--md-text-font-family:\"{{ font.text }}\";--md-code-font-family:\"{{ font.code }}\"}</style> {% endif %} {% endblock %} {% if config.extra.manifest %} @@ -131,7 +131,7 @@ {% if page and page.meta and page.meta.hide %} {% set hidden = \"hidden\" if \"navigation\" in page.meta.hide %} {% endif %} - <div class=\"md-sidebar md-sidebar--primary\" data-md-component=\"navigation\" {{ hidden }}> + <div class=\"md-sidebar md-sidebar--primary\" data-md-component=\"sidebar\" data-md-type=\"navigation\" {{ hidden }}> <div class=\"md-sidebar__scrollwrap\"> <div class=\"md-sidebar__inner\"> {% include \"partials/nav.html\" %} @@ -143,7 +143,7 @@ {% if page and page.meta and page.meta.hide %} {% set hidden = \"hidden\" if \"toc\" in page.meta.hide %} {% endif %} - <div class=\"md-sidebar md-sidebar--secondary\" data-md-component=\"toc\" {{ hidden }}> + <div class=\"md-sidebar md-sidebar--secondary\" data-md-component=\"sidebar\" data-md-type=\"toc\" {{ hidden }}> <div class=\"md-sidebar__scrollwrap\"> <div class=\"md-sidebar__inner\"> {% include \"partials/toc.html\" %} @@ -152,7 +152,7 @@ </div> {% endif %} {% endblock %} - <div class=\"md-content\"> + <div class=\"md-content\" data-md-component=\"content\"> <article class=\"md-content__inner md-typeset\"> {% block content %} {% if page.edit_url %} @@ -183,10 +183,18 @@ {% include \"partials/footer.html\" %} {% endblock %} </div> - {% block scripts %} - <script src=\"{{ 'assets/javascripts/vendor.18f0862e.min.js' | url }}\"></script> - <script src=\"{{ 'assets/javascripts/bundle.994580cf.min.js' | url }}\"></script> - {%- set translations = {} -%} + <div class=\"md-dialog\" data-md-component=\"dialog\"> + <div class=\"md-dialog__inner md-typeset\"></div> + </div> + {% block config %} + {%- set app = { + \"base\": base_url, + \"features\": features, + \"translations\": {}, + \"search\": \"assets/javascripts/workers/search.217ffd95.min.js\" | url, + \"version\": config.extra.version or None + } -%} + {%- set translations = app.translations -%} {%- for key in [ \"clipboard.copy\", \"clipboard.copied\", @@ -204,19 +212,12 @@ ] -%} {%- set _ = translations.update({ key: lang.t(key) }) -%} {%- endfor -%} - <script id=\"__lang\" type=\"application/json\"> - {{- translations | tojson -}} - </script> - {% block config %}{% endblock %} - <script> - app = initialize({ - base: \"{{ base_url }}\", - features: {{ features or [] | tojson }}, - search: Object.assign({ - worker: \"{{ 'assets/javascripts/worker/search.9c0e82ba.min.js' | url }}\" - }, typeof search !== \"undefined\" && search) - }) + <script id=\"__config\" type=\"application/json\"> + {{- app | tojson -}} </script> + {% endblock %} + {% block scripts %} + <script src=\"{{ 'assets/javascripts/bundle.926459b3.min.js' | url }}\"></script> {% for path in config[\"extra_javascript\"] %} <script src=\"{{ path | url }}\"></script> {% endfor %} - <div class=\"md-footer-nav\"> - <nav class=\"md-footer-nav__inner md-grid\" aria-label=\"{{ lang.t('footer.title') }}\"> - {% if page.previous_page %} - <a href=\"{{ page.previous_page.url | url }}\" class=\"md-footer-nav__link md-footer-nav__link--prev\" rel=\"prev\"> - <div class=\"md-footer-nav__button md-icon\"> - {% include \".icons/material/arrow-left.svg\" %} - </div> - <div class=\"md-footer-nav__title\"> - <div class=\"md-ellipsis\"> - <span class=\"md-footer-nav__direction\"> - {{ lang.t(\"footer.previous\") }} - </span> - {{ page.previous_page.title }} - </div> - </div> - </a> - {% endif %} - {% if page.next_page %} - <a href=\"{{ page.next_page.url | url }}\" class=\"md-footer-nav__link md-footer-nav__link--next\" rel=\"next\"> - <div class=\"md-footer-nav__title\"> - <div class=\"md-ellipsis\"> - <span class=\"md-footer-nav__direction\"> - {{ lang.t(\"footer.next\") }} - </span> - {{ page.next_page.title }} - </div> + <nav class=\"md-footer__inner md-grid\" aria-label=\"{{ lang.t('footer.title') }}\"> + {% if page.previous_page %} + <a href=\"{{ page.previous_page.url | url }}\" class=\"md-footer__link md-footer__link--prev\" rel=\"prev\"> + <div class=\"md-footer__button md-icon\"> + {% include \".icons/material/arrow-left.svg\" %} + </div> + <div class=\"md-footer__title\"> + <div class=\"md-ellipsis\"> + <span class=\"md-footer__direction\"> + {{ lang.t(\"footer.previous\") }} + </span> + {{ page.previous_page.title }} </div> - <div class=\"md-footer-nav__button md-icon\"> - {% include \".icons/material/arrow-right.svg\" %} + </div> + </a> + {% endif %} + {% if page.next_page %} + <a href=\"{{ page.next_page.url | url }}\" class=\"md-footer__link md-footer__link--next\" rel=\"next\"> + <div class=\"md-footer__title\"> + <div class=\"md-ellipsis\"> + <span class=\"md-footer__direction\"> + {{ lang.t(\"footer.next\") }} + </span> + {{ page.next_page.title }} </div> - </a> - {% endif %} - </nav> - </div> + </div> + <div class=\"md-footer__button md-icon\"> + {% include \".icons/material/arrow-right.svg\" %} + </div> + </a> + {% endif %} + </nav> {% endif %} <div class=\"md-footer-meta md-typeset\"> <div class=\"md-footer-meta__inner md-grid\"> @@ -6,21 +6,21 @@ {% set site_url = site_url ~ \"/index.html\" %} {% endif %} <header class=\"md-header\" data-md-component=\"header\"> - <nav class=\"md-header-nav md-grid\" aria-label=\"{{ lang.t('header.title') }}\"> - <a href=\"{{ site_url }}\" title=\"{{ config.site_name | e }}\" class=\"md-header-nav__button md-logo\" aria-label=\"{{ config.site_name }}\"> + <nav class=\"md-header__inner md-grid\" aria-label=\"{{ lang.t('header.title') }}\"> + <a href=\"{{ site_url }}\" title=\"{{ config.site_name | e }}\" class=\"md-header__button md-logo\" aria-label=\"{{ config.site_name }}\"> {% include \"partials/logo.html\" %} </a> - <label class=\"md-header-nav__button md-icon\" for=\"__drawer\"> + <label class=\"md-header__button md-icon\" for=\"__drawer\"> {% include \".icons/material/menu\" ~ \".svg\" %} </label> - <div class=\"md-header-nav__title\" data-md-component=\"header-title\"> - <div class=\"md-header-nav__ellipsis\"> - <div class=\"md-header-nav__topic\"> + <div class=\"md-header__title\" data-md-component=\"header-title\"> + <div class=\"md-header__ellipsis\"> + <div class=\"md-header__topic\"> <span class=\"md-ellipsis\"> {{ config.site_name }} </span> </div> - <div class=\"md-header-nav__topic\"> + <div class=\"md-header__topic\" data-md-component=\"header-topic\"> <span class=\"md-ellipsis\"> {% if page and page.meta and page.meta.title %} {{ page.meta.title }} @@ -31,14 +31,35 @@ </div> </div> </div> + <div class=\"md-header__options\"> + {% if config.extra.alternate %} + <div class=\"md-select\"> + {% set icon = config.theme.icon.alternate or \"material/translate\" %} + <span class=\"md-header__button md-icon\"> + {% include \".icons/\" ~ icon ~ \".svg\" %} + </span> + <div class=\"md-select__inner\"> + <ul class=\"md-select__list\"> + {% for alt in config.extra.alternate %} + <li class=\"md-select__item\"> + <a href=\"{{ alt.link | url }}\" class=\"md-select__link\"> + {{ alt.name }} + </a> + </li> + {% endfor %} + </ul> + </div> + </div> + {% endif %} + </div> {% if \"search\" in config[\"plugins\"] %} - <label class=\"md-header-nav__button md-icon\" for=\"__search\"> + <label class=\"md-header__button md-icon\" for=\"__search\"> {% include \".icons/material/magnify.svg\" %} </label> {% include \"partials/search.html\" %} {% endif %} {% if config.repo_url %} - <div class=\"md-header-nav__source\"> + <div class=\"md-header__source\"> {% include \"partials/source.html\" %} </div> {% endif %} @@ -4,5 +4,5 @@ {% import \"partials/language.html\" as lang with context %} -<a href=\"{{ config.repo_url }}\" title=\"{{ lang.t('source.link.title') }}\" class=\"md-source\"> +<a href=\"{{ config.repo_url }}\" title=\"{{ lang.t('source.link.title') }}\" class=\"md-source\" data-md-component=\"source\"> <div class=\"md-source__icon md-icon\"> {% set icon = config.theme.icon.repo or \"fontawesome/brands/git-alt\" %} {% include \".icons/\" ~ icon ~ \".svg\" %} @@ -12,7 +12,7 @@ <span class=\"md-nav__icon md-icon\"></span> {{ lang.t(\"toc.title\") }} </label> - <ul class=\"md-nav__list\" data-md-scrollfix> + <ul class=\"md-nav__list\" data-md-component=\"toc\" data-md-scrollfix> {% for toc_item in toc %} {% include \"partials/toc-item.html\" %} {% endfor %}","title":"Changes to *.html files"},{"location":"upgrade/#upgrading-from-5x-to-6x","text":"","title":"Upgrading from 5.x to 6.x"},{"location":"upgrade/#whats-new_2","text":"Improved search result look and feel Improved search result stability while typing Improved search result grouping (pages + headings) Improved search result relevance and scoring Added display of missing query terms to search results Reduced size of vendor bundle by 25% (84kb \u2192 67kb) Reduced size of the Docker image to improve CI build performance Removed hero partial in favor of custom implementation Removed deprecated front matter features","title":"What's new?"},{"location":"upgrade/#changes-to-mkdocsyml_2","text":"Following is a list of changes that need to be made to mkdocs.yml . Note that you only have to adjust the value if you defined it, so if your configuration does not contain the key, you can skip it.","title":"Changes to mkdocs.yml"},{"location":"upgrade/#themefeatures","text":"All feature flags that can be set from mkdocs.yml , like tabs and instant loading , are now prefixed with the name of the component or function they apply to, e.g. navigation.* : 6.x 5.x theme : features : - navigation.tabs - navigation.instant theme : features : - tabs - instant","title":"theme.features"},{"location":"upgrade/#changes-to-html-files_2","text":"The templates have undergone a set of changes to make them future-proof. If you've used theme extension to override a block or template, make sure that it matches the new structure: If you've overridden a block , check base.html for potential changes If you've overridden a template , check the respective *.html file for potential changes base.html partials/hero.html partials/source-link @@ -22,13 +22,6 @@ {% import \"partials/language.html\" as lang with context %} -<!-- Theme options --> -{% set palette = config.theme.palette %} -{% if not palette is mapping %} - {% set palette = palette | first %} -{% endif %} -{% set font = config.theme.font %} - <!doctype html> <html lang=\"{{ lang.t('language') }}\" class=\"no-js\"> <head> @@ -45,21 +38,8 @@ <meta name=\"description\" content=\"{{ config.site_description }}\" /> {% endif %} - <!-- Redirect --> - {% if page and page.meta and page.meta.redirect %} - <script> - var anchor = window.location.hash.substr(1) - location.href = '{{ page.meta.redirect }}' + - (anchor ? '#' + anchor : '') - </script> - - <!-- Fallback in case JavaScript is not available --> - <meta http-equiv=\"refresh\" content=\"0; url={{ page.meta.redirect }}\" /> - <meta name=\"robots\" content=\"noindex\" /> - <link rel=\"canonical\" href=\"{{ page.meta.redirect }}\" /> - <!-- Canonical --> - {% elif page.canonical_url %} + {% if page.canonical_url %} <link rel=\"canonical\" href=\"{{ page.canonical_url }}\" /> {% endif %} @@ -96,20 +76,21 @@ <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/main.css' | url }}\" /> <!-- Extra color palette --> - {% if palette.scheme or palette.primary or palette.accent %} + {% if config.theme.palette %} + {% set palette = config.theme.palette %} <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/palette.css' | url }}\" /> - {% endif %} - <!-- Theme-color meta tag for Android --> - {% if palette.primary %} - {% import \"partials/palette.html\" as map %} - {% set primary = map.primary( - palette.primary | replace(\" \", \"-\") | lower - ) %} - <meta name=\"theme-color\" content=\"{{ primary }}\" /> + <!-- Theme-color meta tag for Android --> + {% if palette.primary %} + {% import \"partials/palette.html\" as map %} + {% set primary = map.primary( + palette.primary | replace(\" \", \"-\") | lower + ) %} + <meta name=\"theme-color\" content=\"{{ primary }}\" /> + {% endif %} {% endif %} {% endblock %} @@ -120,7 +101,8 @@ {% block fonts %} <!-- Load fonts from Google --> - {% if font != false %} + {% if config.theme.font != false %} + {% set font = config.theme.font %} <link href=\"https://fonts.gstatic.com\" rel=\"preconnect\" crossorigin /> <link rel=\"stylesheet\" @@ -169,8 +151,12 @@ <!-- Text direction and color palette, if defined --> {% set direction = config.theme.direction or lang.t('direction') %} - {% if palette.scheme or palette.primary or palette.accent %} - {% set scheme = palette.scheme | lower %} + {% if config.theme.palette %} + {% set palette = config.theme.palette %} + {% if not palette is mapping %} + {% set palette = palette | first %} + {% endif %} + {% set scheme = palette.scheme | replace(\" \", \"-\") | lower %} {% set primary = palette.primary | replace(\" \", \"-\") | lower %} {% set accent = palette.accent | replace(\" \", \"-\") | lower %} <body @@ -179,18 +165,19 @@ data-md-color-primary=\"{{ primary }}\" data-md-color-accent=\"{{ accent }}\" > + + <!-- Experimental: set color scheme based on preference --> + {% if \"preference\" == scheme %} + <script> + if (matchMedia(\"(prefers-color-scheme: dark)\").matches) + document.body.setAttribute(\"data-md-color-scheme\", \"slate\") + </script> + {% endif %} + {% else %} <body dir=\"{{ direction }}\"> {% endif %} - <!-- Experimental: set color scheme based on preference --> - {% if \"preference\" == palette.scheme %} - <script> - if (matchMedia(\"(prefers-color-scheme: dark)\").matches) - document.body.setAttribute(\"data-md-color-scheme\", \"slate\") - </script> - {% endif %} - <!-- State toggles - we need to set autocomplete=\"off\" in order to reset the drawer on back button invocation in some browsers @@ -243,15 +230,11 @@ <div class=\"md-container\" data-md-component=\"container\"> <!-- Hero teaser --> - {% block hero %} - {% if page and page.meta and page.meta.hero %} - {% include \"partials/hero.html\" with context %} - {% endif %} - {% endblock %} + {% block hero %}{% endblock %} <!-- Tabs navigation --> {% block tabs %} - {% if \"tabs\" in config.theme.features %} + {% if \"navigation.tabs\" in config.theme.features %} {% include \"partials/tabs.html\" %} {% endif %} {% endblock %} @@ -310,13 +293,6 @@ </a> {% endif %} - <!-- Link to source file --> - {% block source %} - {% if page and page.meta and page.meta.source %} - {% include \"partials/source-link.html\" %} - {% endif %} - {% endblock %} - <!-- Hack: check whether the content contains a h1 headline. If it doesn't, the page title (or respectively site name) is used @@ -370,7 +346,10 @@ \"search.result.placeholder\", \"search.result.none\", \"search.result.one\", - \"search.result.other\" + \"search.result.other\", + \"search.result.more.one\", + \"search.result.more.other\", + \"search.result.term.missing\" ] -%} {%- set _ = translations.update({ key: lang.t(key) }) -%} {%- endfor -%} @@ -1,12 +0,0 @@ -{#- - This file was automatically generated - do not edit --#} -{% set class = \"md-hero\" %} -{% if \"tabs\" not in config.theme.features %} - {% set class = \"md-hero md-hero--expand\" %} -{% endif %} -<div class=\"{{ class }}\" data-md-component=\"hero\"> - <div class=\"md-hero__inner md-grid\"> - {{ page.meta.hero }} - </div> -</div> @@ -1,14 +0,0 @@ -{#- - This file was automatically generated - do not edit --#} -{% import \"partials/language.html\" as lang with context %} -{% set repo = config.repo_url %} -{% if repo | last == \"/\" %} - {% set repo = repo[:-1] %} -{% endif %} -{% set path = page.meta.path | default(\"\") %} -<a href=\"{{ [repo, path, page.meta.source] | join('/') }}\" title=\"{{ page.meta.source }}\" class=\"md-content__button md-icon\"> - {{ lang.t(\"meta.source\") }} - {% set icon = config.theme.icon.repo or \"fontawesome/brands/git-alt\" %} - {% include \".icons/\" ~ icon ~ \".svg\" %} -</a>","title":"Changes to *.html files"},{"location":"upgrade/#upgrading-from-4x-to-5x","text":"","title":"Upgrading from 4.x to 5.x"},{"location":"upgrade/#whats-new_3","text":"Reactive architecture \u2013 try app . dialog$ . next ( \"Hi!\" ) in the console Instant loading \u2013 make Material behave like a Single Page Application Improved CSS customization with CSS variables \u2013 set your brand's colors Improved CSS resilience, e.g. proper sidebar locking for customized headers Improved icon integration and configuration \u2013 now including over 5k icons Added possibility to use any icon for logo, repository and social links Search UI does not freeze anymore (moved to web worker) Search index built only once when using instant loading Improved extensible keyboard handling Support for prebuilt search indexes Support for displaying stars and forks for GitLab repositories Support for scroll snapping of sidebars and search results Reduced HTML and CSS footprint due to deprecation of Internet Explorer support Slight facelifting of some UI elements (admonitions, tables, ...)","title":"What's new?"},{"location":"upgrade/#changes-to-mkdocsyml_3","text":"Following is a list of changes that need to be made to mkdocs.yml . Note that you only have to adjust the value if you defined it, so if your configuration does not contain the key, you can skip it.","title":"Changes to mkdocs.yml"},{"location":"upgrade/#themefeature","text":"Optional features like tabs and instant loading are now implemented as flags and can be enabled by listing them in mkdocs.yml under theme.features : 5.x 4.x theme : features : - tabs - instant theme : feature : tabs : true","title":"theme.feature"},{"location":"upgrade/#themelogoicon","text":"The logo icon configuration was centralized under theme.icon.logo and can now be set to any of the icons bundled with the theme : 5.x 4.x theme : icon : logo : material/cloud theme : logo : icon : cloud","title":"theme.logo.icon"},{"location":"upgrade/#extrarepo_icon","text":"The repo icon configuration was centralized under theme.icon.repo and can now be set to any of the icons bundled with the theme : 5.x 4.x theme : icon : repo : fontawesome/brands/gitlab extra : repo_icon : gitlab","title":"extra.repo_icon"},{"location":"upgrade/#extrasearch","text":"Search is now configured as part of the plugin options . Note that the search languages must now be listed as an array of strings and the tokenizer was renamed to separator : 5.x 4.x plugins : - search : separator : '[\\s\\-\\.]+' lang : - en - de - ru extra : search : language : en, de, ru tokenizer : '[\\s\\-\\.]+'","title":"extra.search.*"},{"location":"upgrade/#extrasocial","text":"Social links stayed in the same place, but the type key was renamed to icon in order to match the new way of specifying which icon to be used: 5.x 4.x extra : social : - icon : fontawesome/brands/github-alt link : https://github.com/squidfunk extra : social : - type : github link : https://github.com/squidfunk","title":"extra.social.*"},{"location":"upgrade/#changes-to-html-files_3","text":"The templates have undergone a set of changes to make them future-proof. If you've used theme extension to override a block or template, make sure that it matches the new structure: If you've overridden a block , check base.html for potential changes If you've overridden a template , check the respective *.html file for potential changes base.html partials/footer.html partials/header.html partials/hero.html partials/language.html partials/logo.html partials/nav-item.html partials/nav.html partials/search.html partials/social.html partials/source-date.html partials/source-link.html partials/source.html partials/tabs-item.html partials/tabs.html partials/toc-item.html partials/toc.html @@ -4,7 +4,6 @@ {% import \"partials/language.html\" as lang with context %} -{% set feature = config.theme.feature %} {% set palette = config.theme.palette %} {% set font = config.theme.font %} <!doctype html> @@ -30,19 +29,6 @@ {% elif config.site_author %} <meta name=\"author\" content=\"{{ config.site_author }}\"> {% endif %} - {% for key in [ - \"clipboard.copy\", - \"clipboard.copied\", - \"search.language\", - \"search.pipeline.stopwords\", - \"search.pipeline.trimmer\", - \"search.result.none\", - \"search.result.one\", - \"search.result.other\", - \"search.tokenizer\" - ] %} - <meta name=\"lang:{{ key }}\" content=\"{{ lang.t(key) }}\"> - {% endfor %} <link rel=\"shortcut icon\" href=\"{{ config.theme.favicon | url }}\"> <meta name=\"generator\" content=\"mkdocs-{{ mkdocs_version }}, mkdocs-material-5.0.0\"> {% endblock %} @@ -56,9 +42,9 @@ {% endif %} {% endblock %} {% block styles %} - <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/application.********.css' | url }}\"> + <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/main.********.min.css' | url }}\"> {% if palette.primary or palette.accent %} - <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/application-palette.********.css' | url }}\"> + <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/palette.********.min.css' | url }}\"> {% endif %} {% if palette.primary %} {% import \"partials/palette.html\" as map %} @@ -69,20 +55,17 @@ {% endif %} {% endblock %} {% block libs %} - <script src=\"{{ 'assets/javascripts/modernizr.********.js' | url }}\"></script> {% endblock %} {% block fonts %} {% if font != false %} <link href=\"https://fonts.gstatic.com\" rel=\"preconnect\" crossorigin> <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family={{ font.text | replace(' ', '+') + ':300,400,400i,700%7C' + font.code | replace(' ', '+') }}&display=fallback\"> <style>body,input{font-family:\"{{ font.text }}\",\"Helvetica Neue\",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:\"{{ font.code }}\",\"Courier New\",Courier,monospace}</style> {% endif %} {% endblock %} - <link rel=\"stylesheet\" href=\"{{ 'assets/fonts/material-icons.css' | url }}\"> {% if config.extra.manifest %} <link rel=\"manifest\" href=\"{{ config.extra.manifest | url }}\" crossorigin=\"use-credentials\"> {% endif %} @@ -95,47 +77,50 @@ {% endblock %} {% block extrahead %}{% endblock %} </head> + {% set direction = config.theme.direction | default(lang.t('direction')) %} {% if palette.primary or palette.accent %} {% set primary = palette.primary | replace(\" \", \"-\") | lower %} {% set accent = palette.accent | replace(\" \", \"-\") | lower %} - <body dir=\"{{ lang.t('direction') }}\" data-md-color-primary=\"{{ primary }}\" data-md-color-accent=\"{{ accent }}\"> + <body dir=\"{{ direction }}\" data-md-color-primary=\"{{ primary }}\" data-md-color-accent=\"{{ accent }}\"> {% else %} - <body dir=\"{{ lang.t('direction') }}\"> + <body dir=\"{{ direction }}\"> {% endif %} - <svg class=\"md-svg\"> - <defs> - {% set platform = config.extra.repo_icon or config.repo_url %} - {% if \"github\" in platform %} - {% include \"assets/images/icons/github.f0b8504a.svg\" %} - {% elif \"gitlab\" in platform %} - {% include \"assets/images/icons/gitlab.6dd19c00.svg\" %} - {% elif \"bitbucket\" in platform %} - {% include \"assets/images/icons/bitbucket.1b09e088.svg\" %} - {% endif %} - </defs> - </svg> <input class=\"md-toggle\" data-md-toggle=\"drawer\" type=\"checkbox\" id=\"__drawer\" autocomplete=\"off\"> <input class=\"md-toggle\" data-md-toggle=\"search\" type=\"checkbox\" id=\"__search\" autocomplete=\"off\"> - <label class=\"md-overlay\" data-md-component=\"overlay\" for=\"__drawer\"></label> + <label class=\"md-overlay\" for=\"__drawer\"></label> + <div data-md-component=\"skip\"> + {% if page.toc | first is defined %} + {% set skip = page.toc | first %} + <a href=\"{{ skip.url | url }}\" class=\"md-skip\"> + {{ lang.t('skip.link.title') }} + </a> + {% endif %} + </div> + <div data-md-component=\"announce\"> + {% if self.announce() %} + <aside class=\"md-announce\"> + <div class=\"md-announce__inner md-grid md-typeset\"> + {% block announce %}{% endblock %} + </div> + </aside> + {% endif %} + </div> {% block header %} {% include \"partials/header.html\" %} {% endblock %} - <div class=\"md-container\"> + <div class=\"md-container\" data-md-component=\"container\"> {% block hero %} {% if page and page.meta and page.meta.hero %} {% include \"partials/hero.html\" with context %} {% endif %} {% endblock %} - {% if feature.tabs %} - {% include \"partials/tabs.html\" %} - {% endif %} + {% block tabs %} + {% if \"tabs\" in config.theme.features %} + {% include \"partials/tabs.html\" %} + {% endif %} + {% endblock %} - <main class=\"md-main\" role=\"main\"> - <div class=\"md-main__inner md-grid\" data-md-component=\"container\"> + <main class=\"md-main\" data-md-component=\"main\"> + <div class=\"md-main__inner md-grid\"> {% block site_nav %} {% if nav %} <div class=\"md-sidebar md-sidebar--primary\" data-md-component=\"navigation\"> @@ -160,41 +141,25 @@ <article class=\"md-content__inner md-typeset\"> {% block content %} {% if page.edit_url %} - <a href=\"{{ page.edit_url }}\" title=\"{{ lang.t('edit.link.title') }}\" class=\"md-icon md-content__icon\">&#xE3C9;</a> + <a href=\"{{ page.edit_url }}\" title=\"{{ lang.t('edit.link.title') }}\" class=\"md-content__button md-icon\"> + {% include \".icons/material/pencil.svg\" %} + </a> {% endif %} + {% block source %} + {% if page and page.meta and page.meta.source %} + {% include \"partials/source-link.html\" %} + {% endif %} + {% endblock %} {% if not \"\\x3ch1\" in page.content %} <h1>{{ page.title | default(config.site_name, true)}}</h1> {% endif %} {{ page.content }} - {% block source %} - {% if page and page.meta and page.meta.source %} - <h2 id=\"__source\">{{ lang.t(\"meta.source\") }}</h2> - {% set repo = config.repo_url %} - {% if repo | last == \"/\" %} - {% set repo = repo[:-1] %} - {% endif %} - {% set path = page.meta.path | default([\"\"]) %} - {% set file = page.meta.source %} - <a href=\"{{ [repo, path, file] | join('/') }}\" title=\"{{ file }}\" class=\"md-source-file\"> - {{ file }} - </a> - {% endif %} - {% endblock %} + {% if page and page.meta %} + {% if page.meta.git_revision_date_localized or + page.meta.revision_date + %} + {% include \"partials/source-date.html\" %} - {% if page and page.meta and ( - page.meta.git_revision_date_localized or - page.meta.revision_date - ) %} - {% set label = lang.t(\"source.revision.date\") %} - <hr> - <div class=\"md-source-date\"> - <small> - {% if page.meta.git_revision_date_localized %} - {{ label }}: {{ page.meta.git_revision_date_localized }} - {% elif page.meta.revision_date %} - {{ label }}: {{ page.meta.revision_date }} - {% endif %} - </small> - </div> {% endif %} {% endblock %} {% block disqus %} @@ -208,29 +174,35 @@ {% include \"partials/footer.html\" %} {% endblock %} </div> {% block scripts %} - <script src=\"{{ 'assets/javascripts/application.********.js' | url }}\"></script> - {% if lang.t(\"search.language\") != \"en\" %} - {% set languages = lang.t(\"search.language\").split(\",\") %} - {% if languages | length and languages[0] != \"\" %} - {% set path = \"assets/javascripts/lunr/\" %} - <script src=\"{{ (path ~ 'lunr.stemmer.support.js') | url }}\"></script> - {% for language in languages | map(\"trim\") %} - {% if language != \"en\" %} - {% if language == \"ja\" %} - <script src=\"{{ (path ~ 'tinyseg.js') | url }}\"></script> - {% endif %} - {% if language in (\"ar\", \"da\", \"de\", \"es\", \"fi\", \"fr\", \"hu\", \"it\", \"ja\", \"nl\", \"no\", \"pt\", \"ro\", \"ru\", \"sv\", \"th\", \"tr\", \"vi\") %} - <script src=\"{{ (path ~ 'lunr.' ~ language ~ '.js') | url }}\"></script> - {% endif %} - {% endif %} - {% endfor %} - {% if languages | length > 1 %} - <script src=\"{{ (path ~ 'lunr.multi.js') | url }}\"></script> - {% endif %} - {% endif %} - {% endif %} - <script>app.initialize({version:\"{{ mkdocs_version }}\",url:{base:\"{{ base_url }}\"}})</script> + <script src=\"{{ 'assets/javascripts/vendor.********.min.js' | url }}\"></script> + <script src=\"{{ 'assets/javascripts/bundle.********.min.js' | url }}\"></script> + {%- set translations = {} -%} + {%- for key in [ + \"clipboard.copy\", + \"clipboard.copied\", + \"search.config.lang\", + \"search.config.pipeline\", + \"search.config.separator\", + \"search.result.placeholder\", + \"search.result.none\", + \"search.result.one\", + \"search.result.other\" + ] -%} + {%- set _ = translations.update({ key: lang.t(key) }) -%} + {%- endfor -%} + <script id=\"__lang\" type=\"application/json\"> + {{- translations | tojson -}} + </script> + {% block config %}{% endblock %} + <script> + app = initialize({ + base: \"{{ base_url }}\", + features: {{ config.theme.features | tojson }}, + search: Object.assign({ + worker: \"{{ 'assets/javascripts/worker/search.********.min.js' | url }}\" + }, typeof search !== \"undefined\" && search) + }) + </script> {% for path in config[\"extra_javascript\"] %} <script src=\"{{ path | url }}\"></script> {% endfor %} @@ -5,34 +5,34 @@ <div class=\"md-footer-nav\"> - <nav class=\"md-footer-nav__inner md-grid\"> + <nav class=\"md-footer-nav__inner md-grid\" aria-label=\"{{ lang.t('footer.title') }}\"> {% if page.previous_page %} - <a href=\"{{ page.previous_page.url | url }}\" title=\"{{ page.previous_page.title | striptags }}\" class=\"md-flex md-footer-nav__link md-footer-nav__link--prev\" rel=\"prev\"> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <i class=\"md-icon md-icon--arrow-back md-footer-nav__button\"></i> + <a href=\"{{ page.previous_page.url | url }}\" title=\"{{ page.previous_page.title | striptags }}\" class=\"md-footer-nav__link md-footer-nav__link--prev\" rel=\"prev\"> + <div class=\"md-footer-nav__button md-icon\"> + {% include \".icons/material/arrow-left.svg\" %} </div> - <div class=\"md-flex__cell md-flex__cell--stretch md-footer-nav__title\"> - <span class=\"md-flex__ellipsis\"> + <div class=\"md-footer-nav__title\"> + <div class=\"md-ellipsis\"> <span class=\"md-footer-nav__direction\"> {{ lang.t(\"footer.previous\") }} </span> {{ page.previous_page.title }} - </span> + </div> </div> </a> {% endif %} {% if page.next_page %} - <a href=\"{{ page.next_page.url | url }}\" title=\"{{ page.next_page.title | striptags }}\" class=\"md-flex md-footer-nav__link md-footer-nav__link--next\" rel=\"next\"> - <div class=\"md-flex__cell md-flex__cell--stretch md-footer-nav__title\"> - <span class=\"md-flex__ellipsis\"> + <a href=\"{{ page.next_page.url | url }}\" title=\"{{ page.next_page.title | striptags }}\" class=\"md-footer-nav__link md-footer-nav__link--next\" rel=\"next\"> + <div class=\"md-footer-nav__title\"> + <div class=\"md-ellipsis\"> <span class=\"md-footer-nav__direction\"> {{ lang.t(\"footer.next\") }} </span> {{ page.next_page.title }} - </span> + </div> </div> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <i class=\"md-icon md-icon--arrow-forward md-footer-nav__button\"></i> + <div class=\"md-footer-nav__button md-icon\"> + {% include \".icons/material/arrow-right.svg\" %} </div> </a> {% endif %} @@ -4,51 +4,43 @@ <header class=\"md-header\" data-md-component=\"header\"> - <nav class=\"md-header-nav md-grid\"> - <div class=\"md-flex\"> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" aria-label=\"{{ config.site_name }}\" class=\"md-header-nav__button md-logo\"> - {% if config.theme.logo.icon %} - <i class=\"md-icon\">{{ config.theme.logo.icon }}</i> - {% else %} - <img alt=\"logo\" src=\"{{ config.theme.logo | url }}\" width=\"24\" height=\"24\"> - {% endif %} - </a> - </div> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <label class=\"md-icon md-icon--menu md-header-nav__button\" for=\"__drawer\"></label> - </div> - <div class=\"md-flex__cell md-flex__cell--stretch\"> - <div class=\"md-flex__ellipsis md-header-nav__title\" data-md-component=\"title\"> - {% if config.site_name == page.title %} - {{ config.site_name }} - {% else %} - <span class=\"md-header-nav__topic\"> - {{ config.site_name }} - </span> - <span class=\"md-header-nav__topic\"> - {% if page and page.meta and page.meta.title %} - {{ page.meta.title }} - {% else %} - {{ page.title }} - {% endif %} - </span> - {% endif %} + <nav class=\"md-header-nav md-grid\" aria-label=\"{{ lang.t('header.title') }}\"> + <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" class=\"md-header-nav__button md-logo\" aria-label=\"{{ config.site_name }}\"> + {% include \"partials/logo.html\" %} + </a> + <label class=\"md-header-nav__button md-icon\" for=\"__drawer\"> + {% include \".icons/material/menu\" ~ \".svg\" %} + </label> + <div class=\"md-header-nav__title\" data-md-component=\"header-title\"> + {% if config.site_name == page.title %} + <div class=\"md-header-nav__ellipsis md-ellipsis\"> + {{ config.site_name }} </div> - </div> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - {% if \"search\" in config[\"plugins\"] %} - <label class=\"md-icon md-icon--search md-header-nav__button\" for=\"__search\"></label> - {% include \"partials/search.html\" %} - {% endif %} - </div> - {% if config.repo_url %} - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <div class=\"md-header-nav__source\"> - {% include \"partials/source.html\" %} - </div> + {% else %} + <div class=\"md-header-nav__ellipsis\"> + <span class=\"md-header-nav__topic md-ellipsis\"> + {{ config.site_name }} + </span> + <span class=\"md-header-nav__topic md-ellipsis\"> + {% if page and page.meta and page.meta.title %} + {{ page.meta.title }} + {% else %} + {{ page.title }} + {% endif %} + </span> </div> {% endif %} </div> + {% if \"search\" in config[\"plugins\"] %} + <label class=\"md-header-nav__button md-icon\" for=\"__search\"> + {% include \".icons/material/magnify.svg\" %} + </label> + {% include \"partials/search.html\" %} + {% endif %} + {% if config.repo_url %} + <div class=\"md-header-nav__source\"> + {% include \"partials/source.html\" %} + </div> + {% endif %} </nav> </header> @@ -4,9 +4,8 @@ -{% set feature = config.theme.feature %} {% set class = \"md-hero\" %} -{% if not feature.tabs %} +{% if \"tabs\" not in config.theme.features %} {% set class = \"md-hero md-hero--expand\" %} {% endif %} <div class=\"{{ class }}\" data-md-component=\"hero\"> @@ -4,12 +4,4 @@ {% import \"partials/language/\" + config.theme.language + \".html\" as lang %} {% import \"partials/language/en.html\" as fallback %} -{% macro t(key) %}{{ { - \"direction\": config.theme.direction, - \"search.language\": ( - config.extra.search | default({}) - ).language, - \"search.tokenizer\": ( - config.extra.search | default({}) - ).tokenizer | default(\"\", true), -}[key] or lang.t(key) or fallback.t(key) }}{% endmacro %} +{% macro t(key) %}{{ lang.t(key) | default(fallback.t(key)) }}{% endmacro %} @@ -0,0 +1,9 @@ +{#- + This file was automatically generated - do not edit +-#} +{% if config.theme.logo %} + <img src=\"{{ config.theme.logo | url }}\" alt=\"logo\"> +{% else %} + {% set icon = config.theme.icon.logo or \"material/library\" %} + {% include \".icons/\" ~ icon ~ \".svg\" %} +{% endif %} @@ -14,9 +14,15 @@ {% endif %} <label class=\"md-nav__link\" for=\"{{ path }}\"> {{ nav_item.title }} + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/chevron-right.svg\" %} + </span> </label> - <nav class=\"md-nav\" data-md-component=\"collapsible\" data-md-level=\"{{ level }}\"> + <nav class=\"md-nav\" aria-label=\"{{ nav_item.title }}\" data-md-level=\"{{ level }}\"> <label class=\"md-nav__title\" for=\"{{ path }}\"> + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/arrow-left.svg\" %} + </span> {{ nav_item.title }} </label> <ul class=\"md-nav__list\" data-md-scrollfix> @@ -39,6 +45,9 @@ {% if toc | first is defined %} <label class=\"md-nav__link md-nav__link--active\" for=\"__toc\"> {{ nav_item.title }} + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/table-of-contents.svg\" %} + </span> </label> {% endif %} <a href=\"{{ nav_item.url | url }}\" title=\"{{ nav_item.title | striptags }}\" class=\"md-nav__link md-nav__link--active\"> @@ -4,14 +4,10 @@ -<nav class=\"md-nav md-nav--primary\" data-md-level=\"0\"> - <label class=\"md-nav__title md-nav__title--site\" for=\"__drawer\"> - <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" class=\"md-nav__button md-logo\"> - {% if config.theme.logo.icon %} - <i class=\"md-icon\">{{ config.theme.logo.icon }}</i> - {% else %} - <img alt=\"logo\" src=\"{{ config.theme.logo | url }}\" width=\"48\" height=\"48\"> - {% endif %} +<nav class=\"md-nav md-nav--primary\" aria-label=\"{{ lang.t('nav.title') }}\" data-md-level=\"0\"> + <label class=\"md-nav__title\" for=\"__drawer\"> + <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" class=\"md-nav__button md-logo\" aria-label=\"{{ config.site_name }}\"> + {% include \"partials/logo.html\" %} </a> {{ config.site_name }} </label> @@ -6,15 +6,18 @@ <label class=\"md-search__overlay\" for=\"__search\"></label> <div class=\"md-search__inner\" role=\"search\"> <form class=\"md-search__form\" name=\"search\"> - <input type=\"text\" class=\"md-search__input\" name=\"query\" aria-label=\"Search\" placeholder=\"{{ lang.t('search.placeholder') }}\" autocapitalize=\"off\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" data-md-component=\"query\" data-md-state=\"active\"> + <input type=\"text\" class=\"md-search__input\" name=\"query\" aria-label=\"{{ lang.t('search.placeholder') }}\" placeholder=\"{{ lang.t('search.placeholder') }}\" autocapitalize=\"off\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" data-md-component=\"search-query\" data-md-state=\"active\"> <label class=\"md-search__icon md-icon\" for=\"__search\"> + {% include \".icons/material/magnify.svg\" %} + {% include \".icons/material/arrow-left.svg\" %} </label> - <button type=\"reset\" class=\"md-icon md-search__icon\" data-md-component=\"reset\" tabindex=\"-1\"> - &#xE5CD; + <button type=\"reset\" class=\"md-search__icon md-icon\" aria-label=\"{{ lang.t('search.reset') }}\" data-md-component=\"search-reset\" tabindex=\"-1\"> + {% include \".icons/material/close.svg\" %} </button> </form> <div class=\"md-search__output\"> <div class=\"md-search__scrollwrap\" data-md-scrollfix> - <div class=\"md-search-result\" data-md-component=\"result\"> + <div class=\"md-search-result\" data-md-component=\"search-result\"> <div class=\"md-search-result__meta\"> {{ lang.t(\"search.result.placeholder\") }} </div> @@ -4,9 +4,12 @@ {% if config.extra.social %} <div class=\"md-footer-social\"> - <link rel=\"stylesheet\" href=\"{{ 'assets/fonts/font-awesome.css' | url }}\"> {% for social in config.extra.social %} - <a href=\"{{ social.link }}\" target=\"_blank\" rel=\"noopener\" title=\"{{ social.type }}\" class=\"md-footer-social__link fa fa-{{ social.type }}\"></a> + {% set _,rest = social.link.split(\"//\") %} + {% set domain = rest.split(\"/\")[0] %} + <a href=\"{{ social.link }}\" target=\"_blank\" rel=\"noopener\" title=\"{{ domain }}\" class=\"md-footer-social__link\"> + {% include \".icons/\" ~ social.icon ~ \".svg\" %} + </a> {% endfor %} </div> {% endif %} @@ -0,0 +1,15 @@ +{#- + This file was automatically generated - do not edit +-#} +{% import \"partials/language.html\" as lang with context %} +{% set label = lang.t(\"source.revision.date\") %} +<hr> +<div class=\"md-source-date\"> + <small> + {% if page.meta.git_revision_date_localized %} + {{ label }}: {{ page.meta.git_revision_date_localized }} + {% elif page.meta.revision_date %} + {{ label }}: {{ page.meta.revision_date }} + {% endif %} + </small> +</div> @@ -0,0 +1,13 @@ +{#- + This file was automatically generated - do not edit +-#} +{% import \"partials/language.html\" as lang with context %} +{% set repo = config.repo_url %} +{% if repo | last == \"/\" %} + {% set repo = repo[:-1] %} +{% endif %} +{% set path = page.meta.path | default([\"\"]) %} +<a href=\"{{ [repo, path, page.meta.source] | join('/') }}\" title=\"{{ file }}\" class=\"md-content__button md-icon\"> + {{ lang.t(\"meta.source\") }} + {% include \".icons/\" ~ config.theme.icon.repo ~ \".svg\" %} +</a> @@ -4,24 +4,11 @@ {% import \"partials/language.html\" as lang with context %} -{% set platform = config.extra.repo_icon or config.repo_url %} -{% if \"github\" in platform %} - {% set repo_type = \"github\" %} -{% elif \"gitlab\" in platform %} - {% set repo_type = \"gitlab\" %} -{% elif \"bitbucket\" in platform %} - {% set repo_type = \"bitbucket\" %} -{% else %} - {% set repo_type = \"\" %} -{% endif %} -<a href=\"{{ config.repo_url }}\" title=\"{{ lang.t('source.link.title') }}\" class=\"md-source\" data-md-source=\"{{ repo_type }}\"> - {% if repo_type %} - <div class=\"md-source__icon\"> - <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"> - <use xlink:href=\"#__{{ repo_type }}\" width=\"24\" height=\"24\"></use> - </svg> - </div> - {% endif %} +<a href=\"{{ config.repo_url }}\" title=\"{{ lang.t('source.link.title') }}\" class=\"md-source\"> + <div class=\"md-source__icon md-icon\"> + {% set icon = config.theme.icon.repo or \"fontawesome/brands/git-alt\" %} + {% include \".icons/\" ~ icon ~ \".svg\" %} + </div> <div class=\"md-source__repository\"> {{ config.repo_name }} </div> @@ -4,7 +4,7 @@ -{% if nav_item.is_homepage %} +{% if nav_item.is_homepage or nav_item.url == \"index.html\" %} <li class=\"md-tabs__item\"> {% if not page.ancestors | length and nav | selectattr(\"url\", page.url) %} <a href=\"{{ nav_item.url | url }}\" class=\"md-tabs__link md-tabs__link--active\"> @@ -5,7 +5,7 @@ {% if page.ancestors | length > 0 %} {% set class = \"md-tabs md-tabs--active\" %} {% endif %} -<nav class=\"{{ class }}\" data-md-component=\"tabs\"> +<nav class=\"{{ class }}\" aria-label=\"{{ lang.t('tabs.title') }}\" data-md-component=\"tabs\"> <div class=\"md-tabs__inner md-grid\"> <ul class=\"md-tabs__list\"> {% for nav_item in nav %} @@ -6,7 +6,7 @@ {{ toc_item.title }} </a> {% if toc_item.children %} - <nav class=\"md-nav\"> + <nav class=\"md-nav\" aria-label=\"{{ toc_item.title }}\"> <ul class=\"md-nav__list\"> {% for toc_item in toc_item.children %} {% include \"partials/toc-item.html\" %} @@ -4,35 +4,22 @@ {% import \"partials/language.html\" as lang with context %} -<nav class=\"md-nav md-nav--secondary\"> +<nav class=\"md-nav md-nav--secondary\" aria-label=\"{{ lang.t('toc.title') }}\"> {% endif %} {% if toc | first is defined %} <label class=\"md-nav__title\" for=\"__toc\"> + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/arrow-left.svg\" %} + </span> {{ lang.t(\"toc.title\") }} </label> <ul class=\"md-nav__list\" data-md-scrollfix> {% for toc_item in toc %} {% include \"partials/toc-item.html\" %} {% endfor %} - {% if page.meta.source and page.meta.source | length > 0 %} - <li class=\"md-nav__item\"> - <a href=\"#__source\" class=\"md-nav__link md-nav__link--active\"> - {{ lang.t(\"meta.source\") }} - </a> - </li> - {% endif %} - {% set disqus = config.extra.disqus %} - {% if page and page.meta and page.meta.disqus is string %} - {% set disqus = page.meta.disqus %} - {% endif %} - {% if not page.is_homepage and disqus %} - <li class=\"md-nav__item\"> - <a href=\"#__comments\" class=\"md-nav__link md-nav__link--active\"> - {{ lang.t(\"meta.comments\") }} - </a> - </li> - {% endif %} </ul> {% endif %} </nav>","title":"Changes to *.html files"},{"location":"upgrade/#upgrading-from-3x-to-4x","text":"","title":"Upgrading from 3.x to 4.x"},{"location":"upgrade/#whats-new_4","text":"Material for MkDocs 4 fixes incorrect layout on Chinese systems. The fix includes a mandatory change of the base font-size from 10px to 20px which means all rem values needed to be updated. Within the theme, px to rem calculation is now encapsulated in a new function called px2rem which is part of the SASS code base. If you use Material for MkDocs with custom CSS that is based on rem values, note that those values must now be divided by 2. Now, 1.0rem doesn't map to 10px , but 20px . To learn more about the problem and implications, please refer to #911 in which the problem was discovered and fixed.","title":"What's new?"},{"location":"upgrade/#changes-to-mkdocsyml_4","text":"None.","title":"Changes to mkdocs.yml"},{"location":"upgrade/#changes-to-html-files_4","text":"None.","title":"Changes to *.html files"},{"location":"architecture/concept/","text":"Concept \u00b6 SoDa-TAP was designed based on two main concepts: microservices and cloud. From the microservices perspective, it supports further connectivity and compatibility with other software that has the capability to communicate with external services through a network connection. This capability is possible thanks to the containerization of its services through Docker . And from the cloud side, it is capable to be deployed locally or in the cloud through virtualization, which is possible thanks to Vagrant , to create virtual instances with custom resources and Ansible , to automate repetitive configurations through code. Components \u00b6 SoDa-TAP was built to be able to work in two ways with data, streaming or offline. This characteristic is possible thanks to the connectivity of the available software/libraries from the open source community: Spark Structured Streaming : Parallelization/distribution of tasks within all the cores to take advantage of the computing resources and speed up code execution (local or cluster based). Kafka : Distributed communication buffer to process high loads of data and connect end to end a source with a sink for data transfer/communication. CrateDB : Distributed storage to hold all the necessary records within tables or views. Visualizations: Custom developed visualizations made with ZingChart and FancyGrid . These services are what conform the data stages that SoDa-TAP follows. Data collection through a custom developed client that creates a CSV file, to pass it over for data processing & analysis with custom defined functions for specific uses cases, that later is transferred to the data storage to store the raw and augmented records, and to finalize, to see or reveal insights about the data, the records are consulted by the data visualization set of custom defined graphs. SoDa-TAP Components","title":"Concept"},{"location":"architecture/concept/#concept","text":"SoDa-TAP was designed based on two main concepts: microservices and cloud. From the microservices perspective, it supports further connectivity and compatibility with other software that has the capability to communicate with external services through a network connection. This capability is possible thanks to the containerization of its services through Docker . And from the cloud side, it is capable to be deployed locally or in the cloud through virtualization, which is possible thanks to Vagrant , to create virtual instances with custom resources and Ansible , to automate repetitive configurations through code.","title":"Concept"},{"location":"architecture/concept/#components","text":"SoDa-TAP was built to be able to work in two ways with data, streaming or offline. This characteristic is possible thanks to the connectivity of the available software/libraries from the open source community: Spark Structured Streaming : Parallelization/distribution of tasks within all the cores to take advantage of the computing resources and speed up code execution (local or cluster based). Kafka : Distributed communication buffer to process high loads of data and connect end to end a source with a sink for data transfer/communication. CrateDB : Distributed storage to hold all the necessary records within tables or views. Visualizations: Custom developed visualizations made with ZingChart and FancyGrid . These services are what conform the data stages that SoDa-TAP follows. Data collection through a custom developed client that creates a CSV file, to pass it over for data processing & analysis with custom defined functions for specific uses cases, that later is transferred to the data storage to store the raw and augmented records, and to finalize, to see or reveal insights about the data, the records are consulted by the data visualization set of custom defined graphs. SoDa-TAP Components","title":"Components"},{"location":"architecture/deployment/","text":"Deployment \u00b6 There are 2 ways that you can deploy the data platform, one, by using your own environment already configured with Docker and start all the required services with your own needs or two, by creting a new virtual environment from scratch to have more control over what resources to use and how many. The main difference is that the later was targeted to not so experienced users with coding by also accompanying it with a custom defined dictionary to control machine and dataset variables. In both cases, the custom developed services that will be launched as part of the data platform are: JupyterLab (Data retrieval client and SoDa-TAP engine). APIs . Visualizations (If needed). Own Environment \u00b6 For this scenario you only require to reuse the previously mentioned resources over your own environment: To deploy CrateDB, Kafka, and JupyterLab \u00b6 version : '3.3' services : #CrateDB cratedb : image : crate:4.7.1 # (1)! container_name : cratedb ports : - 4200:4200 - 4300:4300 - 5432:5432 volumes : # (2)! - ./crateData:/data command : [ \"crate\" , \"-Ccluster.name=CECN\" , \"-Cnode.name=cratedb\" , \"-Cnode.data=true\" , \"-Cnetwork.host=_site_\" , \"-Cdiscovery.seed_hosts=cratedb_02,cratedb_03\" , \"-Ccluster.initial_master_nodes=cratedb,cratedb_02,cratedb_03\" , \"-Cgateway.expected_nodes=3\" , \"-Cgateway.recover_after_nodes=2\" , \"-Chttp.cors.enabled=true\" , \"-Chttp.cors.allow-origin=*\" ] deploy : replicas : 1 restart_policy : condition : on-failure environment : - CRATE_HEAP_SIZE=2g # (3)! cratedb_02 : image : crate:4.7.1 # (4)! container_name : cratedb_02 ports : - 4201:4200 volumes : # (5)! - ./crateData2:/data command : [ \"crate\" , \"-Ccluster.name=CECN\" , \"-Cnode.name=cratedb_02\" , \"-Cnode.data=true\" , \"-Cnetwork.host=_site_\" , \"-Cdiscovery.seed_hosts=cratedb,cratedb_03\" , \"-Ccluster.initial_master_nodes=cratedb,cratedb_02,cratedb_03\" , \"-Cgateway.expected_nodes=3\" , \"-Cgateway.recover_after_nodes=2\" ] deploy : replicas : 1 restart_policy : condition : on-failure environment : - CRATE_HEAP_SIZE=2g # (6)! cratedb_03 : image : crate:4.7.1 # (7)! container_name : cratedb_03 ports : - 4202:4200 volumes : # (8)! - ./crateData3:/data command : [ \"crate\" , \"-Ccluster.name=CECN\" , \"-Cnode.name=cratedb_03\" , \"-Cnode.data=true\" , \"-Cnetwork.host=_site_\" , \"-Cdiscovery.seed_hosts=cratedb,cratedb_02\" , \"-Ccluster.initial_master_nodes=cratedb,cratedb_02,cratedb_03\" , \"-Cgateway.expected_nodes=3\" , \"-Cgateway.recover_after_nodes=2\" ] deploy : replicas : 1 restart_policy : condition : on-failure environment : - CRATE_HEAP_SIZE=2g # (9)! #Kafka zookeeper : image : confluentinc/cp-zookeeper:7.0.0 # (10)! hostname : zookeeper container_name : zookeeper ports : - 2181:2181 environment : ZOOKEEPER_CLIENT_PORT : 2181 ZOOKEEPER_TICK_TIME : 2000 broker : image : confluentinc/cp-enterprise-kafka:7.0.0 # (11)! hostname : broker container_name : broker depends_on : - zookeeper ports : - 29092:29092 - 9092:9092 - 31001:31001 environment : KAFKA_BROKER_ID : 1 KAFKA_ZOOKEEPER_CONNECT : 'zookeeper:2181' KAFKA_LISTENER_SECURITY_PROTOCOL_MAP : PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT KAFKA_ADVERTISED_LISTENERS : PLAINTEXT://broker:29092,PLAINTEXT_HOST://localhost:9092 KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR : 1 KAFKA_TRANSACTION_STATE_LOG_MIN_ISR : 1 KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR : 1 #KAFKA_GROUP_INITIAL_REBALANCE_DELAY_MS: 0 #KAFKA_JMX_PORT: 9101 KAFKA_INTER_BROKER_LISTENER_NAME : PLAINTEXT KAFKA_DELETE_TOPIC_ENABLE : 'true' KAFKA_AUTO_CREATE_TOPICS_ENABLE : 'true' KAFKA_METRIC_REPORTERS : io.confluent.metrics.reporter.ConfluentMetricsReporter KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR : 1 KAFKA_GROUP_INITIAL_REBALANCE_DELAY_MS : 100 CONFLUENT_METRICS_REPORTER_BOOTSTRAP_SERVERS : broker:29092 CONFLUENT_METRICS_REPORTER_ZOOKEEPER_CONNECT : zookeeper:2181 CONFLUENT_METRICS_REPORTER_TOPIC_REPLICAS : 1 CONFLUENT_METRICS_ENABLE : 'false' CONFLUENT_SUPPORT_CUSTOMER_ID : 'anonymous' KAFKA_JMX_HOSTNAME : \"localhost\" KAFKA_JMX_PORT : 31001 schema-registry : image : confluentinc/cp-schema-registry:7.0.0 # (12)! hostname : schema-registry container_name : schema-registry depends_on : - broker ports : - 8081:8081 environment : SCHEMA_REGISTRY_HOST_NAME : schema-registry SCHEMA_REGISTRY_KAFKASTORE_BOOTSTRAP_SERVERS : 'broker:29092' SCHEMA_REGISTRY_LISTENERS : http://0.0.0.0:8081 connect : image : confluentinc/cp-kafka-connect:7.0.0 # (13)! hostname : connect container_name : connect depends_on : - broker - schema-registry volumes : - /home/vagrant/SoDa-TAP/data:/data ports : - 8083:8083 environment : CONNECT_BOOTSTRAP_SERVERS : 'broker:29092' CONNECT_REST_ADVERTISED_HOST_NAME : connect CONNECT_REST_PORT : 8083 CONNECT_GROUP_ID : compose-connect-group CONNECT_CONFIG_STORAGE_TOPIC : docker-connect-configs CONNECT_CONFIG_STORAGE_REPLICATION_FACTOR : 1 CONNECT_OFFSET_FLUSH_INTERVAL_MS : 10000 CONNECT_OFFSET_STORAGE_TOPIC : docker-connect-offsets CONNECT_OFFSET_STORAGE_REPLICATION_FACTOR : 1 CONNECT_STATUS_STORAGE_TOPIC : docker-connect-status CONNECT_STATUS_STORAGE_REPLICATION_FACTOR : 1 CONNECT_KEY_CONVERTER : org.apache.kafka.connect.storage.StringConverter CONNECT_VALUE_CONVERTER : io.confluent.connect.avro.AvroConverter CONNECT_VALUE_CONVERTER_SCHEMA_REGISTRY_URL : http://schema-registry:8081 CONNECT_PLUGIN_PATH : \"/usr/share/java,/usr/share/confluent-hub-components\" CONNECT_LOG4J_LOGGERS : org.apache.zookeeper=ERROR,org.I0Itec.zkclient=ERROR,org.reflections=ERROR command : - bash - -c - | echo \"Installing connector plugins\" confluent-hub install --no-prompt confluentinc/kafka-connect-jdbc:5.4.1 #confluent-hub install --no-prompt jcustenborder/kafka-connect-twitter:0.3.33 confluent-hub install --no-prompt jcustenborder/kafka-connect-spooldir:2.0.62 #confluent-hub install --no-prompt streamthoughts/kafka-connect-file-pulse:2.4.0 # echo \"Downloading JDBC driver\" cp /data/crate-jdbc-2.6.0.jar /usr/share/confluent-hub-components/confluentinc-kafka-connect-jdbc cd /usr/share/confluent-hub-components/confluentinc-kafka-connect-jdbc #curl https://cdn.mysql.com/Downloads/Connector-J/mysql-connector-java-8.0.19.tar.gz | tar xz wget https://jdbc.postgresql.org/download/postgresql-42.2.14.jar #wget https://repo1.maven.org/maven2/io/crate/crate-jdbc/2.6.0/crate-jdbc-2.6.0.jar -o crate-jdbc-2.6.0.jar #curl -o crate-jdbc-2.6.0.jar https://repo1.maven.org/maven2/io/crate/crate-jdbc/2.6.0/crate-jdbc-2.6.0.jar # echo \"Launching Kafka Connect worker\" /etc/confluent/docker/run & # sleep infinity control-center : image : confluentinc/cp-enterprise-control-center:7.0.0 # (14)! hostname : control-center container_name : control-center depends_on : - broker - schema-registry - connect ports : - 9021:9021 environment : CONTROL_CENTER_BOOTSTRAP_SERVERS : 'broker:29092' CONTROL_CENTER_ZOOKEEPER_CONNECT : 'zookeeper:2181' CONTROL_CENTER_CONNECT_CONNECT-DEFAULT_CLUSTER : 'connect:8083' CONTROL_CENTER_SCHEMA_REGISTRY_URL : \"http://schema-registry:8081\" CONFLUENT_METRICS_TOPIC_REPLICATION : 1 CONTROL_CENTER_REPLICATION_FACTOR : 1 CONTROL_CENTER_COMMAND_TOPIC_REPLICATION : 1 CONTROL_CENTER_MONITORING_INTERCEPTOR_TOPIC_REPLICATION : 1 CONTROL_CENTER_INTERNAL_TOPICS_PARTITIONS : 1 CONTROL_CENTER_INTERNAL_TOPICS_REPLICATION : 1 CONTROL_CENTER_MONITORING_INTERCEPTOR_TOPIC_PARTITIONS : 1 CONTROL_CENTER_STREAMS_NUM_STREAM_THREADS : 1 CONTROL_CENTER_STREAMS_CACHE_MAX_BYTES_BUFFERING : 104857600 PORT : 9021 #Jupyterlab jupyterlab : image : cande/jupyterlab:latest # (15)! container_name : jupyterlab volumes : - ./notebooks:/notebooks ports : - 10000:8888 - 4040:4040 environment : - JUPYTER_ENABLE_LAB=1 #- GRANT_SUDO=yes command : start-notebook.sh --NotebookApp.notebook_dir=/notebooks networks : # (16)! default : external : name : cratenet Same CrateDB version. CrateDB directory to store data in the machine. Enviornment variable to control the Java heap for data retrieval. Same CrateDB version. CrateDB directory to store data in the machine. Enviornment variable to control the Java heap for data retrieval. Same CrateDB version. CrateDB directory to store data in the machine. Enviornment variable to control the Java heap for data retrieval. Same Confluent version. Same Confluent version. Same Confluent version. Same Confluent version. Same Confluent version. You can keep updating the image with your own libraries and create one of your own to use instead of this one. All the services need to be in the same network previosly created to be able to communicate. To deploy APIs and Custom Visualizations \u00b6 Using the github repo: Locate yourself in the root directory of each of the repo ( APIs and Visualizations ) where a 'docker-compose.yaml' file is present and run the below instruction under the command prompt. docker-compose up -d Create Environment \u00b6 SoDa-TAP requires for Vagrant and Virtualbox to be installed beforehand, since they act as provisioners for a virtual environment with all tools, packages and libaries available to work properly. Configuring Environment Resources \u00b6 First define how much RAM and how many CPUs you want to assign to your environment in the \"Vagrant\" file that is at the root of the repository: Machine Resources Start the virtual environment with all the services running by typing in a command line: vagrant up This will download and install under a virtual machine all the requirements for the project. Once done, you will be able to visit in your browser all the available services' dashboards: localhost:4200 \u279c CrateDB Dashboard localhost:10000 \u279c Jupyterlab Dashboard localhost:4040/jobs \u279c Spark job list execution (Only works when there are jobs running) localhost:9021 \u279c Kafka Dashboard localhost:81/docs \u279c APIs Documentation In order to ingest data as CSV files, a set of configurations need to be applied in Kafka before any processing is started. Visit localhost:9021 (Confluent control center): Confluent Dashboard Topic Creation \u00b6 You have 2 ways to accomplish the topic creation: Programatically through the create_topics.py script that is executed during the automatic deployment. Through manual creation. Click at the left bar in \"Topics\" and at the right click \"Add topic\": New Kafka Topic In the next window, first type a name under \"Topic name\" and later, click \"Create with defaults\": Kafka Topic Configuration This set of steps have created a new topic for Kafka to transfer all data. In order to start reading tweets, there is already a CSV file to test an end-to-end pipeline but to be able to process it, there needs to be a Kafka connector. Kafka Connector Creation \u00b6 You have 2 ways to accomplish the connector creation: Programatically through the curl command that is executed during the automatic deployment. Through manual creation. Click at the left bar in \"Connect\" and at the right, click \"connect-default\": Kafka Connectors Click \"Add connector\": Add Connector Next, click \"Upload connector config file\": New Kafka Connector Select the JSON file that is available at the root of this repository called \"connector_csv\". Once uploaded, it will populate the necessary fields for the connector with the name of the topic previously created: Kafka Connector Configuration Scroll down to the bottom, click \"Next\" and later, click \"Launch\": Kafka Connector JSON The topic should now have all tweets ingested in the topic. The next step is to start the Spark job to start processing the tweets. Testing the Pipeline \u00b6 To enable developers adapt the code accordignly to their needs, there is a JupyterLab container available to restart as many times as wanted to test the spark pipeline 1 . In the command line, access to the virtual machine by typing: vagrant ssh This will give you access to the virtual machine's environment. Now, type: sudo docker exec -it jupyterlab /bin/bash and then: jupyter server list This will show a token that you need to copy: JupyterLab Token Visit localhost:10000 (Jupyterlab dashboard) and enter the token: JupyterLab Token Input At the left side you will have a notebook available to make changes to the pipeline, restart, start and test different functionalities for the Spark's pipeline: JupyterLab Environment To exit the Jupyterlab container or from the vagrant SSH session, you can type: exit In case you need to add new services, packages or libraries to the vagrant environemnt, you can edit the ansible file and later type: vagrant provision To install new services or components. In case you need to destroy the instance because of corrupted files or any other permission problems for example, you can do: vagrant destroy And the instance will be deleted with all configurations associated. The following is a sequence diagram of how all the services interact when deployed from scratch: Sequence Diagram of SoDa-TAP At the start of the automatic deployment of the environment, the tweets will be already available in the csvTweets topic, ready to be consumed by the spark project in the JupyterLab notebook. \u21a9","title":"Deployment"},{"location":"architecture/deployment/#deployment","text":"There are 2 ways that you can deploy the data platform, one, by using your own environment already configured with Docker and start all the required services with your own needs or two, by creting a new virtual environment from scratch to have more control over what resources to use and how many. The main difference is that the later was targeted to not so experienced users with coding by also accompanying it with a custom defined dictionary to control machine and dataset variables. In both cases, the custom developed services that will be launched as part of the data platform are: JupyterLab (Data retrieval client and SoDa-TAP engine). APIs . Visualizations (If needed).","title":"Deployment"},{"location":"architecture/deployment/#own-environment","text":"For this scenario you only require to reuse the previously mentioned resources over your own environment:","title":"Own Environment"},{"location":"architecture/deployment/#to-deploy-cratedb-kafka-and-jupyterlab","text":"version : '3.3' services : #CrateDB cratedb : image : crate:4.7.1 # (1)! container_name : cratedb ports : - 4200:4200 - 4300:4300 - 5432:5432 volumes : # (2)! - ./crateData:/data command : [ \"crate\" , \"-Ccluster.name=CECN\" , \"-Cnode.name=cratedb\" , \"-Cnode.data=true\" , \"-Cnetwork.host=_site_\" , \"-Cdiscovery.seed_hosts=cratedb_02,cratedb_03\" , \"-Ccluster.initial_master_nodes=cratedb,cratedb_02,cratedb_03\" , \"-Cgateway.expected_nodes=3\" , \"-Cgateway.recover_after_nodes=2\" , \"-Chttp.cors.enabled=true\" , \"-Chttp.cors.allow-origin=*\" ] deploy : replicas : 1 restart_policy : condition : on-failure environment : - CRATE_HEAP_SIZE=2g # (3)! cratedb_02 : image : crate:4.7.1 # (4)! container_name : cratedb_02 ports : - 4201:4200 volumes : # (5)! - ./crateData2:/data command : [ \"crate\" , \"-Ccluster.name=CECN\" , \"-Cnode.name=cratedb_02\" , \"-Cnode.data=true\" , \"-Cnetwork.host=_site_\" , \"-Cdiscovery.seed_hosts=cratedb,cratedb_03\" , \"-Ccluster.initial_master_nodes=cratedb,cratedb_02,cratedb_03\" , \"-Cgateway.expected_nodes=3\" , \"-Cgateway.recover_after_nodes=2\" ] deploy : replicas : 1 restart_policy : condition : on-failure environment : - CRATE_HEAP_SIZE=2g # (6)! cratedb_03 : image : crate:4.7.1 # (7)! container_name : cratedb_03 ports : - 4202:4200 volumes : # (8)! - ./crateData3:/data command : [ \"crate\" , \"-Ccluster.name=CECN\" , \"-Cnode.name=cratedb_03\" , \"-Cnode.data=true\" , \"-Cnetwork.host=_site_\" , \"-Cdiscovery.seed_hosts=cratedb,cratedb_02\" , \"-Ccluster.initial_master_nodes=cratedb,cratedb_02,cratedb_03\" , \"-Cgateway.expected_nodes=3\" , \"-Cgateway.recover_after_nodes=2\" ] deploy : replicas : 1 restart_policy : condition : on-failure environment : - CRATE_HEAP_SIZE=2g # (9)! #Kafka zookeeper : image : confluentinc/cp-zookeeper:7.0.0 # (10)! hostname : zookeeper container_name : zookeeper ports : - 2181:2181 environment : ZOOKEEPER_CLIENT_PORT : 2181 ZOOKEEPER_TICK_TIME : 2000 broker : image : confluentinc/cp-enterprise-kafka:7.0.0 # (11)! hostname : broker container_name : broker depends_on : - zookeeper ports : - 29092:29092 - 9092:9092 - 31001:31001 environment : KAFKA_BROKER_ID : 1 KAFKA_ZOOKEEPER_CONNECT : 'zookeeper:2181' KAFKA_LISTENER_SECURITY_PROTOCOL_MAP : PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT KAFKA_ADVERTISED_LISTENERS : PLAINTEXT://broker:29092,PLAINTEXT_HOST://localhost:9092 KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR : 1 KAFKA_TRANSACTION_STATE_LOG_MIN_ISR : 1 KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR : 1 #KAFKA_GROUP_INITIAL_REBALANCE_DELAY_MS: 0 #KAFKA_JMX_PORT: 9101 KAFKA_INTER_BROKER_LISTENER_NAME : PLAINTEXT KAFKA_DELETE_TOPIC_ENABLE : 'true' KAFKA_AUTO_CREATE_TOPICS_ENABLE : 'true' KAFKA_METRIC_REPORTERS : io.confluent.metrics.reporter.ConfluentMetricsReporter KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR : 1 KAFKA_GROUP_INITIAL_REBALANCE_DELAY_MS : 100 CONFLUENT_METRICS_REPORTER_BOOTSTRAP_SERVERS : broker:29092 CONFLUENT_METRICS_REPORTER_ZOOKEEPER_CONNECT : zookeeper:2181 CONFLUENT_METRICS_REPORTER_TOPIC_REPLICAS : 1 CONFLUENT_METRICS_ENABLE : 'false' CONFLUENT_SUPPORT_CUSTOMER_ID : 'anonymous' KAFKA_JMX_HOSTNAME : \"localhost\" KAFKA_JMX_PORT : 31001 schema-registry : image : confluentinc/cp-schema-registry:7.0.0 # (12)! hostname : schema-registry container_name : schema-registry depends_on : - broker ports : - 8081:8081 environment : SCHEMA_REGISTRY_HOST_NAME : schema-registry SCHEMA_REGISTRY_KAFKASTORE_BOOTSTRAP_SERVERS : 'broker:29092' SCHEMA_REGISTRY_LISTENERS : http://0.0.0.0:8081 connect : image : confluentinc/cp-kafka-connect:7.0.0 # (13)! hostname : connect container_name : connect depends_on : - broker - schema-registry volumes : - /home/vagrant/SoDa-TAP/data:/data ports : - 8083:8083 environment : CONNECT_BOOTSTRAP_SERVERS : 'broker:29092' CONNECT_REST_ADVERTISED_HOST_NAME : connect CONNECT_REST_PORT : 8083 CONNECT_GROUP_ID : compose-connect-group CONNECT_CONFIG_STORAGE_TOPIC : docker-connect-configs CONNECT_CONFIG_STORAGE_REPLICATION_FACTOR : 1 CONNECT_OFFSET_FLUSH_INTERVAL_MS : 10000 CONNECT_OFFSET_STORAGE_TOPIC : docker-connect-offsets CONNECT_OFFSET_STORAGE_REPLICATION_FACTOR : 1 CONNECT_STATUS_STORAGE_TOPIC : docker-connect-status CONNECT_STATUS_STORAGE_REPLICATION_FACTOR : 1 CONNECT_KEY_CONVERTER : org.apache.kafka.connect.storage.StringConverter CONNECT_VALUE_CONVERTER : io.confluent.connect.avro.AvroConverter CONNECT_VALUE_CONVERTER_SCHEMA_REGISTRY_URL : http://schema-registry:8081 CONNECT_PLUGIN_PATH : \"/usr/share/java,/usr/share/confluent-hub-components\" CONNECT_LOG4J_LOGGERS : org.apache.zookeeper=ERROR,org.I0Itec.zkclient=ERROR,org.reflections=ERROR command : - bash - -c - | echo \"Installing connector plugins\" confluent-hub install --no-prompt confluentinc/kafka-connect-jdbc:5.4.1 #confluent-hub install --no-prompt jcustenborder/kafka-connect-twitter:0.3.33 confluent-hub install --no-prompt jcustenborder/kafka-connect-spooldir:2.0.62 #confluent-hub install --no-prompt streamthoughts/kafka-connect-file-pulse:2.4.0 # echo \"Downloading JDBC driver\" cp /data/crate-jdbc-2.6.0.jar /usr/share/confluent-hub-components/confluentinc-kafka-connect-jdbc cd /usr/share/confluent-hub-components/confluentinc-kafka-connect-jdbc #curl https://cdn.mysql.com/Downloads/Connector-J/mysql-connector-java-8.0.19.tar.gz | tar xz wget https://jdbc.postgresql.org/download/postgresql-42.2.14.jar #wget https://repo1.maven.org/maven2/io/crate/crate-jdbc/2.6.0/crate-jdbc-2.6.0.jar -o crate-jdbc-2.6.0.jar #curl -o crate-jdbc-2.6.0.jar https://repo1.maven.org/maven2/io/crate/crate-jdbc/2.6.0/crate-jdbc-2.6.0.jar # echo \"Launching Kafka Connect worker\" /etc/confluent/docker/run & # sleep infinity control-center : image : confluentinc/cp-enterprise-control-center:7.0.0 # (14)! hostname : control-center container_name : control-center depends_on : - broker - schema-registry - connect ports : - 9021:9021 environment : CONTROL_CENTER_BOOTSTRAP_SERVERS : 'broker:29092' CONTROL_CENTER_ZOOKEEPER_CONNECT : 'zookeeper:2181' CONTROL_CENTER_CONNECT_CONNECT-DEFAULT_CLUSTER : 'connect:8083' CONTROL_CENTER_SCHEMA_REGISTRY_URL : \"http://schema-registry:8081\" CONFLUENT_METRICS_TOPIC_REPLICATION : 1 CONTROL_CENTER_REPLICATION_FACTOR : 1 CONTROL_CENTER_COMMAND_TOPIC_REPLICATION : 1 CONTROL_CENTER_MONITORING_INTERCEPTOR_TOPIC_REPLICATION : 1 CONTROL_CENTER_INTERNAL_TOPICS_PARTITIONS : 1 CONTROL_CENTER_INTERNAL_TOPICS_REPLICATION : 1 CONTROL_CENTER_MONITORING_INTERCEPTOR_TOPIC_PARTITIONS : 1 CONTROL_CENTER_STREAMS_NUM_STREAM_THREADS : 1 CONTROL_CENTER_STREAMS_CACHE_MAX_BYTES_BUFFERING : 104857600 PORT : 9021 #Jupyterlab jupyterlab : image : cande/jupyterlab:latest # (15)! container_name : jupyterlab volumes : - ./notebooks:/notebooks ports : - 10000:8888 - 4040:4040 environment : - JUPYTER_ENABLE_LAB=1 #- GRANT_SUDO=yes command : start-notebook.sh --NotebookApp.notebook_dir=/notebooks networks : # (16)! default : external : name : cratenet Same CrateDB version. CrateDB directory to store data in the machine. Enviornment variable to control the Java heap for data retrieval. Same CrateDB version. CrateDB directory to store data in the machine. Enviornment variable to control the Java heap for data retrieval. Same CrateDB version. CrateDB directory to store data in the machine. Enviornment variable to control the Java heap for data retrieval. Same Confluent version. Same Confluent version. Same Confluent version. Same Confluent version. Same Confluent version. You can keep updating the image with your own libraries and create one of your own to use instead of this one. All the services need to be in the same network previosly created to be able to communicate.","title":"To deploy CrateDB, Kafka, and JupyterLab"},{"location":"architecture/deployment/#to-deploy-apis-and-custom-visualizations","text":"Using the github repo: Locate yourself in the root directory of each of the repo ( APIs and Visualizations ) where a 'docker-compose.yaml' file is present and run the below instruction under the command prompt. docker-compose up -d","title":"To deploy APIs and Custom Visualizations"},{"location":"architecture/deployment/#create-environment","text":"SoDa-TAP requires for Vagrant and Virtualbox to be installed beforehand, since they act as provisioners for a virtual environment with all tools, packages and libaries available to work properly.","title":"Create Environment"},{"location":"architecture/deployment/#configuring-environment-resources","text":"First define how much RAM and how many CPUs you want to assign to your environment in the \"Vagrant\" file that is at the root of the repository: Machine Resources Start the virtual environment with all the services running by typing in a command line: vagrant up This will download and install under a virtual machine all the requirements for the project. Once done, you will be able to visit in your browser all the available services' dashboards: localhost:4200 \u279c CrateDB Dashboard localhost:10000 \u279c Jupyterlab Dashboard localhost:4040/jobs \u279c Spark job list execution (Only works when there are jobs running) localhost:9021 \u279c Kafka Dashboard localhost:81/docs \u279c APIs Documentation In order to ingest data as CSV files, a set of configurations need to be applied in Kafka before any processing is started. Visit localhost:9021 (Confluent control center): Confluent Dashboard","title":"Configuring Environment Resources"},{"location":"architecture/deployment/#topic-creation","text":"You have 2 ways to accomplish the topic creation: Programatically through the create_topics.py script that is executed during the automatic deployment. Through manual creation. Click at the left bar in \"Topics\" and at the right click \"Add topic\": New Kafka Topic In the next window, first type a name under \"Topic name\" and later, click \"Create with defaults\": Kafka Topic Configuration This set of steps have created a new topic for Kafka to transfer all data. In order to start reading tweets, there is already a CSV file to test an end-to-end pipeline but to be able to process it, there needs to be a Kafka connector.","title":"Topic Creation"},{"location":"architecture/deployment/#kafka-connector-creation","text":"You have 2 ways to accomplish the connector creation: Programatically through the curl command that is executed during the automatic deployment. Through manual creation. Click at the left bar in \"Connect\" and at the right, click \"connect-default\": Kafka Connectors Click \"Add connector\": Add Connector Next, click \"Upload connector config file\": New Kafka Connector Select the JSON file that is available at the root of this repository called \"connector_csv\". Once uploaded, it will populate the necessary fields for the connector with the name of the topic previously created: Kafka Connector Configuration Scroll down to the bottom, click \"Next\" and later, click \"Launch\": Kafka Connector JSON The topic should now have all tweets ingested in the topic. The next step is to start the Spark job to start processing the tweets.","title":"Kafka Connector Creation"},{"location":"architecture/deployment/#testing-the-pipeline","text":"To enable developers adapt the code accordignly to their needs, there is a JupyterLab container available to restart as many times as wanted to test the spark pipeline 1 . In the command line, access to the virtual machine by typing: vagrant ssh This will give you access to the virtual machine's environment. Now, type: sudo docker exec -it jupyterlab /bin/bash and then: jupyter server list This will show a token that you need to copy: JupyterLab Token Visit localhost:10000 (Jupyterlab dashboard) and enter the token: JupyterLab Token Input At the left side you will have a notebook available to make changes to the pipeline, restart, start and test different functionalities for the Spark's pipeline: JupyterLab Environment To exit the Jupyterlab container or from the vagrant SSH session, you can type: exit In case you need to add new services, packages or libraries to the vagrant environemnt, you can edit the ansible file and later type: vagrant provision To install new services or components. In case you need to destroy the instance because of corrupted files or any other permission problems for example, you can do: vagrant destroy And the instance will be deleted with all configurations associated. The following is a sequence diagram of how all the services interact when deployed from scratch: Sequence Diagram of SoDa-TAP At the start of the automatic deployment of the environment, the tweets will be already available in the csvTweets topic, ready to be consumed by the spark project in the JupyterLab notebook. \u21a9","title":"Testing the Pipeline"},{"location":"references/","text":"Reference \u00b6 Coming Soon","title":"Reference"},{"location":"references/#reference","text":"Coming Soon","title":"Reference"},{"location":"useCases/ai4buzz/","text":"AI4Buzz \u00b6 Coming Soon","title":"AI4Buzz"},{"location":"useCases/ai4buzz/#ai4buzz","text":"Coming Soon","title":"AI4Buzz"},{"location":"useCases/mentalHealth/","text":"Mental Health \u00b6 Coming Soon","title":"Mental Health"},{"location":"useCases/mentalHealth/#mental-health","text":"Coming Soon","title":"Mental Health"},{"location":"useCases/virtualGym/","text":"Virtual Gym \u00b6 This document outlines the pipeline for the Virtual Gym system. It contains links to code resources and explains the function of each component. This document states what is implemented, needs to be implemented, and needs to be changed. Contents: 1. Virtual Gym Oculus 2. Virtual Gym WebGL 3. Python FastAPI 4. Kafka 5. Spark 6. CrateDB 7. Admin Dashboard 8. FastAPI for website data 9. Client Dashboard 10. Firebase Authentication High Level Overview \u00b6 Users play Virtual Gym on a VR headset. We have mostly worked with the Oculus Quest 2, however the system is designed to be generalizable to other headsets. The Virtual Gym app contains a collection of smaller games such as Slice Saber and Balloon Party . A session is what we call a playthrough of a single mini game. As a session is being played, data is being sent through a websocket to our server. The server is a PC running Ubuntu in the SSRG lab. The session data is stored and processed so that when a client goes to the dashboard (currently hosted here ), they can see statistics about their progress, scores, and fitness. Pipeline Diagram \u00b6 Virtual Gym Oculus \u00b6 Oculus Quest headsets run on Android under the surface, so we compile the project to a .apk file. The app is developed in Unity Engine. Only game functionality is handled by the app. All data is immediately passed off to the server where data processing and analysis occurs. Virtual Gym WebGL \u00b6 Virtual Reality games can be hosted by WebGL and run through the web browser on an XR device. The game itself will likely need to be hosted on our server, but this is not currently implemented. Python FastAPI \u00b6 This API was created by editing the SoDaTap API docker container . The API as of August 16 th , 2022 is saved here . The main.py file contains all of the existing functionality. *In the future we will want HTTPS secure connections instead of HTTP. For a website to be HTTPS, it's API calls must also be HTTPS. That will require getting a certificate and adjusting the CORS policy. The WebSocket is handled by the function below. Since the API is currently hosted on the IP http://129.128.184.214:8099 , we use ws://129.128.184.214:8099/ws as the url for websocket connections. To test these endpoints, I recommend using postman . This function waits for a websocket message JSON object. The object should have a \" type \" (frame, event, or session) and a \" content \" object. The content will be sent to the kafka topic of the corresponding type. @app . websocket ( \"/ws\" ) async def websocket_event_endpoint ( websocket : WebSocket ): await websocket . accept () while True : raw_data = await websocket . receive_text () try : message = json . loads ( raw_data ) except : break if message . get ( \"type\" ) == \"frame\" : topic = 'session_frame' elif message . get ( \"type\" ) == \"event\" : topic = 'session_event' elif message . get ( \"type\" ) == \"session\" : topic = 'session_meta' else : producer . send ( \"session_data\" , str ( raw_data ) . encode ( 'utf-8' )) continue producer . send ( topic , str ( message . get ( \"content\" )) . encode ( 'utf-8' )) The main.py file also currently hosts the API endpoints for the website data. This should eventually be split into two APIs since they serve different purposes. Refer to Step 8 for more information on those endpoints. Kafka (Confluent Dashboard) \u00b6 The Kafka docker container on our server is taken directly from SoDaTap . There is no need to add topics. If the broker is setup then topics will be created as needed when called for by the API. What is Kafka? Think of Kafka like a warehouse. On one side of this warehouse, supplies (or data) comes in, and on the other side data comes out. The side where supplies come in has garage doors that trucks connect to and unload. Relating Kafka terminology to this warehouse, the trucks are \"producers\" and the garage doors are \"topics\". In Step 3 we call the function producer.send(topic, <data>) because the API is the producer. The topic parameter is telling it what entrance of the warehouse to send that data to. Once inside the warehouse, data is stored in a queue, waiting for a \"consumer\" (in our case, Spark) to consume it. Spark \u00b6 We are running Spark Jobs in python from a jupyter notebook. This docker container was also taken from SoDaTAP . The only changes from SoDaTAP's system are the notebooks we use. Currently we are running three notebooks to handle the three incoming topics. session_event_ingest.ipynb session_frame_ingest.ipynb session_meta_ingest.ipynb To run these notebooks, refer to the SoDaTAP GitHub documentation. CrateDB \u00b6 CrateDB currently functions as our long term storage database for all records. There should eventually be an extra step to regularly send data dumps from CrateDB into a Postgres database for cold storage. We run our instance of CrateDB from the docker image on the SoDaTAP repository. As of August 16, 2022, the crateDB dashboard has a public URL . This IS a security concern that must be addressed before storing data on actual users. From this dashboard we can check to see if new data is coming in, as well as run some basic SQL commands. Admin Dashboard \u00b6 The admin dashboard was developed using streamlit. Streamlit is a python package that allows us to rapidly iterate a protoype for displaying new metrics. Streamlit sites lack customization and security. For those reasons, the admin dashboard is a temporary tool only to be used for development. It's currently offline and saved on the Server PC in the lab. If you ever need to sign in: username: admin, password: admin. FastAPI (for website data) \u00b6 The same API from Step 3 is being used to send JSON data to the dashboard website for users to visualize their data. Here is an example of an endpoint that takes in a username, start date, and end date. It returns a list of session objects. ```python make a get request endpoint called \"/sessions\" that takes a username parameter \u00b6 @app .get(\"/sessions/{username}\") async def read_sessions(username: str, start_date: int = None, end_date: int = None): try: df = get_sessions(username) if start_date and end_date: # convert int to datetime start_date = datetime.datetime.fromtimestamp(start_date) end_date = datetime.datetime.fromtimestamp(end_date) df = df[(df['Date'] >= start_date) & (df['Date'] <= end_date)] return df.to_json(orient='records') except Exception as e: return {\"error\": str(e)} ``` And here is an example of the JSON that gets returned. http://129.128.184.214:8100/sessions/SheldonR : json { \"Date\":1660081446000, \"DeviceId\":\"348db0e8d42742b0b14ec24f15113447afa84b58\", \"Game\":\"Bubbles-UnderSea\", \"Platform\":\"Quest\", \"SessionId\":\"2022-08-09T21.44.06SheldonR348db0e8d42742b0b14ec24f15113447afa84b58\", \"UserName\":\"SheldonR\", \"Version\":\"3.1\" } The data is then fetched from this url on the React.JS front end. Here is what it currently looks like on the front end: So to add a new feature to the website you must: 1. Make an API endpoint to request data 2. Fetch that data in the Client Dashboard project. 3. Use React to create a component that visualizes the data. Client Dashboard \u00b6 Currently we are hosting the dashboard on our own server. It would be nice to host it on the free Firebase plan, but that requires all of our API calls to be HTTPS. We need to add SSL certification to the server before hosting on Firebase. As of August 17, 2022 the website is hosted here The client dashboard is a website for users of Virtual Gym to make an account and view their information / statistics. The front end is made with React and Typescript. The user authentication is handled by Firebase. The plan is to have new users sign up on the website. When they open the Virtual Gym app, they are prompted to sign in. We will use the Firebase API to confirm a user exists in our system and has the necessary authorization to play. After their session, they can go back to the website to see in-depth analysis. Firebase Authentication \u00b6 All of our user authentication data is stored on Firebase. The Firebase dashboard allows you to view, edit, and remove user profiles. Firebase has APIs for web, mobile, Unity, etc. The API can handle registration, login, password reset, and pretty much anything else we will require for user auth.","title":"Virtual Gym"},{"location":"useCases/virtualGym/#virtual-gym","text":"This document outlines the pipeline for the Virtual Gym system. It contains links to code resources and explains the function of each component. This document states what is implemented, needs to be implemented, and needs to be changed. Contents: 1. Virtual Gym Oculus 2. Virtual Gym WebGL 3. Python FastAPI 4. Kafka 5. Spark 6. CrateDB 7. Admin Dashboard 8. FastAPI for website data 9. Client Dashboard 10. Firebase Authentication","title":"Virtual Gym"},{"location":"useCases/virtualGym/#high-level-overview","text":"Users play Virtual Gym on a VR headset. We have mostly worked with the Oculus Quest 2, however the system is designed to be generalizable to other headsets. The Virtual Gym app contains a collection of smaller games such as Slice Saber and Balloon Party . A session is what we call a playthrough of a single mini game. As a session is being played, data is being sent through a websocket to our server. The server is a PC running Ubuntu in the SSRG lab. The session data is stored and processed so that when a client goes to the dashboard (currently hosted here ), they can see statistics about their progress, scores, and fitness.","title":"High Level Overview"},{"location":"useCases/virtualGym/#pipeline-diagram","text":"","title":"Pipeline Diagram"},{"location":"useCases/virtualGym/#virtual-gym-oculus","text":"Oculus Quest headsets run on Android under the surface, so we compile the project to a .apk file. The app is developed in Unity Engine. Only game functionality is handled by the app. All data is immediately passed off to the server where data processing and analysis occurs.","title":"Virtual Gym Oculus"},{"location":"useCases/virtualGym/#virtual-gym-webgl","text":"Virtual Reality games can be hosted by WebGL and run through the web browser on an XR device. The game itself will likely need to be hosted on our server, but this is not currently implemented.","title":"Virtual Gym WebGL"},{"location":"useCases/virtualGym/#python-fastapi","text":"This API was created by editing the SoDaTap API docker container . The API as of August 16 th , 2022 is saved here . The main.py file contains all of the existing functionality. *In the future we will want HTTPS secure connections instead of HTTP. For a website to be HTTPS, it's API calls must also be HTTPS. That will require getting a certificate and adjusting the CORS policy. The WebSocket is handled by the function below. Since the API is currently hosted on the IP http://129.128.184.214:8099 , we use ws://129.128.184.214:8099/ws as the url for websocket connections. To test these endpoints, I recommend using postman . This function waits for a websocket message JSON object. The object should have a \" type \" (frame, event, or session) and a \" content \" object. The content will be sent to the kafka topic of the corresponding type. @app . websocket ( \"/ws\" ) async def websocket_event_endpoint ( websocket : WebSocket ): await websocket . accept () while True : raw_data = await websocket . receive_text () try : message = json . loads ( raw_data ) except : break if message . get ( \"type\" ) == \"frame\" : topic = 'session_frame' elif message . get ( \"type\" ) == \"event\" : topic = 'session_event' elif message . get ( \"type\" ) == \"session\" : topic = 'session_meta' else : producer . send ( \"session_data\" , str ( raw_data ) . encode ( 'utf-8' )) continue producer . send ( topic , str ( message . get ( \"content\" )) . encode ( 'utf-8' )) The main.py file also currently hosts the API endpoints for the website data. This should eventually be split into two APIs since they serve different purposes. Refer to Step 8 for more information on those endpoints.","title":"Python FastAPI"},{"location":"useCases/virtualGym/#kafka-confluent-dashboard","text":"The Kafka docker container on our server is taken directly from SoDaTap . There is no need to add topics. If the broker is setup then topics will be created as needed when called for by the API. What is Kafka? Think of Kafka like a warehouse. On one side of this warehouse, supplies (or data) comes in, and on the other side data comes out. The side where supplies come in has garage doors that trucks connect to and unload. Relating Kafka terminology to this warehouse, the trucks are \"producers\" and the garage doors are \"topics\". In Step 3 we call the function producer.send(topic, <data>) because the API is the producer. The topic parameter is telling it what entrance of the warehouse to send that data to. Once inside the warehouse, data is stored in a queue, waiting for a \"consumer\" (in our case, Spark) to consume it.","title":"Kafka (Confluent Dashboard)"},{"location":"useCases/virtualGym/#spark","text":"We are running Spark Jobs in python from a jupyter notebook. This docker container was also taken from SoDaTAP . The only changes from SoDaTAP's system are the notebooks we use. Currently we are running three notebooks to handle the three incoming topics. session_event_ingest.ipynb session_frame_ingest.ipynb session_meta_ingest.ipynb To run these notebooks, refer to the SoDaTAP GitHub documentation.","title":"Spark"},{"location":"useCases/virtualGym/#cratedb","text":"CrateDB currently functions as our long term storage database for all records. There should eventually be an extra step to regularly send data dumps from CrateDB into a Postgres database for cold storage. We run our instance of CrateDB from the docker image on the SoDaTAP repository. As of August 16, 2022, the crateDB dashboard has a public URL . This IS a security concern that must be addressed before storing data on actual users. From this dashboard we can check to see if new data is coming in, as well as run some basic SQL commands.","title":"CrateDB"},{"location":"useCases/virtualGym/#admin-dashboard","text":"The admin dashboard was developed using streamlit. Streamlit is a python package that allows us to rapidly iterate a protoype for displaying new metrics. Streamlit sites lack customization and security. For those reasons, the admin dashboard is a temporary tool only to be used for development. It's currently offline and saved on the Server PC in the lab. If you ever need to sign in: username: admin, password: admin.","title":"Admin Dashboard"},{"location":"useCases/virtualGym/#fastapi-for-website-data","text":"The same API from Step 3 is being used to send JSON data to the dashboard website for users to visualize their data. Here is an example of an endpoint that takes in a username, start date, and end date. It returns a list of session objects. ```python","title":"FastAPI (for website data)"},{"location":"useCases/virtualGym/#make-a-get-request-endpoint-called-sessions-that-takes-a-username-parameter","text":"@app .get(\"/sessions/{username}\") async def read_sessions(username: str, start_date: int = None, end_date: int = None): try: df = get_sessions(username) if start_date and end_date: # convert int to datetime start_date = datetime.datetime.fromtimestamp(start_date) end_date = datetime.datetime.fromtimestamp(end_date) df = df[(df['Date'] >= start_date) & (df['Date'] <= end_date)] return df.to_json(orient='records') except Exception as e: return {\"error\": str(e)} ``` And here is an example of the JSON that gets returned. http://129.128.184.214:8100/sessions/SheldonR : json { \"Date\":1660081446000, \"DeviceId\":\"348db0e8d42742b0b14ec24f15113447afa84b58\", \"Game\":\"Bubbles-UnderSea\", \"Platform\":\"Quest\", \"SessionId\":\"2022-08-09T21.44.06SheldonR348db0e8d42742b0b14ec24f15113447afa84b58\", \"UserName\":\"SheldonR\", \"Version\":\"3.1\" } The data is then fetched from this url on the React.JS front end. Here is what it currently looks like on the front end: So to add a new feature to the website you must: 1. Make an API endpoint to request data 2. Fetch that data in the Client Dashboard project. 3. Use React to create a component that visualizes the data.","title":"make a get request endpoint called \"/sessions\" that takes a username parameter"},{"location":"useCases/virtualGym/#client-dashboard","text":"Currently we are hosting the dashboard on our own server. It would be nice to host it on the free Firebase plan, but that requires all of our API calls to be HTTPS. We need to add SSL certification to the server before hosting on Firebase. As of August 17, 2022 the website is hosted here The client dashboard is a website for users of Virtual Gym to make an account and view their information / statistics. The front end is made with React and Typescript. The user authentication is handled by Firebase. The plan is to have new users sign up on the website. When they open the Virtual Gym app, they are prompted to sign in. We will use the Firebase API to confirm a user exists in our system and has the necessary authorization to play. After their session, they can go back to the website to see in-depth analysis.","title":"Client Dashboard"},{"location":"useCases/virtualGym/#firebase-authentication","text":"All of our user authentication data is stored on Firebase. The Firebase dashboard allows you to view, edit, and remove user profiles. Firebase has APIs for web, mobile, Unity, etc. The API can handle registration, login, password reset, and pretty much anything else we will require for user auth.","title":"Firebase Authentication"}]}